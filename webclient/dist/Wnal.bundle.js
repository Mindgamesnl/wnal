!function(e){function t(i){if(r[i])return r[i].exports;var n=r[i]={i:i,l:!1,exports:{}};return e[i].call(n.exports,n,n.exports,t),n.l=!0,n.exports}var r={};t.m=e,t.c=r,t.d=function(e,r,i){t.o(e,r)||Object.defineProperty(e,r,{enumerable:!0,get:i})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,r){if(1&r&&(e=t(e)),8&r)return e;if(4&r&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(t.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&r&&"string"!=typeof e)for(var n in e)t.d(i,n,function(t){return e[t]}.bind(null,n));return i},t.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(r,"a",r),r},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=123)}([function(e,t,r){var i=r(1),n=r(7),o=r(14),s=r(11),a=r(17),c="prototype",l=function(e,t,r){var u,h,f,d,p=e&l.F,_=e&l.G,v=e&l.S,g=e&l.P,y=e&l.B,b=_?i:v?i[t]||(i[t]={}):(i[t]||{})[c],S=_?n:n[t]||(n[t]={}),m=S[c]||(S[c]={});for(u in _&&(r=t),r)f=((h=!p&&b&&void 0!==b[u])?b:r)[u],d=y&&h?a(f,i):g&&"function"==typeof f?a(Function.call,f):f,b&&s(b,u,f,e&l.U),S[u]!=f&&o(S,u,d),g&&m[u]!=f&&(m[u]=f)};i.core=n,l.F=1,l.G=2,l.S=4,l.P=8,l.B=16,l.W=32,l.U=64,l.R=128,e.exports=l},function(e){var t=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=t)},function(e){e.exports=function(e){try{return!!e()}catch(e){return!0}}},function(e,t,r){var i=r(4);e.exports=function(e){if(!i(e))throw TypeError(e+" is not an object!");return e}},function(e){e.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},function(e,t,r){var i=r(48)("wks"),n=r(29),o=r(1).Symbol,s="function"==typeof o;(e.exports=function(e){return i[e]||(i[e]=s&&o[e]||(s?o:n)("Symbol."+e))}).store=i},function(e,t,r){var i=r(19),n=Math.min;e.exports=function(e){return 0<e?n(i(e),9007199254740991):0}},function(e){var t=e.exports={version:"2.6.11"};"number"==typeof __e&&(__e=t)},function(e,t,r){e.exports=!r(2)((function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}))},function(e,t,r){var i=r(3),n=r(88),o=r(26),s=Object.defineProperty;t.f=r(8)?Object.defineProperty:function(e,t,r){if(i(e),t=o(t,!0),i(r),n)try{return s(e,t,r)}catch(t){}if("get"in r||"set"in r)throw TypeError("Accessors not supported!");return"value"in r&&(e[t]=r.value),e}},function(e,t,r){var i=r(24);e.exports=function(e){return Object(i(e))}},function(e,t,r){var i=r(1),n=r(14),o=r(13),s=r(29)("src"),a=r(128),c="toString",l=(""+a).split(c);r(7).inspectSource=function(e){return a.call(e)},(e.exports=function(e,t,r,a){var c="function"==typeof r;c&&(o(r,"name")||n(r,"name",t)),e[t]===r||(c&&(o(r,s)||n(r,s,e[t]?""+e[t]:l.join(t+""))),e===i?e[t]=r:a?e[t]?e[t]=r:n(e,t,r):(delete e[t],n(e,t,r)))})(Function.prototype,c,(function(){return"function"==typeof this&&this[s]||a.call(this)}))},function(e,t,r){var i=r(0),n=r(2),o=r(24),s=/"/g,a=function(e,t,r,i){var n=o(e)+"",a="<"+t;return""!==r&&(a+=" "+r+'="'+(i+"").replace(s,"&quot;")+'"'),a+">"+n+"</"+t+">"};e.exports=function(e,t){var r={};r[e]=t(a),i(i.P+i.F*n((function(){var t=""[e]('"');return t!==t.toLowerCase()||3<t.split('"').length})),"String",r)}},function(e){var t={}.hasOwnProperty;e.exports=function(e,r){return t.call(e,r)}},function(e,t,r){var i=r(9),n=r(28);e.exports=r(8)?function(e,t,r){return i.f(e,t,n(1,r))}:function(e,t,r){return e[t]=r,e}},function(e,t,r){var i=r(44),n=r(24);e.exports=function(e){return i(n(e))}},function(e,t,r){"use strict";var i=r(2);e.exports=function(e,t){return!!e&&i((function(){t?e.call(null,(function(){}),1):e.call(null)}))}},function(e,t,r){var i=r(18);e.exports=function(e,t,r){return i(e),void 0===t?e:1===r?function(r){return e.call(t,r)}:2===r?function(r,i){return e.call(t,r,i)}:3===r?function(r,i,n){return e.call(t,r,i,n)}:function(){return e.apply(t,arguments)}}},function(e){e.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},function(e){var t=Math.ceil,r=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(0<e?r:t)(e)}},function(e,t,r){var i=r(45),n=r(28),o=r(15),s=r(26),a=r(13),c=r(88),l=Object.getOwnPropertyDescriptor;t.f=r(8)?l:function(e,t){if(e=o(e),t=s(t,!0),c)try{return l(e,t)}catch(t){}return a(e,t)?n(!i.f.call(e,t),e[t]):void 0}},function(e,t,r){var i=r(0),n=r(7),o=r(2);e.exports=function(e,t){var r=(n.Object||{})[e]||Object[e],s={};s[e]=t(r),i(i.S+i.F*o((function(){r(1)})),"Object",s)}},function(e,t,r){var i=r(17),n=r(44),o=r(10),s=r(6),a=r(104);e.exports=function(e,t){var r=1==e,c=4==e,l=6==e,u=t||a;return function(t,a,h){for(var f,d,p=o(t),_=n(p),v=i(a,h,3),g=s(_.length),y=0,b=r?u(t,g):2==e?u(t,0):void 0;g>y;y++)if((5==e||l||y in _)&&(d=v(f=_[y],y,p),e))if(r)b[y]=d;else if(d)switch(e){case 3:return!0;case 5:return f;case 6:return y;case 2:b.push(f)}else if(c)return!1;return l?-1:3==e||c?c:b}}},function(e){var t={}.toString;e.exports=function(e){return t.call(e).slice(8,-1)}},function(e){e.exports=function(e){if(null==e)throw TypeError("Can't call method on  "+e);return e}},function(e,t,r){"use strict";if(r(8)){var i=r(30),n=r(1),o=r(2),s=r(0),a=r(59),c=r(84),l=r(17),u=r(42),h=r(28),f=r(14),d=r(43),p=r(19),_=r(6),v=r(115),g=r(32),y=r(26),b=r(13),S=r(46),m=r(4),C=r(10),w=r(76),E=r(33),x=r(35),L=r(34).f,A=r(78),R=r(29),O=r(5),k=r(22),T=r(49),P=r(47),D=r(80),M=r(40),I=r(52),H=r(41),F=r(79),B=r(106),j=r(9),W=r(20),U=j.f,N=W.f,q=n.RangeError,z=n.TypeError,K=n.Uint8Array,V="ArrayBuffer",G="Shared"+V,Y="BYTES_PER_ELEMENT",X="prototype",J=Array[X],Z=c.ArrayBuffer,$=c.DataView,Q=k(0),ee=k(2),te=k(3),re=k(4),ie=k(5),ne=k(6),oe=T(!0),se=T(!1),ae=D.values,ce=D.keys,le=D.entries,ue=J.lastIndexOf,he=J.reduce,fe=J.reduceRight,de=J.join,pe=J.sort,_e=J.slice,ve=J.toString,ge=J.toLocaleString,ye=O("iterator"),be=O("toStringTag"),Se=R("typed_constructor"),me=R("def_constructor"),Ce=a.CONSTR,we=a.TYPED,Ee=a.VIEW,xe="Wrong length!",Le=k(1,(function(e,t){return Te(P(e,e[me]),t)})),Ae=o((function(){return 1===new K(new Uint16Array([1]).buffer)[0]})),Re=!!K&&!!K[X].set&&o((function(){new K(1).set({})})),Oe=function(e,t){var r=p(e);if(0>r||r%t)throw q("Wrong offset!");return r},ke=function(e){if(m(e)&&we in e)return e;throw z(e+" is not a typed array!")},Te=function(e,t){if(!m(e)||!(Se in e))throw z("It is not a typed array constructor!");return new e(t)},Pe=function(e,t){return De(P(e,e[me]),t)},De=function(e,t){for(var r=0,i=t.length,n=Te(e,i);i>r;)n[r]=t[r++];return n},Me=function(e,t,r){U(e,t,{get:function(){return this._d[r]}})},Ie=function(e){var t,r,i,n,o,s,a=C(e),c=arguments.length,u=1<c?arguments[1]:void 0,h=void 0!==u,f=A(a);if(null!=f&&!w(f)){for(s=f.call(a),i=[],t=0;!(o=s.next()).done;t++)i.push(o.value);a=i}for(h&&2<c&&(u=l(u,arguments[2],2)),t=0,r=_(a.length),n=Te(this,r);r>t;t++)n[t]=h?u(a[t],t):a[t];return n},He=function(){for(var e=0,t=arguments.length,r=Te(this,t);t>e;)r[e]=arguments[e++];return r},Fe=!!K&&o((function(){ge.call(new K(1))})),Be=function(){return ge.apply(Fe?_e.call(ke(this)):ke(this),arguments)},je={copyWithin:function(e,t){return B.call(ke(this),e,t,2<arguments.length?arguments[2]:void 0)},every:function(e){return re(ke(this),e,1<arguments.length?arguments[1]:void 0)},fill:function(){return F.apply(ke(this),arguments)},filter:function(e){return Pe(this,ee(ke(this),e,1<arguments.length?arguments[1]:void 0))},find:function(e){return ie(ke(this),e,1<arguments.length?arguments[1]:void 0)},findIndex:function(e){return ne(ke(this),e,1<arguments.length?arguments[1]:void 0)},forEach:function(e){Q(ke(this),e,1<arguments.length?arguments[1]:void 0)},indexOf:function(e){return se(ke(this),e,1<arguments.length?arguments[1]:void 0)},includes:function(e){return oe(ke(this),e,1<arguments.length?arguments[1]:void 0)},join:function(){return de.apply(ke(this),arguments)},lastIndexOf:function(){return ue.apply(ke(this),arguments)},map:function(e){return Le(ke(this),e,1<arguments.length?arguments[1]:void 0)},reduce:function(){return he.apply(ke(this),arguments)},reduceRight:function(){return fe.apply(ke(this),arguments)},reverse:function(){for(var e,t=this,r=ke(t).length,i=Math.floor(r/2),n=0;n<i;)e=t[n],t[n++]=t[--r],t[r]=e;return t},some:function(e){return te(ke(this),e,1<arguments.length?arguments[1]:void 0)},sort:function(e){return pe.call(ke(this),e)},subarray:function(e,t){var r=ke(this),i=r.length,n=g(e,i);return new(P(r,r[me]))(r.buffer,r.byteOffset+n*r.BYTES_PER_ELEMENT,_((void 0===t?i:g(t,i))-n))}},We=function(e,t){return Pe(this,_e.call(ke(this),e,t))},Ue=function(e){ke(this);var t=Oe(arguments[1],1),r=this.length,i=C(e),n=_(i.length),o=0;if(n+t>r)throw q(xe);for(;o<n;)this[t+o]=i[o++]},Ne={entries:function(){return le.call(ke(this))},keys:function(){return ce.call(ke(this))},values:function(){return ae.call(ke(this))}},qe=function(e,t){return m(e)&&e[we]&&"symbol"!=typeof t&&t in e&&+t+""==t+""},ze=function(e,t){return qe(e,t=y(t,!0))?h(2,e[t]):N(e,t)},Ke=function(e,t,r){return!(qe(e,t=y(t,!0))&&m(r)&&b(r,"value"))||b(r,"get")||b(r,"set")||r.configurable||b(r,"writable")&&!r.writable||b(r,"enumerable")&&!r.enumerable?U(e,t,r):(e[t]=r.value,e)};Ce||(W.f=ze,j.f=Ke),s(s.S+s.F*!Ce,"Object",{getOwnPropertyDescriptor:ze,defineProperty:Ke}),o((function(){ve.call({})}))&&(ve=ge=function(){return de.call(this)});var Ve=d({},je);d(Ve,Ne),f(Ve,ye,Ne.values),d(Ve,{slice:We,set:Ue,constructor:function(){},toString:ve,toLocaleString:Be}),Me(Ve,"buffer","b"),Me(Ve,"byteOffset","o"),Me(Ve,"byteLength","l"),Me(Ve,"length","e"),U(Ve,be,{get:function(){return this[we]}}),e.exports=function(e,t,r,c){var l=e+((c=!!c)?"Clamped":"")+"Array",h=n[l],d=h||{},p=h&&x(h),g=!h||!a.ABV,y={},b=h&&h[X],C=function(r,i){var n=r._d;return n.v["get"+e](i*t+n.o,Ae)},w=function(r,i,n){var o=r._d;c&&(n=0>(n=Math.round(n))?0:255<n?255:255&n),o.v["set"+e](i*t+o.o,n,Ae)},A=function(e,t){U(e,t,{get:function(){return C(this,t)},set:function(e){return w(this,t,e)},enumerable:!0})};g?(h=r((function(e,r,i,n){u(e,h,l,"_d");var o,s,a,c,d=0,p=0;if(m(r)){if(!(r instanceof Z||(c=S(r))==V||c==G))return we in r?De(h,r):Ie.call(h,r);o=r,p=Oe(i,t);var g=r.byteLength;if(void 0===n){if(g%t)throw q(xe);if(0>(s=g-p))throw q(xe)}else if((s=_(n)*t)+p>g)throw q(xe);a=s/t}else a=v(r),o=new Z(s=a*t);for(f(e,"_d",{b:o,o:p,l:s,e:a,v:new $(o)});d<a;)A(e,d++)})),b=h[X]=E(Ve),f(b,"constructor",h)):(!o((function(){h(1)}))||!o((function(){new h(-1)}))||!I((function(e){new h,new h(null),new h(1.5),new h(e)}),!0))&&(h=r((function(e,r,i,n){var o;return u(e,h,l),m(r)?r instanceof Z||(o=S(r))==V||o==G?void 0===n?void 0===i?new d(r):new d(r,Oe(i,t)):new d(r,Oe(i,t),n):we in r?De(h,r):Ie.call(h,r):new d(v(r))})),Q(p===Function.prototype?L(d):L(d).concat(L(p)),(function(e){e in h||f(h,e,d[e])})),h[X]=b,!i&&(b.constructor=h));var R=b[ye],O=!!R&&("values"==R.name||null==R.name),k=Ne.values;f(h,Se,!0),f(b,we,l),f(b,Ee,!0),f(b,me,h),(c?new h(1)[be]!=l:!(be in b))&&U(b,be,{get:function(){return l}}),y[l]=h,s(s.G+s.W+s.F*(h!=d),y),s(s.S,l,{BYTES_PER_ELEMENT:t}),s(s.S+s.F*o((function(){d.of.call(h,1)})),l,{from:Ie,of:He}),Y in b||f(b,Y,t),s(s.P,l,je),H(l),s(s.P+s.F*Re,l,{set:Ue}),s(s.P+s.F*!O,l,Ne),i||b.toString==ve||(b.toString=ve),s(s.P+s.F*o((function(){new h(1).slice()})),l,{slice:We}),s(s.P+s.F*(o((function(){return[1,2].toLocaleString()!=new h([1,2]).toLocaleString()}))||!o((function(){b.toLocaleString.call([1,2])}))),l,{toLocaleString:Be}),M[l]=O?R:k,i||O||f(b,ye,k)}}else e.exports=function(){}},function(e,t,r){var i=r(4);e.exports=function(e,t){if(!i(e))return e;var r,n;if(t&&"function"==typeof(r=e.toString)&&!i(n=r.call(e)))return n;if("function"==typeof(r=e.valueOf)&&!i(n=r.call(e)))return n;if(!t&&"function"==typeof(r=e.toString)&&!i(n=r.call(e)))return n;throw TypeError("Can't convert object to primitive value")}},function(e,t,r){var i=r(29)("meta"),n=r(4),o=r(13),s=r(9).f,a=0,c=Object.isExtensible||function(){return!0},l=!r(2)((function(){return c(Object.preventExtensions({}))})),u=function(e){s(e,i,{value:{i:"O"+ ++a,w:{}}})},h=e.exports={KEY:i,NEED:!1,fastKey:function(e,t){if(!n(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!o(e,i)){if(!c(e))return"F";if(!t)return"E";u(e)}return e[i].i},getWeak:function(e,t){if(!o(e,i)){if(!c(e))return!0;if(!t)return!1;u(e)}return e[i].w},onFreeze:function(e){return l&&h.NEED&&c(e)&&!o(e,i)&&u(e),e}}},function(e){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},function(e){var t=0,r=Math.random();e.exports=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++t+r).toString(36))}},function(e){e.exports=!1},function(e,t,r){var i=r(90),n=r(63);e.exports=Object.keys||function(e){return i(e,n)}},function(e,t,r){var i=r(19),n=Math.max,o=Math.min;e.exports=function(e,t){return 0>(e=i(e))?n(e+t,0):o(e,t)}},function(e,t,r){var i=r(3),n=r(91),o=r(63),s=r(62)("IE_PROTO"),a=function(){},c="prototype",l=function(){var e,t=r(60)("iframe"),i=o.length;for(t.style.display="none",r(64).appendChild(t),t.src="javascript:",(e=t.contentWindow.document).open(),e.write("<script>document.F=Object<\/script>"),e.close(),l=e.F;i--;)delete l[c][o[i]];return l()};e.exports=Object.create||function(e,t){var r;return null===e?r=l():(a[c]=i(e),r=new a,a[c]=null,r[s]=e),void 0===t?r:n(r,t)}},function(e,t,r){var i=r(90),n=r(63).concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return i(e,n)}},function(e,t,r){var i=r(13),n=r(10),o=r(62)("IE_PROTO"),s=Object.prototype;e.exports=Object.getPrototypeOf||function(e){return e=n(e),i(e,o)?e[o]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?s:null}},function(e,t,r){var i=r(5)("unscopables"),n=Array.prototype;null==n[i]&&r(14)(n,i,{}),e.exports=function(e){n[i][e]=!0}},function(e,t,r){var i=r(4);e.exports=function(e,t){if(!i(e)||e._t!==t)throw TypeError("Incompatible receiver, "+t+" required!");return e}},function(e,t,r){var i=r(9).f,n=r(13),o=r(5)("toStringTag");e.exports=function(e,t,r){e&&!n(e=r?e:e.prototype,o)&&i(e,o,{configurable:!0,value:t})}},function(e,t,r){var i=r(0),n=r(24),o=r(2),s=r(66),a="["+s+"]",c=RegExp("^"+a+a+"*"),l=RegExp(a+a+"*$"),u=function(e,t,r){var n={},a=o((function(){return!!s[e]()||"​"!="​"[e]()})),c=n[e]=a?t(h):s[e];r&&(n[r]=c),i(i.P+i.F*a,"String",n)},h=u.trim=function(e,t){return e=n(e)+"",1&t&&(e=e.replace(c,"")),2&t&&(e=e.replace(l,"")),e};e.exports=u},function(e){e.exports={}},function(e,t,r){"use strict";var i=r(1),n=r(9),o=r(8),s=r(5)("species");e.exports=function(e){var t=i[e];o&&t&&!t[s]&&n.f(t,s,{configurable:!0,get:function(){return this}})}},function(e){e.exports=function(e,t,r,i){if(!(e instanceof t)||void 0!==i&&i in e)throw TypeError(r+": incorrect invocation!");return e}},function(e,t,r){var i=r(11);e.exports=function(e,t,r){for(var n in t)i(e,n,t[n],r);return e}},function(e,t,r){var i=r(23);e.exports=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==i(e)?e.split(""):Object(e)}},function(e,t){t.f={}.propertyIsEnumerable},function(e,t,r){var i=r(23),n=r(5)("toStringTag"),o="Arguments"==i(function(){return arguments}());e.exports=function(e){var t,r,s;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(r=function(e,t){try{return e[t]}catch(t){}}(t=Object(e),n))?r:o?i(t):"Object"==(s=i(t))&&"function"==typeof t.callee?"Arguments":s}},function(e,t,r){var i=r(3),n=r(18),o=r(5)("species");e.exports=function(e,t){var r,s=i(e).constructor;return void 0===s||null==(r=i(s)[o])?t:n(r)}},function(e,t,r){var i=r(7),n=r(1),o="__core-js_shared__",s=n[o]||(n[o]={});(e.exports=function(e,t){return s[e]||(s[e]=void 0===t?{}:t)})("versions",[]).push({version:i.version,mode:r(30)?"pure":"global",copyright:"© 2019 Denis Pushkarev (zloirock.ru)"})},function(e,t,r){var i=r(15),n=r(6),o=r(32);e.exports=function(e){return function(t,r,s){var a,c=i(t),l=n(c.length),u=o(s,l);if(e&&r!=r){for(;l>u;)if((a=c[u++])!=a)return!0}else for(;l>u;u++)if((e||u in c)&&c[u]===r)return e||u||0;return!e&&-1}}},function(e,t){t.f=Object.getOwnPropertySymbols},function(e,t,r){var i=r(23);e.exports=Array.isArray||function(e){return"Array"==i(e)}},function(e,t,r){var i=r(5)("iterator"),n=!1;try{var o=[7][i]();o.return=function(){n=!0},Array.from(o,(function(){throw 2}))}catch(t){}e.exports=function(e,t){if(!t&&!n)return!1;var r=!1;try{var o=[7],s=o[i]();s.next=function(){return{done:r=!0}},o[i]=function(){return s},e(o)}catch(t){}return r}},function(e,t,r){"use strict";var i=r(3);e.exports=function(){var e=i(this),t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.unicode&&(t+="u"),e.sticky&&(t+="y"),t}},function(e,t,r){"use strict";var i=r(46),n=RegExp.prototype.exec;e.exports=function(e,t){var r=e.exec;if("function"==typeof r){var o=r.call(e,t);if("object"!=typeof o)throw new TypeError("RegExp exec method returned something other than an Object or null");return o}if("RegExp"!==i(e))throw new TypeError("RegExp#exec called on incompatible receiver");return n.call(e,t)}},function(e,t,r){"use strict";r(108);var i=r(11),n=r(14),o=r(2),s=r(24),a=r(5),c=r(81),l=a("species"),u=!o((function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(e,"$<a>")})),h=function(){var e=/(?:)/,t=e.exec;e.exec=function(){return t.apply(this,arguments)};var r="ab".split(e);return 2===r.length&&"a"===r[0]&&"b"===r[1]}();e.exports=function(e,t,r){var f=a(e),d=!o((function(){var t={};return t[f]=function(){return 7},7!=""[e](t)})),p=d?!o((function(){var t=!1,r=/a/;return r.exec=function(){return t=!0,null},"split"===e&&(r.constructor={},r.constructor[l]=function(){return r}),r[f](""),!t})):void 0;if(!d||!p||"replace"===e&&!u||"split"===e&&!h){var _=/./[f],v=r(s,f,""[e],(function(e,t,r,i,n){return t.exec===c?d&&!n?{done:!0,value:_.call(t,r,i)}:{done:!0,value:e.call(r,t,i)}:{done:!1}})),g=v[0],y=v[1];i(String.prototype,e,g),n(RegExp.prototype,f,2==t?function(e,t){return y.call(e,this,t)}:function(e){return y.call(e,this)})}}},function(e,t,r){var i=r(17),n=r(103),o=r(76),s=r(3),a=r(6),c=r(78),l={},u={};(t=e.exports=function(e,t,r,h,f){var d,p,_,v,g=f?function(){return e}:c(e),y=i(r,h,t?2:1),b=0;if("function"!=typeof g)throw TypeError(e+" is not iterable!");if(o(g)){for(d=a(e.length);d>b;b++)if((v=t?y(s(p=e[b])[0],p[1]):y(e[b]))===l||v===u)return v}else for(_=g.call(e);!(p=_.next()).done;)if((v=n(_,y,p.value,t))===l||v===u)return v}).BREAK=l,t.RETURN=u},function(e,t,r){var i=r(1).navigator;e.exports=i&&i.userAgent||""},function(e,t,r){"use strict";var i=r(1),n=r(0),o=r(11),s=r(43),a=r(27),c=r(56),l=r(42),u=r(4),h=r(2),f=r(52),d=r(38),p=r(67);e.exports=function(e,t,r,_,v,g){var y=i[e],b=y,S=v?"set":"add",m=b&&b.prototype,C={},w=function(e){var t=m[e];o(m,e,"delete"==e||"has"==e?function(e){return(!g||u(e))&&t.call(this,0===e?0:e)}:"get"==e?function(e){return g&&!u(e)?void 0:t.call(this,0===e?0:e)}:"add"==e?function(e){return t.call(this,0===e?0:e),this}:function(e,r){return t.call(this,0===e?0:e,r),this})};if("function"==typeof b&&(g||m.forEach&&!h((function(){(new b).entries().next()})))){var E=new b,x=E[S](g?{}:-0,1)!=E,L=h((function(){E.has(1)})),A=f((function(e){new b(e)})),R=!g&&h((function(){for(var e=new b,t=5;t--;)e[S](t,t);return!e.has(-0)}));A||((b=t((function(t,r){l(t,b,e);var i=p(new y,t,b);return null!=r&&c(r,v,i[S],i),i}))).prototype=m,m.constructor=b),(L||R)&&(w("delete"),w("has"),v&&w("get")),(R||x)&&w(S),g&&m.clear&&delete m.clear}else b=_.getConstructor(t,e,v,S),s(b.prototype,r),a.NEED=!0;return d(b,e),C[e]=b,n(n.G+n.W+n.F*(b!=y),C),g||_.setStrong(b,e,v),b}},function(e,t,r){for(var i,n=r(1),o=r(14),s=r(29),a=s("typed_array"),c=s("view"),l=!(!n.ArrayBuffer||!n.DataView),u=l,h=0,f=["Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array"];h<9;)(i=n[f[h++]])?(o(i.prototype,a,!0),o(i.prototype,c,!0)):u=!1;e.exports={ABV:l,CONSTR:u,TYPED:a,VIEW:c}},function(e,t,r){var i=r(4),n=r(1).document,o=i(n)&&i(n.createElement);e.exports=function(e){return o?n.createElement(e):{}}},function(e,t,r){t.f=r(5)},function(e,t,r){var i=r(48)("keys"),n=r(29);e.exports=function(e){return i[e]||(i[e]=n(e))}},function(e){e.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},function(e,t,r){var i=r(1).document;e.exports=i&&i.documentElement},function(e,t,r){var i=r(4),n=r(3),o=function(e,t){if(n(e),!i(t)&&null!==t)throw TypeError(t+": can't set as prototype!")};e.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(e,t,i){try{(i=r(17)(Function.call,r(20).f(Object.prototype,"__proto__").set,2))(e,[]),t=!(e instanceof Array)}catch(e){t=!0}return function(e,r){return o(e,r),t?e.__proto__=r:i(e,r),e}}({},!1):void 0),check:o}},function(e){e.exports="\t\n\v\f\r   ᠎             　\u2028\u2029\ufeff"},function(e,t,r){var i=r(4),n=r(65).set;e.exports=function(e,t,r){var o,s=t.constructor;return s!==r&&"function"==typeof s&&(o=s.prototype)!==r.prototype&&i(o)&&n&&n(e,o),e}},function(e,t,r){"use strict";var i=r(19),n=r(24);e.exports=function(e){var t=n(this)+"",r="",o=i(e);if(0>o||o==1/0)throw RangeError("Count can't be negative");for(;0<o;(o>>>=1)&&(t+=t))1&o&&(r+=t);return r}},function(e){e.exports=Math.sign||function(e){return 0==(e=+e)||e!=e?e:0>e?-1:1}},function(e){var t=Math.expm1;e.exports=!t||22025.465794806718<t(10)||22025.465794806718>t(10)||-2e-17!=t(-2e-17)?function(e){return 0==(e=+e)?e:-1e-6<e&&1e-6>e?e+e*e/2:Math.exp(e)-1}:t},function(e,t,r){var i=r(19),n=r(24);e.exports=function(e){return function(t,r){var o,s,a=n(t)+"",c=i(r),l=a.length;return 0>c||c>=l?e?"":void 0:55296>(o=a.charCodeAt(c))||56319<o||c+1===l||56320>(s=a.charCodeAt(c+1))||57343<s?e?a.charAt(c):o:e?a.slice(c,c+2):s-56320+(o-55296<<10)+65536}}},function(e,t,r){"use strict";var i=r(30),n=r(0),o=r(11),s=r(14),a=r(40),c=r(102),l=r(38),u=r(35),h=r(5)("iterator"),f=!([].keys&&"next"in[].keys()),d="keys",p="values",_=function(){return this};e.exports=function(e,t,r,v,g,y,b){c(r,t,v);var S,m,C,w=function(e){return!f&&e in A?A[e]:function(){return new r(this,e)}},E=t+" Iterator",x=g==p,L=!1,A=e.prototype,R=A[h]||A["@@iterator"]||g&&A[g],O=R||w(g),k=g?x?w("entries"):O:void 0,T="Array"==t&&A.entries||R;if(T&&((C=u(T.call(new e)))!==Object.prototype&&C.next&&(l(C,E,!0),!i&&"function"!=typeof C[h]&&s(C,h,_))),x&&R&&R.name!==p&&(L=!0,O=function(){return R.call(this)}),(!i||b)&&(f||L||!A[h])&&s(A,h,O),a[t]=O,a[E]=_,g)if(S={values:x?O:w(p),keys:y?O:w(d),entries:k},b)for(m in S)m in A||o(A,m,S[m]);else n(n.P+n.F*(f||L),t,S);return S}},function(e,t,r){var i=r(74),n=r(24);e.exports=function(e,t,r){if(i(t))throw TypeError("String#"+r+" doesn't accept regex!");return n(e)+""}},function(e,t,r){var i=r(4),n=r(23),o=r(5)("match");e.exports=function(e){var t;return i(e)&&(void 0===(t=e[o])?"RegExp"==n(e):!!t)}},function(e,t,r){var i=r(5)("match");e.exports=function(e){var t=/./;try{"/./"[e](t)}catch(r){try{return t[i]=!1,!"/./"[e](t)}catch(e){}}return!0}},function(e,t,r){var i=r(40),n=r(5)("iterator"),o=Array.prototype;e.exports=function(e){return void 0!==e&&(i.Array===e||o[n]===e)}},function(e,t,r){"use strict";var i=r(9),n=r(28);e.exports=function(e,t,r){t in e?i.f(e,t,n(0,r)):e[t]=r}},function(e,t,r){var i=r(46),n=r(5)("iterator"),o=r(40);e.exports=r(7).getIteratorMethod=function(e){if(null!=e)return e[n]||e["@@iterator"]||o[i(e)]}},function(e,t,r){"use strict";var i=r(10),n=r(32),o=r(6);e.exports=function(e){for(var t=i(this),r=o(t.length),s=arguments.length,a=n(1<s?arguments[1]:void 0,r),c=2<s?arguments[2]:void 0,l=void 0===c?r:n(c,r);l>a;)t[a++]=e;return t}},function(e,t,r){"use strict";var i=r(36),n=r(107),o=r(40),s=r(15);e.exports=r(72)(Array,"Array",(function(e,t){this._t=s(e),this._i=0,this._k=t}),(function(){var e=this._t,t=this._k,r=this._i++;return!e||r>=e.length?(this._t=void 0,n(1)):n(0,"keys"==t?r:"values"==t?e[r]:[r,e[r]])}),"values"),o.Arguments=o.Array,i("keys"),i("values"),i("entries")},function(e,t,r){"use strict";var i=r(53),n=RegExp.prototype.exec,o=String.prototype.replace,s=n,a="lastIndex",c=function(){var e=/a/,t=/b*/g;return n.call(e,"a"),n.call(t,"a"),0!==e[a]||0!==t[a]}(),l=void 0!==/()??/.exec("")[1];(c||l)&&(s=function(e){var t,r,s,u,h=this;return l&&(r=new RegExp("^"+h.source+"$(?!\\s)",i.call(h))),c&&(t=h[a]),s=n.call(h,e),c&&s&&(h[a]=h.global?s.index+s[0].length:t),l&&s&&1<s.length&&o.call(s[0],r,(function(){for(u=1;u<arguments.length-2;u++)void 0===arguments[u]&&(s[u]=void 0)})),s}),e.exports=s},function(e,t,r){"use strict";var i=r(71)(!0);e.exports=function(e,t,r){return t+(r?i(e,t).length:1)}},function(e,t,r){var i,n,o,s=r(17),a=r(96),c=r(64),l=r(60),u=r(1),h=u.process,f=u.setImmediate,d=u.clearImmediate,p=u.MessageChannel,_=u.Dispatch,v=0,g={},y="onreadystatechange",b=function(){var e=+this;if(g.hasOwnProperty(e)){var t=g[e];delete g[e],t()}},S=function(e){b.call(e.data)};f&&d||(f=function(e){for(var t=[],r=1;arguments.length>r;)t.push(arguments[r++]);return g[++v]=function(){a("function"==typeof e?e:Function(e),t)},i(v),v},d=function(e){delete g[e]},"process"==r(23)(h)?i=function(e){h.nextTick(s(b,e,1))}:_&&_.now?i=function(e){_.now(s(b,e,1))}:p?(o=(n=new p).port2,n.port1.onmessage=S,i=s(o.postMessage,o,1)):u.addEventListener&&"function"==typeof postMessage&&!u.importScripts?(i=function(e){u.postMessage(e+"","*")},u.addEventListener("message",S,!1)):i=y in l("script")?function(e){c.appendChild(l("script"))[y]=function(){c.removeChild(this),b.call(e)}}:function(e){setTimeout(s(b,e,1),0)}),e.exports={set:f,clear:d}},function(e,t,r){"use strict";function i(e,t,r){var i,n,o,s=Array(r),a=8*r-t-1,c=(1<<a)-1,l=c>>1,u=23===t?W(2,-24)-W(2,-77):0,h=0,f=0>e||0===e&&0>1/e?1:0;for((e=j(e))!=e||e===F?(n=e==e?0:1,i=c):(i=U(N(e)/q),1>e*(o=W(2,-i))&&(i--,o*=2),2<=(e+=1<=i+l?u/o:u*W(2,1-l))*o&&(i++,o/=2),i+l>=c?(n=0,i=c):1<=i+l?(n=(e*o-1)*W(2,t),i+=l):(n=e*W(2,l-1)*W(2,t),i=0));8<=t;s[h++]=255&n,n/=256,t-=8);for(i=i<<t|n,a+=t;0<a;s[h++]=255&i,i/=256,a-=8);return s[--h]|=128*f,s}function n(e,t,r){var i,n=8*r-t-1,o=(1<<n)-1,s=o>>1,a=n-7,c=r-1,l=e[c--],u=127&l;for(l>>=7;0<a;u=256*u+e[c],c--,a-=8);for(i=u&(1<<-a)-1,u>>=-a,a+=t;0<a;i=256*i+e[c],c--,a-=8);if(0===u)u=1-s;else{if(u===o)return i?NaN:l?-F:F;i+=W(2,t),u-=s}return(l?-1:1)*i*W(2,u-t)}function o(e){return e[3]<<24|e[2]<<16|e[1]<<8|e[0]}function s(e){return[255&e]}function a(e){return[255&e,255&e>>8]}function c(e){return[255&e,255&e>>8,255&e>>16,255&e>>24]}function l(e){return i(e,52,8)}function u(e){return i(e,23,4)}function h(e,t,r){L(e[T],t,{get:function(){return this[r]}})}function f(e,t,r,i){var n=E(+r);if(n+t>e[Y])throw H(P);var o=e[G]._b,s=n+e[X],a=o.slice(s,s+t);return i?a:a.reverse()}function d(e,t,r,i,n,o){var s=E(+r);if(s+t>e[Y])throw H(P);for(var a=e[G]._b,c=s+e[X],l=i(+n),u=0;u<t;u++)a[c+u]=l[o?u:t-u-1]}var p=r(1),_=r(8),v=r(30),g=r(59),y=r(14),b=r(43),S=r(2),m=r(42),C=r(19),w=r(6),E=r(115),x=r(34).f,L=r(9).f,A=r(79),R=r(38),O="ArrayBuffer",k="DataView",T="prototype",P="Wrong index!",D=p[O],M=p[k],I=p.Math,H=p.RangeError,F=p.Infinity,B=D,j=I.abs,W=I.pow,U=I.floor,N=I.log,q=I.LN2,z="buffer",K="byteLength",V="byteOffset",G=_?"_b":z,Y=_?"_l":K,X=_?"_o":V;if(g.ABV){if(!S((function(){D(1)}))||!S((function(){new D(-1)}))||S((function(){return new D,new D(1.5),new D(NaN),D.name!=O}))){for(var J,Z=(D=function(e){return m(this,D),new B(E(e))})[T]=B[T],$=x(B),Q=0;$.length>Q;)(J=$[Q++])in D||y(D,J,B[J]);v||(Z.constructor=D)}var ee=new M(new D(2)),te=M[T].setInt8;ee.setInt8(0,2147483648),ee.setInt8(1,2147483649),(ee.getInt8(0)||!ee.getInt8(1))&&b(M[T],{setInt8:function(e,t){te.call(this,e,t<<24>>24)},setUint8:function(e,t){te.call(this,e,t<<24>>24)}},!0)}else D=function(e){m(this,D,O);var t=E(e);this._b=A.call(Array(t),0),this[Y]=t},M=function(e,t,r){m(this,M,k),m(e,D,k);var i=e[Y],n=C(t);if(0>n||n>i)throw H("Wrong offset!");if(n+(r=void 0===r?i-n:w(r))>i)throw H("Wrong length!");this[G]=e,this[X]=n,this[Y]=r},_&&(h(D,K,"_l"),h(M,z,"_b"),h(M,K,"_l"),h(M,V,"_o")),b(M[T],{getInt8:function(e){return f(this,1,e)[0]<<24>>24},getUint8:function(e){return f(this,1,e)[0]},getInt16:function(e){var t=f(this,2,e,arguments[1]);return(t[1]<<8|t[0])<<16>>16},getUint16:function(e){var t=f(this,2,e,arguments[1]);return t[1]<<8|t[0]},getInt32:function(e){return o(f(this,4,e,arguments[1]))},getUint32:function(e){return o(f(this,4,e,arguments[1]))>>>0},getFloat32:function(e){return n(f(this,4,e,arguments[1]),23,4)},getFloat64:function(e){return n(f(this,8,e,arguments[1]),52,8)},setInt8:function(e,t){d(this,1,e,s,t)},setUint8:function(e,t){d(this,1,e,s,t)},setInt16:function(e,t){d(this,2,e,a,t,arguments[2])},setUint16:function(e,t){d(this,2,e,a,t,arguments[2])},setInt32:function(e,t){d(this,4,e,c,t,arguments[2])},setUint32:function(e,t){d(this,4,e,c,t,arguments[2])},setFloat32:function(e,t){d(this,4,e,u,t,arguments[2])},setFloat64:function(e,t){d(this,8,e,l,t,arguments[2])}});R(D,O),R(M,k),y(M[T],g.VIEW,!0),t[O]=D,t[k]=M},function(e){var t=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=t)},function(e){e.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},function(e,t,r){e.exports=!r(120)((function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}))},function(e,t,r){e.exports=!r(8)&&!r(2)((function(){return 7!=Object.defineProperty(r(60)("div"),"a",{get:function(){return 7}}).a}))},function(e,t,r){var i=r(1),n=r(7),o=r(30),s=r(61),a=r(9).f;e.exports=function(e){var t=n.Symbol||(n.Symbol=o?{}:i.Symbol||{});"_"==e.charAt(0)||e in t||a(t,e,{value:s.f(e)})}},function(e,t,r){var i=r(13),n=r(15),o=r(49)(!1),s=r(62)("IE_PROTO");e.exports=function(e,t){var r,a=n(e),c=0,l=[];for(r in a)r!=s&&i(a,r)&&l.push(r);for(;t.length>c;)i(a,r=t[c++])&&(~o(l,r)||l.push(r));return l}},function(e,t,r){var i=r(9),n=r(3),o=r(31);e.exports=r(8)?Object.defineProperties:function(e,t){n(e);for(var r,s=o(t),a=s.length,c=0;a>c;)i.f(e,r=s[c++],t[r]);return e}},function(e,t,r){var i=r(15),n=r(34).f,o={}.toString,s="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];e.exports.f=function(e){return s&&"[object Window]"==o.call(e)?function(e){try{return n(e)}catch(e){return s.slice()}}(e):n(i(e))}},function(e,t,r){"use strict";var i=r(8),n=r(31),o=r(50),s=r(45),a=r(10),c=r(44),l=Object.assign;e.exports=!l||r(2)((function(){var e={},t={},r=Symbol(),i="abcdefghijklmnopqrst";return e[r]=7,i.split("").forEach((function(e){t[e]=e})),7!=l({},e)[r]||Object.keys(l({},t)).join("")!=i}))?function(e){for(var t=a(e),r=arguments.length,l=1,u=o.f,h=s.f;r>l;)for(var f,d=c(arguments[l++]),p=u?n(d).concat(u(d)):n(d),_=p.length,v=0;_>v;)f=p[v++],(!i||h.call(d,f))&&(t[f]=d[f]);return t}:l},function(e){e.exports=Object.is||function(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}},function(e,t,r){"use strict";var i=r(18),n=r(4),o=r(96),s=[].slice,a={},c=function(e,t,r){if(!(t in a)){for(var i=[],n=0;n<t;n++)i[n]="a["+n+"]";a[t]=Function("F,a","return new F("+i.join(",")+")")}return a[t](e,r)};e.exports=Function.bind||function(e){var t=i(this),r=s.call(arguments,1),a=function(){var i=r.concat(s.call(arguments));return this instanceof a?c(t,i.length,i):o(t,i,e)};return n(t.prototype)&&(a.prototype=t.prototype),a}},function(e){e.exports=function(e,t,r){var i=void 0===r;switch(t.length){case 0:return i?e():e.call(r);case 1:return i?e(t[0]):e.call(r,t[0]);case 2:return i?e(t[0],t[1]):e.call(r,t[0],t[1]);case 3:return i?e(t[0],t[1],t[2]):e.call(r,t[0],t[1],t[2]);case 4:return i?e(t[0],t[1],t[2],t[3]):e.call(r,t[0],t[1],t[2],t[3])}return e.apply(r,t)}},function(e,t,r){var i=r(1).parseInt,n=r(39).trim,o=r(66),s=/^[-+]?0[xX]/;e.exports=8!==i(o+"08")||22!==i(o+"0x16")?function(e,t){var r=n(e+"",3);return i(r,t>>>0||(s.test(r)?16:10))}:i},function(e,t,r){var i=r(1).parseFloat,n=r(39).trim;e.exports=1/i(r(66)+"-0")==-1/0?i:function(e){var t=n(e+"",3),r=i(t);return 0===r&&"-"==t.charAt(0)?-0:r}},function(e,t,r){var i=r(23);e.exports=function(e,t){if("number"!=typeof e&&"Number"!=i(e))throw TypeError(t);return+e}},function(e,t,r){var i=r(4),n=Math.floor;e.exports=function(e){return!i(e)&&isFinite(e)&&n(e)===e}},function(e){e.exports=Math.log1p||function(e){return-1e-8<(e=+e)&&1e-8>e?e-e*e/2:Math.log(1+e)}},function(e,t,r){"use strict";var i=r(33),n=r(28),o=r(38),s={};r(14)(s,r(5)("iterator"),(function(){return this})),e.exports=function(e,t,r){e.prototype=i(s,{next:n(1,r)}),o(e,t+" Iterator")}},function(e,t,r){var i=r(3);e.exports=function(e,t,r,n){try{return n?t(i(r)[0],r[1]):t(r)}catch(r){var o=e.return;throw void 0!==o&&i(o.call(e)),r}}},function(e,t,r){var i=r(218);e.exports=function(e,t){return new(i(e))(t)}},function(e,t,r){var i=r(18),n=r(10),o=r(44),s=r(6);e.exports=function(e,t,r,a,c){i(t);var l=n(e),u=o(l),h=s(l.length),f=c?h-1:0,d=c?-1:1;if(2>r)for(;;){if(f in u){a=u[f],f+=d;break}if(f+=d,c?0>f:h<=f)throw TypeError("Reduce of empty array with no initial value")}for(;c?0<=f:h>f;f+=d)f in u&&(a=t(a,u[f],f,l));return a}},function(e,t,r){"use strict";var i=r(10),n=r(32),o=r(6);e.exports=[].copyWithin||function(e,t){var r=i(this),s=o(r.length),a=n(e,s),c=n(t,s),l=2<arguments.length?arguments[2]:void 0,u=Math.min((void 0===l?s:n(l,s))-c,s-a),h=1;for(c<a&&a<c+u&&(h=-1,c+=u-1,a+=u-1);0<u--;)c in r?r[a]=r[c]:delete r[a],a+=h,c+=h;return r}},function(e){e.exports=function(e,t){return{value:t,done:!!e}}},function(e,t,r){"use strict";var i=r(81);r(0)({target:"RegExp",proto:!0,forced:i!==/./.exec},{exec:i})},function(e,t,r){r(8)&&"g"!=/./g.flags&&r(9).f(RegExp.prototype,"flags",{configurable:!0,get:r(53)})},function(e,t,r){"use strict";var i,n,o,s,a=r(30),c=r(1),l=r(17),u=r(46),h=r(0),f=r(4),d=r(18),p=r(42),_=r(56),v=r(47),g=r(83).set,y=r(238)(),b=r(111),S=r(239),m=r(57),C=r(112),w="Promise",E=c.TypeError,x=c.process,L=x&&x.versions,A=L&&L.v8||"",R=c[w],O="process"==u(x),k=function(){},T=n=b.f,P=!!function(){try{var e=R.resolve(1),t=(e.constructor={})[r(5)("species")]=function(e){e(k,k)};return(O||"function"==typeof PromiseRejectionEvent)&&e.then(k)instanceof t&&0!==A.indexOf("6.6")&&-1===m.indexOf("Chrome/66")}catch(t){}}(),D=function(e){var t;return!(!f(e)||"function"!=typeof(t=e.then))&&t},M=function(e,t){if(!e._n){e._n=!0;var r=e._c;y((function(){for(var i=e._v,n=1==e._s,o=0,s=function(t){var r,o,s,a=n?t.ok:t.fail,c=t.resolve,l=t.reject,u=t.domain;try{a?(!n&&(2==e._h&&F(e),e._h=1),!0===a?r=i:(u&&u.enter(),r=a(i),u&&(u.exit(),s=!0)),r===t.promise?l(E("Promise-chain cycle")):(o=D(r))?o.call(r,c,l):c(r)):l(i)}catch(t){u&&!s&&u.exit(),l(t)}};r.length>o;)s(r[o++]);e._c=[],e._n=!1,t&&!e._h&&I(e)}))}},I=function(e){g.call(c,(function(){var t,r,i,n=e._v,o=H(e);if(o&&(t=S((function(){O?x.emit("unhandledRejection",n,e):(r=c.onunhandledrejection)?r({promise:e,reason:n}):(i=c.console)&&i.error&&i.error("Unhandled promise rejection",n)})),e._h=O||H(e)?2:1),e._a=void 0,o&&t.e)throw t.v}))},H=function(e){return 1!==e._h&&0===(e._a||e._c).length},F=function(e){g.call(c,(function(){var t;O?x.emit("rejectionHandled",e):(t=c.onrejectionhandled)&&t({promise:e,reason:e._v})}))},B=function(e){var t=this;t._d||(t._d=!0,(t=t._w||t)._v=e,t._s=2,!t._a&&(t._a=t._c.slice()),M(t,!0))},j=function(e){var t,r=this;if(!r._d){r._d=!0,r=r._w||r;try{if(r===e)throw E("Promise can't be resolved itself");(t=D(e))?y((function(){var i={_w:r,_d:!1};try{t.call(e,l(j,i,1),l(B,i,1))}catch(e){B.call(i,e)}})):(r._v=e,r._s=1,M(r,!1))}catch(t){B.call({_w:r,_d:!1},t)}}};P||(R=function(e){p(this,R,w,"_h"),d(e),i.call(this);try{e(l(j,this,1),l(B,this,1))}catch(e){B.call(this,e)}},(i=function(){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1}).prototype=r(43)(R.prototype,{then:function(e,t){var r=T(v(this,R));return r.ok="function"!=typeof e||e,r.fail="function"==typeof t&&t,r.domain=O?x.domain:void 0,this._c.push(r),this._a&&this._a.push(r),this._s&&M(this,!1),r.promise},catch:function(e){return this.then(void 0,e)}}),o=function(){var e=new i;this.promise=e,this.resolve=l(j,e,1),this.reject=l(B,e,1)},b.f=T=function(e){return e===R||e===s?new o(e):n(e)}),h(h.G+h.W+h.F*!P,{Promise:R}),r(38)(R,w),r(41)(w),s=r(7)[w],h(h.S+h.F*!P,w,{reject:function(e){var t=T(this);return(0,t.reject)(e),t.promise}}),h(h.S+h.F*(a||!P),w,{resolve:function(e){return C(a&&this===s?R:this,e)}}),h(h.S+h.F*!(P&&r(52)((function(e){R.all(e).catch(k)}))),w,{all:function(e){var t=this,r=T(t),i=r.resolve,n=r.reject,o=S((function(){var r=[],o=0,s=1;_(e,!1,(function(e){var a=o++,c=!1;r.push(void 0),s++,t.resolve(e).then((function(e){c||(c=!0,r[a]=e,--s||i(r))}),n)})),--s||i(r)}));return o.e&&n(o.v),r.promise},race:function(e){var t=this,r=T(t),i=r.reject,n=S((function(){_(e,!1,(function(e){t.resolve(e).then(r.resolve,i)}))}));return n.e&&i(n.v),r.promise}})},function(e,t,r){"use strict";function i(e){var t,r;this.promise=new e((function(e,i){if(void 0!==t||void 0!==r)throw TypeError("Bad Promise constructor");t=e,r=i})),this.resolve=n(t),this.reject=n(r)}var n=r(18);e.exports.f=function(e){return new i(e)}},function(e,t,r){var i=r(3),n=r(4),o=r(111);e.exports=function(e,t){if(i(e),n(t)&&t.constructor===e)return t;var r=o.f(e);return(0,r.resolve)(t),r.promise}},function(e,t,r){"use strict";var i=r(9).f,n=r(33),o=r(43),s=r(17),a=r(42),c=r(56),l=r(72),u=r(107),h=r(41),f=r(8),d=r(27).fastKey,p=r(37),_=f?"_s":"size",v=function(e,t){var r,i=d(t);if("F"!==i)return e._i[i];for(r=e._f;r;r=r.n)if(r.k==t)return r};e.exports={getConstructor:function(e,t,r,l){var u=e((function(e,i){a(e,u,t,"_i"),e._t=t,e._i=n(null),e._f=void 0,e._l=void 0,e[_]=0,null!=i&&c(i,r,e[l],e)}));return o(u.prototype,{clear:function(){for(var e=p(this,t),r=e._i,i=e._f;i;i=i.n)i.r=!0,i.p&&(i.p=i.p.n=void 0),delete r[i.i];e._f=e._l=void 0,e[_]=0},delete:function(e){var r=p(this,t),i=v(r,e);if(i){var n=i.n,o=i.p;delete r._i[i.i],i.r=!0,o&&(o.n=n),n&&(n.p=o),r._f==i&&(r._f=n),r._l==i&&(r._l=o),r[_]--}return!!i},forEach:function(e){p(this,t);for(var r,i=s(e,1<arguments.length?arguments[1]:void 0,3);r=r?r.n:this._f;)for(i(r.v,r.k,this);r&&r.r;)r=r.p},has:function(e){return!!v(p(this,t),e)}}),f&&i(u.prototype,"size",{get:function(){return p(this,t)[_]}}),u},def:function(e,t,r){var i,n,o=v(e,t);return o?o.v=r:(e._l=o={i:n=d(t,!0),k:t,v:r,p:i=e._l,n:void 0,r:!1},!e._f&&(e._f=o),i&&(i.n=o),e[_]++,"F"!==n&&(e._i[n]=o)),e},getEntry:v,setStrong:function(e,t,r){l(e,t,(function(e,r){this._t=p(e,t),this._k=r,this._l=void 0}),(function(){for(var e=this,t=e._k,r=e._l;r&&r.r;)r=r.p;return e._t&&(e._l=r=r?r.n:e._t._f)?u(0,"keys"==t?r.k:"values"==t?r.v:[r.k,r.v]):(e._t=void 0,u(1))}),r?"entries":"values",!r,!0),h(t)}}},function(e,t,r){"use strict";var i=r(43),n=r(27).getWeak,o=r(3),s=r(4),a=r(42),c=r(56),l=r(22),u=r(13),h=r(37),f=l(5),d=l(6),p=0,_=function(e){return e._l||(e._l=new v)},v=function(){this.a=[]},g=function(e,t){return f(e.a,(function(e){return e[0]===t}))};v.prototype={get:function(e){var t=g(this,e);if(t)return t[1]},has:function(e){return!!g(this,e)},set:function(e,t){var r=g(this,e);r?r[1]=t:this.a.push([e,t])},delete:function(e){var t=d(this.a,(function(t){return t[0]===e}));return~t&&this.a.splice(t,1),!!~t}},e.exports={getConstructor:function(e,t,r,o){var l=e((function(e,i){a(e,l,t,"_i"),e._t=t,e._i=p++,e._l=void 0,null!=i&&c(i,r,e[o],e)}));return i(l.prototype,{delete:function(e){if(!s(e))return!1;var r=n(e);return!0===r?_(h(this,t)).delete(e):r&&u(r,this._i)&&delete r[this._i]},has:function(e){if(!s(e))return!1;var r=n(e);return!0===r?_(h(this,t)).has(e):r&&u(r,this._i)}}),l},def:function(e,t,r){var i=n(o(t),!0);return!0===i?_(e).set(t,r):i[e._i]=r,e},ufstore:_}},function(e,t,r){var i=r(19),n=r(6);e.exports=function(e){if(void 0===e)return 0;var t=i(e),r=n(t);if(t!==r)throw RangeError("Wrong length!");return r}},function(e,t,r){var i=r(34),n=r(50),o=r(3),s=r(1).Reflect;e.exports=s&&s.ownKeys||function(e){var t=i.f(o(e)),r=n.f;return r?t.concat(r(e)):t}},function(e,t,r){var i=r(6),n=r(68),o=r(24);e.exports=function(e,t,r,s){var a=o(e)+"",c=a.length,l=void 0===r?" ":r+"",u=i(t);if(u<=c||""==l)return a;var h=u-c,f=n.call(l,Math.ceil(h/l.length));return f.length>h&&(f=f.slice(0,h)),s?f+a:a+f}},function(e,t,r){var i=r(8),n=r(31),o=r(15),s=r(45).f;e.exports=function(e){return function(t){for(var r,a=o(t),c=n(a),l=c.length,u=0,h=[];l>u;)r=c[u++],(!i||s.call(a,r))&&h.push(e?[r,a[r]]:a[r]);return h}}},function(e){var t=e.exports={version:"2.6.11"};"number"==typeof __e&&(__e=t)},function(e){e.exports=function(e){try{return!!e()}catch(e){return!0}}},function(e){var t=String.fromCharCode,r=Math.pow,i=Math.abs,n=Math.max,o=Math.round,s=Math.floor,a=Math.ceil,c=Math.min;window,e.exports=function(e){function t(i){if(r[i])return r[i].exports;var n=r[i]={i:i,l:!1,exports:{}};return e[i].call(n.exports,n,n.exports,t),n.l=!0,n.exports}var r={};return t.m=e,t.c=r,t.d=function(e,r,i){t.o(e,r)||Object.defineProperty(e,r,{enumerable:!0,get:i})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,r){if(1&r&&(e=t(e)),8&r)return e;if(4&r&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(t.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&r&&"string"!=typeof e)for(var n in e)t.d(i,n,function(t){return e[t]}.bind(null,n));return i},t.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(r,"a",r),r},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=34)}([function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.forwardEvent=t.EventEmitter=void 0;var r=function(){function e(){this._listeners=[],this._disposed=!1}return Object.defineProperty(e.prototype,"event",{get:function(){var e=this;return this._event||(this._event=function(t){return e._listeners.push(t),{dispose:function(){if(!e._disposed)for(var r=0;r<e._listeners.length;r++)if(e._listeners[r]===t)return void e._listeners.splice(r,1)}}}),this._event},enumerable:!1,configurable:!0}),e.prototype.fire=function(e,t){for(var r=[],i=0;i<this._listeners.length;i++)r.push(this._listeners[i]);for(i=0;i<r.length;i++)r[i].call(void 0,e,t)},e.prototype.dispose=function(){this._listeners&&(this._listeners.length=0),this._disposed=!0},e}();t.EventEmitter=r,t.forwardEvent=function(e,t){return e((function(e){return t.fire(e)}))}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IUnicodeService=t.IOptionsService=t.ILogService=t.IInstantiationService=t.IDirtyRowService=t.ICharsetService=t.ICoreService=t.ICoreMouseService=t.IBufferService=void 0;var i=r(14);t.IBufferService=i.createDecorator("BufferService"),t.ICoreMouseService=i.createDecorator("CoreMouseService"),t.ICoreService=i.createDecorator("CoreService"),t.ICharsetService=i.createDecorator("CharsetService"),t.IDirtyRowService=i.createDecorator("DirtyRowService"),t.IInstantiationService=i.createDecorator("InstantiationService"),t.ILogService=i.createDecorator("LogService"),t.IOptionsService=i.createDecorator("OptionsService"),t.IUnicodeService=i.createDecorator("UnicodeService")},function(e,t){"use strict";function r(e){for(var t=0,r=e;t<r.length;t++)r[t].dispose();e.length=0}Object.defineProperty(t,"__esModule",{value:!0}),t.getDisposeArrayDisposable=t.disposeArray=t.Disposable=void 0;var i=function(){function e(){this._disposables=[],this._isDisposed=!1}return e.prototype.dispose=function(){this._isDisposed=!0;for(var e=0,t=this._disposables;e<t.length;e++)t[e].dispose();this._disposables.length=0},e.prototype.register=function(e){return this._disposables.push(e),e},e.prototype.unregister=function(e){var t=this._disposables.indexOf(e);-1!==t&&this._disposables.splice(t,1)},e}();t.Disposable=i,t.disposeArray=r,t.getDisposeArrayDisposable=function(e){return{dispose:function(){return r(e)}}}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WHITESPACE_CELL_CODE=t.WHITESPACE_CELL_WIDTH=t.WHITESPACE_CELL_CHAR=t.NULL_CELL_CODE=t.NULL_CELL_WIDTH=t.NULL_CELL_CHAR=t.CHAR_DATA_CODE_INDEX=t.CHAR_DATA_WIDTH_INDEX=t.CHAR_DATA_CHAR_INDEX=t.CHAR_DATA_ATTR_INDEX=t.DEFAULT_ATTR=t.DEFAULT_COLOR=void 0,t.DEFAULT_COLOR=256,t.DEFAULT_ATTR=256|t.DEFAULT_COLOR<<9,t.CHAR_DATA_ATTR_INDEX=0,t.CHAR_DATA_CHAR_INDEX=1,t.CHAR_DATA_WIDTH_INDEX=2,t.CHAR_DATA_CODE_INDEX=3,t.NULL_CELL_CHAR="",t.NULL_CELL_WIDTH=1,t.NULL_CELL_CODE=0,t.WHITESPACE_CELL_CHAR=" ",t.WHITESPACE_CELL_WIDTH=1,t.WHITESPACE_CELL_CODE=32},function(e,t,r){"use strict";var i,n=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0}),t.CellData=void 0;var o=r(8),s=r(3),a=r(6),c=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.content=0,t.fg=0,t.bg=0,t.extended=new a.ExtendedAttrs,t.combinedData="",t}return n(t,e),t.fromCharData=function(e){var r=new t;return r.setFromCharData(e),r},t.prototype.isCombined=function(){return 2097152&this.content},t.prototype.getWidth=function(){return this.content>>22},t.prototype.getChars=function(){return 2097152&this.content?this.combinedData:2097151&this.content?o.stringFromCodePoint(2097151&this.content):""},t.prototype.getCode=function(){return this.isCombined()?this.combinedData.charCodeAt(this.combinedData.length-1):2097151&this.content},t.prototype.setFromCharData=function(e){this.fg=e[s.CHAR_DATA_ATTR_INDEX],this.bg=0;var t=!1;if(2<e[s.CHAR_DATA_CHAR_INDEX].length)t=!0;else if(2===e[s.CHAR_DATA_CHAR_INDEX].length){var r=e[s.CHAR_DATA_CHAR_INDEX].charCodeAt(0);if(55296<=r&&56319>=r){var i=e[s.CHAR_DATA_CHAR_INDEX].charCodeAt(1);56320<=i&&57343>=i?this.content=1024*(r-55296)+i-56320+65536|e[s.CHAR_DATA_WIDTH_INDEX]<<22:t=!0}else t=!0}else this.content=e[s.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|e[s.CHAR_DATA_WIDTH_INDEX]<<22;t&&(this.combinedData=e[s.CHAR_DATA_CHAR_INDEX],this.content=2097152|e[s.CHAR_DATA_WIDTH_INDEX]<<22)},t.prototype.getAsCharData=function(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]},t}(a.AttributeData);t.CellData=c},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ISoundService=t.ISelectionService=t.IRenderService=t.IMouseService=t.ICoreBrowserService=t.ICharSizeService=void 0;var i=r(14);t.ICharSizeService=i.createDecorator("CharSizeService"),t.ICoreBrowserService=i.createDecorator("CoreBrowserService"),t.IMouseService=i.createDecorator("MouseService"),t.IRenderService=i.createDecorator("RenderService"),t.ISelectionService=i.createDecorator("SelectionService"),t.ISoundService=i.createDecorator("SoundService")},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ExtendedAttrs=t.AttributeData=void 0;var r=function(){function e(){this.fg=0,this.bg=0,this.extended=new i}return e.toColorRGB=function(e){return[255&e>>>16,255&e>>>8,255&e]},e.fromColorRGB=function(e){return(255&e[0])<<16|(255&e[1])<<8|255&e[2]},e.prototype.clone=function(){var t=new e;return t.fg=this.fg,t.bg=this.bg,t.extended=this.extended.clone(),t},e.prototype.isInverse=function(){return 67108864&this.fg},e.prototype.isBold=function(){return 134217728&this.fg},e.prototype.isUnderline=function(){return 268435456&this.fg},e.prototype.isBlink=function(){return 536870912&this.fg},e.prototype.isInvisible=function(){return 1073741824&this.fg},e.prototype.isItalic=function(){return 67108864&this.bg},e.prototype.isDim=function(){return 134217728&this.bg},e.prototype.getFgColorMode=function(){return 50331648&this.fg},e.prototype.getBgColorMode=function(){return 50331648&this.bg},e.prototype.isFgRGB=function(){return 50331648==(50331648&this.fg)},e.prototype.isBgRGB=function(){return 50331648==(50331648&this.bg)},e.prototype.isFgPalette=function(){return 16777216==(50331648&this.fg)||33554432==(50331648&this.fg)},e.prototype.isBgPalette=function(){return 16777216==(50331648&this.bg)||33554432==(50331648&this.bg)},e.prototype.isFgDefault=function(){return 0==(50331648&this.fg)},e.prototype.isBgDefault=function(){return 0==(50331648&this.bg)},e.prototype.isAttributeDefault=function(){return 0===this.fg&&0===this.bg},e.prototype.getFgColor=function(){switch(50331648&this.fg){case 16777216:case 33554432:return 255&this.fg;case 50331648:return 16777215&this.fg;default:return-1}},e.prototype.getBgColor=function(){switch(50331648&this.bg){case 16777216:case 33554432:return 255&this.bg;case 50331648:return 16777215&this.bg;default:return-1}},e.prototype.hasExtendedAttrs=function(){return 268435456&this.bg},e.prototype.updateExtended=function(){this.extended.isEmpty()?this.bg&=-268435457:this.bg|=268435456},e.prototype.getUnderlineColor=function(){if(268435456&this.bg&&~this.extended.underlineColor)switch(50331648&this.extended.underlineColor){case 16777216:case 33554432:return 255&this.extended.underlineColor;case 50331648:return 16777215&this.extended.underlineColor;default:return this.getFgColor()}return this.getFgColor()},e.prototype.getUnderlineColorMode=function(){return 268435456&this.bg&&~this.extended.underlineColor?50331648&this.extended.underlineColor:this.getFgColorMode()},e.prototype.isUnderlineColorRGB=function(){return 268435456&this.bg&&~this.extended.underlineColor?50331648==(50331648&this.extended.underlineColor):this.isFgRGB()},e.prototype.isUnderlineColorPalette=function(){return 268435456&this.bg&&~this.extended.underlineColor?16777216==(50331648&this.extended.underlineColor)||33554432==(50331648&this.extended.underlineColor):this.isFgPalette()},e.prototype.isUnderlineColorDefault=function(){return 268435456&this.bg&&~this.extended.underlineColor?0==(50331648&this.extended.underlineColor):this.isFgDefault()},e.prototype.getUnderlineStyle=function(){return 268435456&this.fg?268435456&this.bg?this.extended.underlineStyle:1:0},e}();t.AttributeData=r;var i=function(){function e(e,t){void 0===e&&(e=0),void 0===t&&(t=-1),this.underlineStyle=e,this.underlineColor=t}return e.prototype.clone=function(){return new e(this.underlineStyle,this.underlineColor)},e.prototype.isEmpty=function(){return 0===this.underlineStyle},e}();t.ExtendedAttrs=i},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.addDisposableDomListener=void 0,t.addDisposableDomListener=function(e,t,r,i){e.addEventListener(t,r,i);var n=!1;return{dispose:function(){n||(n=!0,e.removeEventListener(t,r,i))}}}},function(e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.Utf8ToUtf32=r.StringToUtf32=r.utf32ToString=r.stringFromCodePoint=void 0,r.stringFromCodePoint=function(e){return 65535<e?t(55296+((e-=65536)>>10))+t(e%1024+56320):t(e)},r.utf32ToString=function(e,r,i){void 0===r&&(r=0),void 0===i&&(i=e.length);for(var n,o="",s=r;s<i;++s)65535<(n=e[s])?o+=t(55296+((n-=65536)>>10))+t(n%1024+56320):o+=t(n);return o};var i=function(){function e(){this._interim=0}return e.prototype.clear=function(){this._interim=0},e.prototype.decode=function(e,t){var r=e.length;if(!r)return 0;var i=0,n=0;this._interim&&(56320<=(a=e.charCodeAt(n++))&&57343>=a?t[i++]=1024*(this._interim-55296)+a-56320+65536:(t[i++]=this._interim,t[i++]=a),this._interim=0);for(var o,s=n;s<r;++s)if(55296<=(o=e.charCodeAt(s))&&56319>=o){if(++s>=r)return this._interim=o,i;var a;56320<=(a=e.charCodeAt(s))&&57343>=a?t[i++]=1024*(o-55296)+a-56320+65536:(t[i++]=o,t[i++]=a)}else t[i++]=o;return i},e}();r.StringToUtf32=i;var n=function(){function e(){this.interim=new Uint8Array(3)}return e.prototype.clear=function(){this.interim.fill(0)},e.prototype.decode=function(e,t){var r=e.length;if(!r)return 0;var i,n,o,s,a=0,c=0,l=0;if(this.interim[0]){var u=!1,h=this.interim[0];h&=192==(224&h)?31:224==(240&h)?15:7;for(var f=0,d=void 0;(d=63&this.interim[++f])&&4>f;)h<<=6,h|=d;for(var p=192==(224&this.interim[0])?2:224==(240&this.interim[0])?3:4,_=p-f;l<_;){if(l>=r)return 0;if(128!=(192&(d=e[l++]))){l--,u=!0;break}this.interim[f++]=d,h<<=6,h|=63&d}u||(2==p?128>h?l--:t[a++]=h:3==p?2048>h||55296<=h&&57343>=h||(t[a++]=h):65536>h||1114111<h||(t[a++]=h)),this.interim.fill(0)}for(var v=l;v<r;){for(;!(!(v<r-4)||128&(i=e[v])||128&(n=e[v+1])||128&(o=e[v+2])||128&(s=e[v+3]));)t[a++]=i,t[a++]=n,t[a++]=o,t[a++]=s,v+=4;if(128>(i=e[v++]))t[a++]=i;else if(192==(224&i)){if(v>=r)return this.interim[0]=i,a;if(128!=(192&(n=e[v++]))){v--;continue}if(128>(c=(31&i)<<6|63&n)){v--;continue}t[a++]=c}else if(224==(240&i)){if(v>=r)return this.interim[0]=i,a;if(128!=(192&(n=e[v++]))){v--;continue}if(v>=r)return this.interim[0]=i,this.interim[1]=n,a;if(128!=(192&(o=e[v++]))){v--;continue}if(2048>(c=(15&i)<<12|(63&n)<<6|63&o)||55296<=c&&57343>=c)continue;t[a++]=c}else if(240==(248&i)){if(v>=r)return this.interim[0]=i,a;if(128!=(192&(n=e[v++]))){v--;continue}if(v>=r)return this.interim[0]=i,this.interim[1]=n,a;if(128!=(192&(o=e[v++]))){v--;continue}if(v>=r)return this.interim[0]=i,this.interim[1]=n,this.interim[2]=o,a;if(128!=(192&(s=e[v++]))){v--;continue}if(65536>(c=(7&i)<<18|(63&n)<<12|(63&o)<<6|63&s)||1114111<c)continue;t[a++]=c}}return a},e}();r.Utf8ToUtf32=n},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CHAR_ATLAS_CELL_SPACING=t.DIM_OPACITY=t.INVERTED_DEFAULT_COLOR=void 0,t.INVERTED_DEFAULT_COLOR=257,t.DIM_OPACITY=.5,t.CHAR_ATLAS_CELL_SPACING=1},function(e,t){"use strict";function i(e){var t=e.toString(16);return 2>t.length?"0"+t:t}function s(e,t){return e<t?(t+.05)/(e+.05):(e+.05)/(t+.05)}var l,u,h,f;Object.defineProperty(t,"__esModule",{value:!0}),t.contrastRatio=t.toPaddedHex=t.rgba=t.rgb=t.css=t.color=t.channels=void 0,function(e){e.toCss=function(e,t,r,n){return void 0===n?"#"+i(e)+i(t)+i(r):"#"+i(e)+i(t)+i(r)+i(n)},e.toRgba=function(e,t,r,i){return void 0===i&&(i=255),(e<<24|t<<16|r<<8|i)>>>0}}(l=t.channels||(t.channels={})),(u=t.color||(t.color={})).blend=function(e,t){var r=(255&t.rgba)/255;if(1==r)return{css:t.css,rgba:t.rgba};var i=255&t.rgba>>24,n=255&t.rgba>>16,s=255&t.rgba>>8,a=255&e.rgba>>24,c=255&e.rgba>>16,u=255&e.rgba>>8,h=a+o((i-a)*r),f=c+o((n-c)*r),d=u+o((s-u)*r);return{css:l.toCss(h,f,d),rgba:l.toRgba(h,f,d)}},u.isOpaque=function(e){return 255==(255&e.rgba)},u.ensureContrastRatio=function(e,t,r){var i=f.ensureContrastRatio(e.rgba,t.rgba,r);if(i)return f.toColor(255&i>>24,255&i>>16,255&i>>8)},u.opaque=function(e){var t=(255|e.rgba)>>>0,r=f.toChannels(t),i=r[0],n=r[1],o=r[2];return{css:l.toCss(i,n,o),rgba:t}},u.opacity=function(e,t){var r=o(255*t),i=f.toChannels(e.rgba),n=i[0],s=i[1],a=i[2];return{css:l.toCss(n,s,a,r),rgba:l.toRgba(n,s,a,r)}},(t.css||(t.css={})).toColor=function(e){switch(e.length){case 7:return{css:e,rgba:(255|parseInt(e.slice(1),16)<<8)>>>0};case 9:return{css:e,rgba:parseInt(e.slice(1),16)>>>0}}throw new Error("css.toColor: Unsupported css format")},function(e){function t(e,t,i){var n=e/255,o=t/255,s=i/255;return.2126*(.03928>=n?n/12.92:r((n+.055)/1.055,2.4))+.7152*(.03928>=o?o/12.92:r((o+.055)/1.055,2.4))+.0722*(.03928>=s?s/12.92:r((s+.055)/1.055,2.4))}e.relativeLuminance=function(e){return t(255&e>>16,255&e>>8,255&e)},e.relativeLuminance2=t}(h=t.rgb||(t.rgb={})),function(e){function t(e,t,r){for(var i=255&e>>24,o=255&e>>16,c=255&e>>8,l=255&t>>24,u=255&t>>16,f=255&t>>8,d=s(h.relativeLuminance2(l,f,u),h.relativeLuminance2(i,o,c));d<r&&(0<l||0<u||0<f);)l-=n(0,a(.1*l)),u-=n(0,a(.1*u)),f-=n(0,a(.1*f)),d=s(h.relativeLuminance2(l,f,u),h.relativeLuminance2(i,o,c));return(l<<24|u<<16|f<<8|255)>>>0}function r(e,t,r){for(var i=255&e>>24,n=255&e>>16,o=255&e>>8,l=255&t>>24,u=255&t>>16,f=255&t>>8,d=s(h.relativeLuminance2(l,f,u),h.relativeLuminance2(i,n,o));d<r&&(255>l||255>u||255>f);)l=c(255,l+a(.1*(255-l))),u=c(255,u+a(.1*(255-u))),f=c(255,f+a(.1*(255-f))),d=s(h.relativeLuminance2(l,f,u),h.relativeLuminance2(i,n,o));return(l<<24|u<<16|f<<8|255)>>>0}e.ensureContrastRatio=function(e,i,n){var o=h.relativeLuminance(e>>8),a=h.relativeLuminance(i>>8);if(s(o,a)<n)return a<o?t(e,i,n):r(e,i,n)},e.reduceLuminance=t,e.increaseLuminance=r,e.toChannels=function(e){return[255&e>>24,255&e>>16,255&e>>8,255&e]},e.toColor=function(e,t,r){return{css:l.toCss(e,t,r),rgba:l.toRgba(e,t,r)}}}(f=t.rgba||(t.rgba={})),t.toPaddedHex=i,t.contrastRatio=s},function(e,t){"use strict";function r(e,t){return 0<=e.indexOf(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.isLinux=t.isWindows=t.isIphone=t.isIpad=t.isMac=t.isSafari=t.isFirefox=void 0;var i="undefined"==typeof navigator,n=i?"node":navigator.userAgent,o=i?"node":navigator.platform;t.isFirefox=!!~n.indexOf("Firefox"),t.isSafari=/^((?!chrome|android).)*safari/i.test(n),t.isMac=r(["Macintosh","MacIntel","MacPPC","Mac68K"],o),t.isIpad="iPad"===o,t.isIphone="iPhone"===o,t.isWindows=r(["Windows","Win16","Win32","WinCE"],o),t.isLinux=0<=o.indexOf("Linux")},function(e,t){"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.C1=t.C0=void 0,(r=t.C0||(t.C0={})).NUL="\0",r.SOH="",r.STX="",r.ETX="",r.EOT="",r.ENQ="",r.ACK="",r.BEL="",r.BS="\b",r.HT="\t",r.LF="\n",r.VT="\v",r.FF="\f",r.CR="\r",r.SO="",r.SI="",r.DLE="",r.DC1="",r.DC2="",r.DC3="",r.DC4="",r.NAK="",r.SYN="",r.ETB="",r.CAN="",r.EM="",r.SUB="",r.ESC="",r.FS="",r.GS="",r.RS="",r.US="",r.SP=" ",r.DEL="",function(e){e.PAD="",e.HOP="",e.BPH="",e.NBH="",e.IND="",e.NEL="",e.SSA="",e.ESA="",e.HTS="",e.HTJ="",e.VTS="",e.PLD="",e.PLU="",e.RI="",e.SS2="",e.SS3="",e.DCS="",e.PU1="",e.PU2="",e.STS="",e.CCH="",e.MW="",e.SPA="",e.EPA="",e.SOS="",e.SGCI="",e.SCI="",e.CSI="",e.ST="",e.OSC="",e.PM="",e.APC=""}(t.C1||(t.C1={}))},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BaseRenderLayer=void 0;var i=r(3),n=r(9),o=r(25),s=r(6),a=r(28),c=r(10),l=r(17),u=function(){function e(e,t,r,i,n,o,s,a){this._container=e,this._alpha=i,this._colors=n,this._rendererId=o,this._bufferService=s,this._optionsService=a,this._scaledCharWidth=0,this._scaledCharHeight=0,this._scaledCellWidth=0,this._scaledCellHeight=0,this._scaledCharLeft=0,this._scaledCharTop=0,this._currentGlyphIdentifier={chars:"",code:0,bg:0,fg:0,bold:!1,dim:!1,italic:!1},this._canvas=document.createElement("canvas"),this._canvas.classList.add("xterm-"+t+"-layer"),this._canvas.style.zIndex=r.toString(),this._initCanvas(),this._container.appendChild(this._canvas)}return e.prototype.dispose=function(){var e;l.removeElementFromParent(this._canvas),null===(e=this._charAtlas)||void 0===e||e.dispose()},e.prototype._initCanvas=function(){this._ctx=a.throwIfFalsy(this._canvas.getContext("2d",{alpha:this._alpha})),this._alpha||this._clearAll()},e.prototype.onOptionsChanged=function(){},e.prototype.onBlur=function(){},e.prototype.onFocus=function(){},e.prototype.onCursorMove=function(){},e.prototype.onGridChanged=function(){},e.prototype.onSelectionChanged=function(e,t,r){void 0===r&&(r=!1)},e.prototype.setColors=function(e){this._refreshCharAtlas(e)},e.prototype._setTransparency=function(e){if(e!==this._alpha){var t=this._canvas;this._alpha=e,this._canvas=this._canvas.cloneNode(),this._initCanvas(),this._container.replaceChild(this._canvas,t),this._refreshCharAtlas(this._colors),this.onGridChanged(0,this._bufferService.rows-1)}},e.prototype._refreshCharAtlas=function(e){0>=this._scaledCharWidth&&0>=this._scaledCharHeight||(this._charAtlas=o.acquireCharAtlas(this._optionsService.options,this._rendererId,e,this._scaledCharWidth,this._scaledCharHeight),this._charAtlas.warmUp())},e.prototype.resize=function(e){this._scaledCellWidth=e.scaledCellWidth,this._scaledCellHeight=e.scaledCellHeight,this._scaledCharWidth=e.scaledCharWidth,this._scaledCharHeight=e.scaledCharHeight,this._scaledCharLeft=e.scaledCharLeft,this._scaledCharTop=e.scaledCharTop,this._canvas.width=e.scaledCanvasWidth,this._canvas.height=e.scaledCanvasHeight,this._canvas.style.width=e.canvasWidth+"px",this._canvas.style.height=e.canvasHeight+"px",this._alpha||this._clearAll(),this._refreshCharAtlas(this._colors)},e.prototype._fillCells=function(e,t,r,i){this._ctx.fillRect(e*this._scaledCellWidth,t*this._scaledCellHeight,r*this._scaledCellWidth,i*this._scaledCellHeight)},e.prototype._fillBottomLineAtCells=function(e,t,r){void 0===r&&(r=1),this._ctx.fillRect(e*this._scaledCellWidth,(t+1)*this._scaledCellHeight-window.devicePixelRatio-1,r*this._scaledCellWidth,window.devicePixelRatio)},e.prototype._fillLeftLineAtCell=function(e,t,r){this._ctx.fillRect(e*this._scaledCellWidth,t*this._scaledCellHeight,window.devicePixelRatio*r,this._scaledCellHeight)},e.prototype._strokeRectAtCell=function(e,t,r,i){this._ctx.lineWidth=window.devicePixelRatio,this._ctx.strokeRect(e*this._scaledCellWidth+window.devicePixelRatio/2,t*this._scaledCellHeight+window.devicePixelRatio/2,r*this._scaledCellWidth-window.devicePixelRatio,i*this._scaledCellHeight-window.devicePixelRatio)},e.prototype._clearAll=function(){this._alpha?this._ctx.clearRect(0,0,this._canvas.width,this._canvas.height):(this._ctx.fillStyle=this._colors.background.css,this._ctx.fillRect(0,0,this._canvas.width,this._canvas.height))},e.prototype._clearCells=function(e,t,r,i){this._alpha?this._ctx.clearRect(e*this._scaledCellWidth,t*this._scaledCellHeight,r*this._scaledCellWidth,i*this._scaledCellHeight):(this._ctx.fillStyle=this._colors.background.css,this._ctx.fillRect(e*this._scaledCellWidth,t*this._scaledCellHeight,r*this._scaledCellWidth,i*this._scaledCellHeight))},e.prototype._fillCharTrueColor=function(e,t,r){this._ctx.font=this._getFont(!1,!1),this._ctx.textBaseline="middle",this._clipRow(r),this._ctx.fillText(e.getChars(),t*this._scaledCellWidth+this._scaledCharLeft,r*this._scaledCellHeight+this._scaledCharTop+this._scaledCharHeight/2)},e.prototype._drawChars=function(e,t,r){var o,s,a=this._getContrastColor(e);a||e.isFgRGB()||e.isBgRGB()?this._drawUncachedChars(e,t,r,a):(e.isInverse()?(o=e.isBgDefault()?n.INVERTED_DEFAULT_COLOR:e.getBgColor(),s=e.isFgDefault()?n.INVERTED_DEFAULT_COLOR:e.getFgColor()):(s=e.isBgDefault()?i.DEFAULT_COLOR:e.getBgColor(),o=e.isFgDefault()?i.DEFAULT_COLOR:e.getFgColor()),o+=this._optionsService.options.drawBoldTextInBrightColors&&e.isBold()&&8>o?8:0,this._currentGlyphIdentifier.chars=e.getChars()||i.WHITESPACE_CELL_CHAR,this._currentGlyphIdentifier.code=e.getCode()||i.WHITESPACE_CELL_CODE,this._currentGlyphIdentifier.bg=s,this._currentGlyphIdentifier.fg=o,this._currentGlyphIdentifier.bold=!!e.isBold(),this._currentGlyphIdentifier.dim=!!e.isDim(),this._currentGlyphIdentifier.italic=!!e.isItalic(),this._charAtlas&&this._charAtlas.draw(this._ctx,this._currentGlyphIdentifier,t*this._scaledCellWidth+this._scaledCharLeft,r*this._scaledCellHeight+this._scaledCharTop)||this._drawUncachedChars(e,t,r))},e.prototype._drawUncachedChars=function(e,t,r,i){if(this._ctx.save(),this._ctx.font=this._getFont(!!e.isBold(),!!e.isItalic()),this._ctx.textBaseline="middle",e.isInverse())if(i)this._ctx.fillStyle=i.css;else if(e.isBgDefault())this._ctx.fillStyle=c.color.opaque(this._colors.background).css;else if(e.isBgRGB())this._ctx.fillStyle="rgb("+s.AttributeData.toColorRGB(e.getBgColor()).join(",")+")";else{var o=e.getBgColor();this._optionsService.options.drawBoldTextInBrightColors&&e.isBold()&&8>o&&(o+=8),this._ctx.fillStyle=this._colors.ansi[o].css}else if(i)this._ctx.fillStyle=i.css;else if(e.isFgDefault())this._ctx.fillStyle=this._colors.foreground.css;else if(e.isFgRGB())this._ctx.fillStyle="rgb("+s.AttributeData.toColorRGB(e.getFgColor()).join(",")+")";else{var a=e.getFgColor();this._optionsService.options.drawBoldTextInBrightColors&&e.isBold()&&8>a&&(a+=8),this._ctx.fillStyle=this._colors.ansi[a].css}this._clipRow(r),e.isDim()&&(this._ctx.globalAlpha=n.DIM_OPACITY),this._ctx.fillText(e.getChars(),t*this._scaledCellWidth+this._scaledCharLeft,r*this._scaledCellHeight+this._scaledCharTop+this._scaledCharHeight/2),this._ctx.restore()},e.prototype._clipRow=function(e){this._ctx.beginPath(),this._ctx.rect(0,e*this._scaledCellHeight,this._bufferService.cols*this._scaledCellWidth,this._scaledCellHeight),this._ctx.clip()},e.prototype._getFont=function(e,t){return(t?"italic":"")+" "+(e?this._optionsService.options.fontWeightBold:this._optionsService.options.fontWeight)+" "+this._optionsService.options.fontSize*window.devicePixelRatio+"px "+this._optionsService.options.fontFamily},e.prototype._getContrastColor=function(e){if(1!==this._optionsService.options.minimumContrastRatio){var t=this._colors.contrastCache.getColor(e.bg,e.fg);if(void 0!==t)return t||void 0;var r=e.getFgColor(),i=e.getFgColorMode(),n=e.getBgColor(),o=e.getBgColorMode(),s=!!e.isInverse(),a=!!e.isInverse();if(s){var l=r;r=n,n=l;var u=i;i=o,o=u}var h=this._resolveBackgroundRgba(o,n,s),f=this._resolveForegroundRgba(i,r,s,a),d=c.rgba.ensureContrastRatio(h,f,this._optionsService.options.minimumContrastRatio);if(d){var p={css:c.channels.toCss(255&d>>24,255&d>>16,255&d>>8),rgba:d};return this._colors.contrastCache.setColor(e.bg,e.fg,p),p}this._colors.contrastCache.setColor(e.bg,e.fg,null)}},e.prototype._resolveBackgroundRgba=function(e,t,r){switch(e){case 16777216:case 33554432:return this._colors.ansi[t].rgba;case 50331648:return t<<8;case 0:default:return r?this._colors.foreground.rgba:this._colors.background.rgba}},e.prototype._resolveForegroundRgba=function(e,t,r,i){switch(e){case 16777216:case 33554432:return this._optionsService.options.drawBoldTextInBrightColors&&i&&8>t&&(t+=8),this._colors.ansi[t].rgba;case 50331648:return t<<8;case 0:default:return r?this._colors.background.rgba:this._colors.foreground.rgba}},e}();t.BaseRenderLayer=u},function(e,t){"use strict";function r(e,t,r){t.di$target===t?t.di$dependencies.push({id:e,index:r}):(t.di$dependencies=[{id:e,index:r}],t.di$target=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.createDecorator=t.getServiceDependencies=t.serviceRegistry=void 0,t.serviceRegistry=new Map,t.getServiceDependencies=function(e){return e.di$dependencies||[]},t.createDecorator=function(e){if(t.serviceRegistry.has(e))return t.serviceRegistry.get(e);var i=function(e,t,n){if(3!==arguments.length)throw new Error("@IServiceName-decorator can only be used to decorate a parameter");r(i,e,n)};return i.toString=function(){return e},t.serviceRegistry.set(e,i),i}},function(e,t){"use strict";function r(e,t,r,i){if(void 0===r&&(r=0),void 0===i&&(i=e.length),r>=e.length)return e;r=(e.length+r)%e.length,i=i>=e.length?e.length:(e.length+i)%e.length;for(var n=r;n<i;++n)e[n]=t;return e}Object.defineProperty(t,"__esModule",{value:!0}),t.concat=t.fillFallback=t.fill=void 0,t.fill=function(e,t,i,n){return e.fill?e.fill(t,i,n):r(e,t,i,n)},t.fillFallback=r,t.concat=function(e,t){var r=new e.constructor(e.length+t.length);return r.set(e),r.set(t,e.length),r}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BufferLine=t.DEFAULT_ATTR_DATA=void 0;var i=r(8),n=r(3),o=r(4),s=r(6);t.DEFAULT_ATTR_DATA=Object.freeze(new s.AttributeData);var a=function(){function e(e,t,r){void 0===r&&(r=!1),this.isWrapped=r,this._combined={},this._extendedAttrs={},this._data=new Uint32Array(3*e);for(var i=t||o.CellData.fromCharData([0,n.NULL_CELL_CHAR,n.NULL_CELL_WIDTH,n.NULL_CELL_CODE]),s=0;s<e;++s)this.setCell(s,i);this.length=e}return e.prototype.get=function(e){var t=this._data[3*e+0],r=2097151&t;return[this._data[3*e+1],2097152&t?this._combined[e]:r?i.stringFromCodePoint(r):"",t>>22,2097152&t?this._combined[e].charCodeAt(this._combined[e].length-1):r]},e.prototype.set=function(e,t){this._data[3*e+1]=t[n.CHAR_DATA_ATTR_INDEX],1<t[n.CHAR_DATA_CHAR_INDEX].length?(this._combined[e]=t[1],this._data[3*e+0]=2097152|e|t[n.CHAR_DATA_WIDTH_INDEX]<<22):this._data[3*e+0]=t[n.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|t[n.CHAR_DATA_WIDTH_INDEX]<<22},e.prototype.getWidth=function(e){return this._data[3*e+0]>>22},e.prototype.hasWidth=function(e){return 12582912&this._data[3*e+0]},e.prototype.getFg=function(e){return this._data[3*e+1]},e.prototype.getBg=function(e){return this._data[3*e+2]},e.prototype.hasContent=function(e){return 4194303&this._data[3*e+0]},e.prototype.getCodePoint=function(e){var t=this._data[3*e+0];return 2097152&t?this._combined[e].charCodeAt(this._combined[e].length-1):2097151&t},e.prototype.isCombined=function(e){return 2097152&this._data[3*e+0]},e.prototype.getString=function(e){var t=this._data[3*e+0];return 2097152&t?this._combined[e]:2097151&t?i.stringFromCodePoint(2097151&t):""},e.prototype.loadCell=function(e,t){var r=3*e;return t.content=this._data[r+0],t.fg=this._data[r+1],t.bg=this._data[r+2],2097152&t.content&&(t.combinedData=this._combined[e]),268435456&t.bg&&(t.extended=this._extendedAttrs[e]),t},e.prototype.setCell=function(e,t){2097152&t.content&&(this._combined[e]=t.combinedData),268435456&t.bg&&(this._extendedAttrs[e]=t.extended),this._data[3*e+0]=t.content,this._data[3*e+1]=t.fg,this._data[3*e+2]=t.bg},e.prototype.setCellFromCodePoint=function(e,t,r,i,n,o){268435456&n&&(this._extendedAttrs[e]=o),this._data[3*e+0]=t|r<<22,this._data[3*e+1]=i,this._data[3*e+2]=n},e.prototype.addCodepointToCell=function(e,t){var r=this._data[3*e+0];2097152&r?this._combined[e]+=i.stringFromCodePoint(t):(2097151&r?(this._combined[e]=i.stringFromCodePoint(2097151&r)+i.stringFromCodePoint(t),r&=-2097152,r|=2097152):r=4194304|t,this._data[3*e+0]=r)},e.prototype.insertCells=function(e,t,r,i){if((e%=this.length)&&2===this.getWidth(e-1)&&this.setCellFromCodePoint(e-1,0,1,(null==i?void 0:i.fg)||0,(null==i?void 0:i.bg)||0,(null==i?void 0:i.extended)||new s.ExtendedAttrs),t<this.length-e){for(var n=new o.CellData,a=this.length-e-t-1;0<=a;--a)this.setCell(e+t+a,this.loadCell(e+a,n));for(a=0;a<t;++a)this.setCell(e+a,r)}else for(a=e;a<this.length;++a)this.setCell(a,r);2===this.getWidth(this.length-1)&&this.setCellFromCodePoint(this.length-1,0,1,(null==i?void 0:i.fg)||0,(null==i?void 0:i.bg)||0,(null==i?void 0:i.extended)||new s.ExtendedAttrs)},e.prototype.deleteCells=function(e,t,r,i){if(e%=this.length,t<this.length-e){for(var n=new o.CellData,a=0;a<this.length-e-t;++a)this.setCell(e+a,this.loadCell(e+t+a,n));for(a=this.length-t;a<this.length;++a)this.setCell(a,r)}else for(a=e;a<this.length;++a)this.setCell(a,r);e&&2===this.getWidth(e-1)&&this.setCellFromCodePoint(e-1,0,1,(null==i?void 0:i.fg)||0,(null==i?void 0:i.bg)||0,(null==i?void 0:i.extended)||new s.ExtendedAttrs),0!==this.getWidth(e)||this.hasContent(e)||this.setCellFromCodePoint(e,0,1,(null==i?void 0:i.fg)||0,(null==i?void 0:i.bg)||0,(null==i?void 0:i.extended)||new s.ExtendedAttrs)},e.prototype.replaceCells=function(e,t,r,i){for(e&&2===this.getWidth(e-1)&&this.setCellFromCodePoint(e-1,0,1,(null==i?void 0:i.fg)||0,(null==i?void 0:i.bg)||0,(null==i?void 0:i.extended)||new s.ExtendedAttrs),t<this.length&&2===this.getWidth(t-1)&&this.setCellFromCodePoint(t,0,1,(null==i?void 0:i.fg)||0,(null==i?void 0:i.bg)||0,(null==i?void 0:i.extended)||new s.ExtendedAttrs);e<t&&e<this.length;)this.setCell(e++,r)},e.prototype.resize=function(e,t){if(e!==this.length){if(e>this.length){var r=new Uint32Array(3*e);this.length&&(3*e<this._data.length?r.set(this._data.subarray(0,3*e)):r.set(this._data)),this._data=r;for(var i=this.length;i<e;++i)this.setCell(i,t)}else if(e){(r=new Uint32Array(3*e)).set(this._data.subarray(0,3*e)),this._data=r;var n=Object.keys(this._combined);for(i=0;i<n.length;i++){var o=parseInt(n[i],10);o>=e&&delete this._combined[o]}}else this._data=new Uint32Array(0),this._combined={};this.length=e}},e.prototype.fill=function(e){this._combined={},this._extendedAttrs={};for(var t=0;t<this.length;++t)this.setCell(t,e)},e.prototype.copyFrom=function(e){for(var t in this.length===e.length?this._data.set(e._data):this._data=new Uint32Array(e._data),this.length=e.length,this._combined={},e._combined)this._combined[t]=e._combined[t];for(var t in this._extendedAttrs={},e._extendedAttrs)this._extendedAttrs[t]=e._extendedAttrs[t];this.isWrapped=e.isWrapped},e.prototype.clone=function(){var t=new e(0);for(var r in t._data=new Uint32Array(this._data),t.length=this.length,this._combined)t._combined[r]=this._combined[r];for(var r in this._extendedAttrs)t._extendedAttrs[r]=this._extendedAttrs[r];return t.isWrapped=this.isWrapped,t},e.prototype.getTrimmedLength=function(){for(var e=this.length-1;0<=e;--e)if(4194303&this._data[3*e+0])return e+(this._data[3*e+0]>>22);return 0},e.prototype.copyCellsFrom=function(e,t,r,i,n){var o=e._data;if(n)for(var s=i-1;0<=s;s--)for(var a=0;3>a;a++)this._data[3*(r+s)+a]=o[3*(t+s)+a];else for(s=0;s<i;s++)for(a=0;3>a;a++)this._data[3*(r+s)+a]=o[3*(t+s)+a];var c=Object.keys(e._combined);for(a=0;a<c.length;a++){var l=parseInt(c[a],10);l>=t&&(this._combined[l-t+r]=e._combined[l])}},e.prototype.translateToString=function(e,t,r){void 0===e&&(e=!1),void 0===t&&(t=0),void 0===r&&(r=this.length),e&&(r=c(r,this.getTrimmedLength()));for(var o="";t<r;){var s=this._data[3*t+0],a=2097151&s;o+=2097152&s?this._combined[t]:a?i.stringFromCodePoint(a):n.WHITESPACE_CELL_CHAR,t+=s>>22||1}return o},e}();t.BufferLine=a},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.removeElementFromParent=void 0,t.removeElementFromParent=function(){for(var e,t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];for(var i,n=0,o=t;n<o.length;n++)null===(e=null==(i=o[n])?void 0:i.parentElement)||void 0===e||e.removeChild(i)}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.tooMuchOutput=t.promptLabel=void 0,t.promptLabel="Terminal input",t.tooMuchOutput="Too much output to announce, navigate to rows manually to read"},function(e,r,i){"use strict";function o(e,t){return 24<e?t.setWinLines||!1:1===e?!!t.restoreWin:2===e?!!t.minimizeWin:3===e?!!t.setWinPosition:4===e?!!t.setWinSizePixels:5===e?!!t.raiseWin:6===e?!!t.lowerWin:7===e?!!t.refreshWin:8===e?!!t.setWinSizeChars:9===e?!!t.maximizeWin:10===e?!!t.fullscreenWin:11===e?!!t.getWinState:13===e?!!t.getWinPosition:14===e?!!t.getWinSizePixels:15===e?!!t.getScreenSizePixels:16===e?!!t.getCellSizePixels:18===e?!!t.getWinSizeChars:19===e?!!t.getScreenSizeChars:20===e?!!t.getIconTitle:21===e?!!t.getWinTitle:22===e?!!t.pushTitle:23===e?!!t.popTitle:!(24!=e||!t.setWinLines)}var s,a=this&&this.__extends||(s=function(e,t){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}s(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0}),r.InputHandler=r.WindowsOptionsReportType=void 0;var l,u=i(12),h=i(20),f=i(39),d=i(2),p=i(15),_=i(8),v=i(16),g=i(0),y=i(3),b=i(4),S=i(6),m=i(22),C=i(24),w={"(":0,")":1,"*":2,"+":3,"-":1,".":2};!function(e){e[e.GET_WIN_SIZE_PIXELS=0]="GET_WIN_SIZE_PIXELS",e[e.GET_CELL_SIZE_PIXELS=1]="GET_CELL_SIZE_PIXELS"}(l=r.WindowsOptionsReportType||(r.WindowsOptionsReportType={}));var E=function(){function e(e,t,r,i){this._bufferService=e,this._coreService=t,this._logService=r,this._optionsService=i,this._data=new Uint32Array(0)}return e.prototype.hook=function(){this._data=new Uint32Array(0)},e.prototype.put=function(e,t,r){this._data=p.concat(this._data,e.subarray(t,r))},e.prototype.unhook=function(e){if(e){var t=_.utf32ToString(this._data);switch(this._data=new Uint32Array(0),t){case'"q':return this._coreService.triggerDataEvent(u.C0.ESC+'P1$r0"q'+u.C0.ESC+"\\");case'"p':return this._coreService.triggerDataEvent(u.C0.ESC+'P1$r61;1"p'+u.C0.ESC+"\\");case"r":var r=this._bufferService.buffer.scrollTop+1+";"+(this._bufferService.buffer.scrollBottom+1)+"r";return this._coreService.triggerDataEvent(u.C0.ESC+"P1$r"+r+u.C0.ESC+"\\");case"m":return this._coreService.triggerDataEvent(u.C0.ESC+"P1$r0m"+u.C0.ESC+"\\");case" q":var i={block:2,underline:4,bar:6}[this._optionsService.options.cursorStyle];return i-=this._optionsService.options.cursorBlink?1:0,this._coreService.triggerDataEvent(u.C0.ESC+"P1$r"+i+" q"+u.C0.ESC+"\\");default:this._logService.debug("Unknown DCS $q %s",t),this._coreService.triggerDataEvent(u.C0.ESC+"P0$r"+u.C0.ESC+"\\")}}else this._data=new Uint32Array(0)},e}(),x=function(e){function r(t,r,i,n,o,s,a,c,l){void 0===l&&(l=new f.EscapeSequenceParser);var d=e.call(this)||this;d._bufferService=t,d._charsetService=r,d._coreService=i,d._dirtyRowService=n,d._logService=o,d._optionsService=s,d._coreMouseService=a,d._unicodeService=c,d._parser=l,d._parseBuffer=new Uint32Array(4096),d._stringDecoder=new _.StringToUtf32,d._utf8Decoder=new _.Utf8ToUtf32,d._workCell=new b.CellData,d._windowTitle="",d._iconName="",d._windowTitleStack=[],d._iconNameStack=[],d._curAttrData=v.DEFAULT_ATTR_DATA.clone(),d._eraseAttrDataInternal=v.DEFAULT_ATTR_DATA.clone(),d._onRequestBell=new g.EventEmitter,d._onRequestRefreshRows=new g.EventEmitter,d._onRequestReset=new g.EventEmitter,d._onRequestScroll=new g.EventEmitter,d._onRequestSyncScrollBar=new g.EventEmitter,d._onRequestWindowsOptionsReport=new g.EventEmitter,d._onA11yChar=new g.EventEmitter,d._onA11yTab=new g.EventEmitter,d._onCursorMove=new g.EventEmitter,d._onLineFeed=new g.EventEmitter,d._onScroll=new g.EventEmitter,d._onTitleChange=new g.EventEmitter,d.register(d._parser),d._parser.setCsiHandlerFallback((function(e,t){d._logService.debug("Unknown CSI code: ",{identifier:d._parser.identToString(e),params:t.toArray()})})),d._parser.setEscHandlerFallback((function(e){d._logService.debug("Unknown ESC code: ",{identifier:d._parser.identToString(e)})})),d._parser.setExecuteHandlerFallback((function(e){d._logService.debug("Unknown EXECUTE code: ",{code:e})})),d._parser.setOscHandlerFallback((function(e,t,r){d._logService.debug("Unknown OSC code: ",{identifier:e,action:t,data:r})})),d._parser.setDcsHandlerFallback((function(e,t,r){"HOOK"===t&&(r=r.toArray()),d._logService.debug("Unknown DCS code: ",{identifier:d._parser.identToString(e),action:t,payload:r})})),d._parser.setPrintHandler((function(e,t,r){return d.print(e,t,r)})),d._parser.setCsiHandler({final:"@"},(function(e){return d.insertChars(e)})),d._parser.setCsiHandler({intermediates:" ",final:"@"},(function(e){return d.scrollLeft(e)})),d._parser.setCsiHandler({final:"A"},(function(e){return d.cursorUp(e)})),d._parser.setCsiHandler({intermediates:" ",final:"A"},(function(e){return d.scrollRight(e)})),d._parser.setCsiHandler({final:"B"},(function(e){return d.cursorDown(e)})),d._parser.setCsiHandler({final:"C"},(function(e){return d.cursorForward(e)})),d._parser.setCsiHandler({final:"D"},(function(e){return d.cursorBackward(e)})),d._parser.setCsiHandler({final:"E"},(function(e){return d.cursorNextLine(e)})),d._parser.setCsiHandler({final:"F"},(function(e){return d.cursorPrecedingLine(e)})),d._parser.setCsiHandler({final:"G"},(function(e){return d.cursorCharAbsolute(e)})),d._parser.setCsiHandler({final:"H"},(function(e){return d.cursorPosition(e)})),d._parser.setCsiHandler({final:"I"},(function(e){return d.cursorForwardTab(e)})),d._parser.setCsiHandler({final:"J"},(function(e){return d.eraseInDisplay(e)})),d._parser.setCsiHandler({prefix:"?",final:"J"},(function(e){return d.eraseInDisplay(e)})),d._parser.setCsiHandler({final:"K"},(function(e){return d.eraseInLine(e)})),d._parser.setCsiHandler({prefix:"?",final:"K"},(function(e){return d.eraseInLine(e)})),d._parser.setCsiHandler({final:"L"},(function(e){return d.insertLines(e)})),d._parser.setCsiHandler({final:"M"},(function(e){return d.deleteLines(e)})),d._parser.setCsiHandler({final:"P"},(function(e){return d.deleteChars(e)})),d._parser.setCsiHandler({final:"S"},(function(e){return d.scrollUp(e)})),d._parser.setCsiHandler({final:"T"},(function(e){return d.scrollDown(e)})),d._parser.setCsiHandler({final:"X"},(function(e){return d.eraseChars(e)})),d._parser.setCsiHandler({final:"Z"},(function(e){return d.cursorBackwardTab(e)})),d._parser.setCsiHandler({final:"`"},(function(e){return d.charPosAbsolute(e)})),d._parser.setCsiHandler({final:"a"},(function(e){return d.hPositionRelative(e)})),d._parser.setCsiHandler({final:"b"},(function(e){return d.repeatPrecedingCharacter(e)})),d._parser.setCsiHandler({final:"c"},(function(e){return d.sendDeviceAttributesPrimary(e)})),d._parser.setCsiHandler({prefix:">",final:"c"},(function(e){return d.sendDeviceAttributesSecondary(e)})),d._parser.setCsiHandler({final:"d"},(function(e){return d.linePosAbsolute(e)})),d._parser.setCsiHandler({final:"e"},(function(e){return d.vPositionRelative(e)})),d._parser.setCsiHandler({final:"f"},(function(e){return d.hVPosition(e)})),d._parser.setCsiHandler({final:"g"},(function(e){return d.tabClear(e)})),d._parser.setCsiHandler({final:"h"},(function(e){return d.setMode(e)})),d._parser.setCsiHandler({prefix:"?",final:"h"},(function(e){return d.setModePrivate(e)})),d._parser.setCsiHandler({final:"l"},(function(e){return d.resetMode(e)})),d._parser.setCsiHandler({prefix:"?",final:"l"},(function(e){return d.resetModePrivate(e)})),d._parser.setCsiHandler({final:"m"},(function(e){return d.charAttributes(e)})),d._parser.setCsiHandler({final:"n"},(function(e){return d.deviceStatus(e)})),d._parser.setCsiHandler({prefix:"?",final:"n"},(function(e){return d.deviceStatusPrivate(e)})),d._parser.setCsiHandler({intermediates:"!",final:"p"},(function(e){return d.softReset(e)})),d._parser.setCsiHandler({intermediates:" ",final:"q"},(function(e){return d.setCursorStyle(e)})),d._parser.setCsiHandler({final:"r"},(function(e){return d.setScrollRegion(e)})),d._parser.setCsiHandler({final:"s"},(function(e){return d.saveCursor(e)})),d._parser.setCsiHandler({final:"t"},(function(e){return d.windowOptions(e)})),d._parser.setCsiHandler({final:"u"},(function(e){return d.restoreCursor(e)})),d._parser.setCsiHandler({intermediates:"'",final:"}"},(function(e){return d.insertColumns(e)})),d._parser.setCsiHandler({intermediates:"'",final:"~"},(function(e){return d.deleteColumns(e)})),d._parser.setExecuteHandler(u.C0.BEL,(function(){return d.bell()})),d._parser.setExecuteHandler(u.C0.LF,(function(){return d.lineFeed()})),d._parser.setExecuteHandler(u.C0.VT,(function(){return d.lineFeed()})),d._parser.setExecuteHandler(u.C0.FF,(function(){return d.lineFeed()})),d._parser.setExecuteHandler(u.C0.CR,(function(){return d.carriageReturn()})),d._parser.setExecuteHandler(u.C0.BS,(function(){return d.backspace()})),d._parser.setExecuteHandler(u.C0.HT,(function(){return d.tab()})),d._parser.setExecuteHandler(u.C0.SO,(function(){return d.shiftOut()})),d._parser.setExecuteHandler(u.C0.SI,(function(){return d.shiftIn()})),d._parser.setExecuteHandler(u.C1.IND,(function(){return d.index()})),d._parser.setExecuteHandler(u.C1.NEL,(function(){return d.nextLine()})),d._parser.setExecuteHandler(u.C1.HTS,(function(){return d.tabSet()})),d._parser.setOscHandler(0,new m.OscHandler((function(e){d.setTitle(e),d.setIconName(e)}))),d._parser.setOscHandler(1,new m.OscHandler((function(e){return d.setIconName(e)}))),d._parser.setOscHandler(2,new m.OscHandler((function(e){return d.setTitle(e)}))),d._parser.setEscHandler({final:"7"},(function(){return d.saveCursor()})),d._parser.setEscHandler({final:"8"},(function(){return d.restoreCursor()})),d._parser.setEscHandler({final:"D"},(function(){return d.index()})),d._parser.setEscHandler({final:"E"},(function(){return d.nextLine()})),d._parser.setEscHandler({final:"H"},(function(){return d.tabSet()})),d._parser.setEscHandler({final:"M"},(function(){return d.reverseIndex()})),d._parser.setEscHandler({final:"="},(function(){return d.keypadApplicationMode()})),d._parser.setEscHandler({final:">"},(function(){return d.keypadNumericMode()})),d._parser.setEscHandler({final:"c"},(function(){return d.fullReset()})),d._parser.setEscHandler({final:"n"},(function(){return d.setgLevel(2)})),d._parser.setEscHandler({final:"o"},(function(){return d.setgLevel(3)})),d._parser.setEscHandler({final:"|"},(function(){return d.setgLevel(3)})),d._parser.setEscHandler({final:"}"},(function(){return d.setgLevel(2)})),d._parser.setEscHandler({final:"~"},(function(){return d.setgLevel(1)})),d._parser.setEscHandler({intermediates:"%",final:"@"},(function(){return d.selectDefaultCharset()})),d._parser.setEscHandler({intermediates:"%",final:"G"},(function(){return d.selectDefaultCharset()}));var p=function(e){y._parser.setEscHandler({intermediates:"(",final:e},(function(){return d.selectCharset("("+e)})),y._parser.setEscHandler({intermediates:")",final:e},(function(){return d.selectCharset(")"+e)})),y._parser.setEscHandler({intermediates:"*",final:e},(function(){return d.selectCharset("*"+e)})),y._parser.setEscHandler({intermediates:"+",final:e},(function(){return d.selectCharset("+"+e)})),y._parser.setEscHandler({intermediates:"-",final:e},(function(){return d.selectCharset("-"+e)})),y._parser.setEscHandler({intermediates:".",final:e},(function(){return d.selectCharset("."+e)})),y._parser.setEscHandler({intermediates:"/",final:e},(function(){return d.selectCharset("/"+e)}))},y=this;for(var S in h.CHARSETS)p(S);return d._parser.setEscHandler({intermediates:"#",final:"8"},(function(){return d.screenAlignmentPattern()})),d._parser.setErrorHandler((function(e){return d._logService.error("Parsing error: ",e),e})),d._parser.setDcsHandler({intermediates:"$",final:"q"},new E(d._bufferService,d._coreService,d._logService,d._optionsService)),d}return a(r,e),Object.defineProperty(r.prototype,"onRequestBell",{get:function(){return this._onRequestBell.event},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"onRequestRefreshRows",{get:function(){return this._onRequestRefreshRows.event},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"onRequestReset",{get:function(){return this._onRequestReset.event},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"onRequestScroll",{get:function(){return this._onRequestScroll.event},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"onRequestSyncScrollBar",{get:function(){return this._onRequestSyncScrollBar.event},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"onRequestWindowsOptionsReport",{get:function(){return this._onRequestWindowsOptionsReport.event},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"onA11yChar",{get:function(){return this._onA11yChar.event},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"onA11yTab",{get:function(){return this._onA11yTab.event},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"onCursorMove",{get:function(){return this._onCursorMove.event},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"onLineFeed",{get:function(){return this._onLineFeed.event},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"onScroll",{get:function(){return this._onScroll.event},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"onTitleChange",{get:function(){return this._onTitleChange.event},enumerable:!1,configurable:!0}),r.prototype.dispose=function(){e.prototype.dispose.call(this)},r.prototype.parse=function(e){var t=this._bufferService.buffer,r=t.x,i=t.y;if(this._logService.debug("parsing data",e),this._parseBuffer.length<e.length&&131072>this._parseBuffer.length&&(this._parseBuffer=new Uint32Array(c(e.length,131072))),this._dirtyRowService.clearRange(),131072<e.length)for(var n=0;n<e.length;n+=131072){var o=n+131072<e.length?n+131072:e.length,s="string"==typeof e?this._stringDecoder.decode(e.substring(n,o),this._parseBuffer):this._utf8Decoder.decode(e.subarray(n,o),this._parseBuffer);this._parser.parse(this._parseBuffer,s)}else s="string"==typeof e?this._stringDecoder.decode(e,this._parseBuffer):this._utf8Decoder.decode(e,this._parseBuffer),this._parser.parse(this._parseBuffer,s);(t=this._bufferService.buffer).x===r&&t.y===i||this._onCursorMove.fire(),this._onRequestRefreshRows.fire(this._dirtyRowService.start,this._dirtyRowService.end)},r.prototype.print=function(e,r,i){var n,o,s=this._bufferService.buffer,a=this._charsetService.charset,c=this._optionsService.options.screenReaderMode,l=this._bufferService.cols,u=this._coreService.decPrivateModes.wraparound,h=this._coreService.modes.insertMode,f=this._curAttrData,d=s.lines.get(s.ybase+s.y);this._dirtyRowService.markDirty(s.y),s.x&&0<i-r&&2===d.getWidth(s.x-1)&&d.setCellFromCodePoint(s.x-1,0,1,f.fg,f.bg,f.extended);for(var p=r;p<i;++p){if(n=e[p],o=this._unicodeService.wcwidth(n),127>n&&a){var v=a[t(n)];v&&(n=v.charCodeAt(0))}if(c&&this._onA11yChar.fire(_.stringFromCodePoint(n)),o||!s.x){if(s.x+o-1>=l)if(u){for(;s.x<l;)d.setCellFromCodePoint(s.x++,0,1,f.fg,f.bg,f.extended);s.x=0,s.y++,s.y===s.scrollBottom+1?(s.y--,this._onRequestScroll.fire(this._eraseAttrData(),!0)):(s.y>=this._bufferService.rows&&(s.y=this._bufferService.rows-1),s.lines.get(s.ybase+s.y).isWrapped=!0),d=s.lines.get(s.ybase+s.y)}else if(s.x=l-1,2===o)continue;if(h&&(d.insertCells(s.x,o,s.getNullCell(f),f),2===d.getWidth(l-1)&&d.setCellFromCodePoint(l-1,y.NULL_CELL_CODE,y.NULL_CELL_WIDTH,f.fg,f.bg,f.extended)),d.setCellFromCodePoint(s.x++,n,o,f.fg,f.bg,f.extended),0<o)for(;--o;)d.setCellFromCodePoint(s.x++,0,0,f.fg,f.bg,f.extended)}else d.getWidth(s.x-1)?d.addCodepointToCell(s.x-1,n):d.addCodepointToCell(s.x-2,n)}0<i-r&&(d.loadCell(s.x-1,this._workCell),this._parser.precedingCodepoint=2===this._workCell.getWidth()||65535<this._workCell.getCode()?0:this._workCell.isCombined()?this._workCell.getChars().charCodeAt(0):this._workCell.content),s.x<l&&0<i-r&&0===d.getWidth(s.x)&&!d.hasContent(s.x)&&d.setCellFromCodePoint(s.x,0,1,f.fg,f.bg,f.extended),this._dirtyRowService.markDirty(s.y)},r.prototype.addCsiHandler=function(e,t){var r=this;return"t"!==e.final||e.prefix||e.intermediates?this._parser.addCsiHandler(e,t):this._parser.addCsiHandler(e,(function(e){return!o(e.params[0],r._optionsService.options.windowOptions)||t(e)}))},r.prototype.addDcsHandler=function(e,t){return this._parser.addDcsHandler(e,new C.DcsHandler(t))},r.prototype.addEscHandler=function(e,t){return this._parser.addEscHandler(e,t)},r.prototype.addOscHandler=function(e,t){return this._parser.addOscHandler(e,new m.OscHandler(t))},r.prototype.bell=function(){this._onRequestBell.fire()},r.prototype.lineFeed=function(){var e=this._bufferService.buffer;this._dirtyRowService.markDirty(e.y),this._optionsService.options.convertEol&&(e.x=0),e.y++,e.y===e.scrollBottom+1?(e.y--,this._onRequestScroll.fire(this._eraseAttrData())):e.y>=this._bufferService.rows&&(e.y=this._bufferService.rows-1),e.x>=this._bufferService.cols&&e.x--,this._dirtyRowService.markDirty(e.y),this._onLineFeed.fire()},r.prototype.carriageReturn=function(){this._bufferService.buffer.x=0},r.prototype.backspace=function(){var e,t=this._bufferService.buffer;if(!this._coreService.decPrivateModes.reverseWraparound)return this._restrictCursor(),void(0<t.x&&t.x--);if(this._restrictCursor(this._bufferService.cols),0<t.x)t.x--;else if(0===t.x&&t.y>t.scrollTop&&t.y<=t.scrollBottom&&(null===(e=t.lines.get(t.ybase+t.y))||void 0===e?void 0:e.isWrapped)){t.lines.get(t.ybase+t.y).isWrapped=!1,t.y--,t.x=this._bufferService.cols-1;var r=t.lines.get(t.ybase+t.y);r.hasWidth(t.x)&&!r.hasContent(t.x)&&t.x--}this._restrictCursor()},r.prototype.tab=function(){if(!(this._bufferService.buffer.x>=this._bufferService.cols)){var e=this._bufferService.buffer.x;this._bufferService.buffer.x=this._bufferService.buffer.nextStop(),this._optionsService.options.screenReaderMode&&this._onA11yTab.fire(this._bufferService.buffer.x-e)}},r.prototype.shiftOut=function(){this._charsetService.setgLevel(1)},r.prototype.shiftIn=function(){this._charsetService.setgLevel(0)},r.prototype._restrictCursor=function(e){void 0===e&&(e=this._bufferService.cols-1),this._bufferService.buffer.x=c(e,n(0,this._bufferService.buffer.x)),this._bufferService.buffer.y=this._coreService.decPrivateModes.origin?c(this._bufferService.buffer.scrollBottom,n(this._bufferService.buffer.scrollTop,this._bufferService.buffer.y)):c(this._bufferService.rows-1,n(0,this._bufferService.buffer.y)),this._dirtyRowService.markDirty(this._bufferService.buffer.y)},r.prototype._setCursor=function(e,t){this._dirtyRowService.markDirty(this._bufferService.buffer.y),this._coreService.decPrivateModes.origin?(this._bufferService.buffer.x=e,this._bufferService.buffer.y=this._bufferService.buffer.scrollTop+t):(this._bufferService.buffer.x=e,this._bufferService.buffer.y=t),this._restrictCursor(),this._dirtyRowService.markDirty(this._bufferService.buffer.y)},r.prototype._moveCursor=function(e,t){this._restrictCursor(),this._setCursor(this._bufferService.buffer.x+e,this._bufferService.buffer.y+t)},r.prototype.cursorUp=function(e){var t=this._bufferService.buffer.y-this._bufferService.buffer.scrollTop;0<=t?this._moveCursor(0,-c(t,e.params[0]||1)):this._moveCursor(0,-(e.params[0]||1))},r.prototype.cursorDown=function(e){var t=this._bufferService.buffer.scrollBottom-this._bufferService.buffer.y;0<=t?this._moveCursor(0,c(t,e.params[0]||1)):this._moveCursor(0,e.params[0]||1)},r.prototype.cursorForward=function(e){this._moveCursor(e.params[0]||1,0)},r.prototype.cursorBackward=function(e){this._moveCursor(-(e.params[0]||1),0)},r.prototype.cursorNextLine=function(e){this.cursorDown(e),this._bufferService.buffer.x=0},r.prototype.cursorPrecedingLine=function(e){this.cursorUp(e),this._bufferService.buffer.x=0},r.prototype.cursorCharAbsolute=function(e){this._setCursor((e.params[0]||1)-1,this._bufferService.buffer.y)},r.prototype.cursorPosition=function(e){this._setCursor(2<=e.length?(e.params[1]||1)-1:0,(e.params[0]||1)-1)},r.prototype.charPosAbsolute=function(e){this._setCursor((e.params[0]||1)-1,this._bufferService.buffer.y)},r.prototype.hPositionRelative=function(e){this._moveCursor(e.params[0]||1,0)},r.prototype.linePosAbsolute=function(e){this._setCursor(this._bufferService.buffer.x,(e.params[0]||1)-1)},r.prototype.vPositionRelative=function(e){this._moveCursor(0,e.params[0]||1)},r.prototype.hVPosition=function(e){this.cursorPosition(e)},r.prototype.tabClear=function(e){var t=e.params[0];0===t?delete this._bufferService.buffer.tabs[this._bufferService.buffer.x]:3===t&&(this._bufferService.buffer.tabs={})},r.prototype.cursorForwardTab=function(e){if(!(this._bufferService.buffer.x>=this._bufferService.cols))for(var t=e.params[0]||1;t--;)this._bufferService.buffer.x=this._bufferService.buffer.nextStop()},r.prototype.cursorBackwardTab=function(e){if(!(this._bufferService.buffer.x>=this._bufferService.cols))for(var t=e.params[0]||1,r=this._bufferService.buffer;t--;)r.x=r.prevStop()},r.prototype._eraseInBufferLine=function(e,t,r,i){void 0===i&&(i=!1);var n=this._bufferService.buffer.lines.get(this._bufferService.buffer.ybase+e);n.replaceCells(t,r,this._bufferService.buffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),i&&(n.isWrapped=!1)},r.prototype._resetBufferLine=function(e){var t=this._bufferService.buffer.lines.get(this._bufferService.buffer.ybase+e);t.fill(this._bufferService.buffer.getNullCell(this._eraseAttrData())),t.isWrapped=!1},r.prototype.eraseInDisplay=function(e){var t;switch(this._restrictCursor(),e.params[0]){case 0:for(t=this._bufferService.buffer.y,this._dirtyRowService.markDirty(t),this._eraseInBufferLine(t++,this._bufferService.buffer.x,this._bufferService.cols,0===this._bufferService.buffer.x);t<this._bufferService.rows;t++)this._resetBufferLine(t);this._dirtyRowService.markDirty(t);break;case 1:for(t=this._bufferService.buffer.y,this._dirtyRowService.markDirty(t),this._eraseInBufferLine(t,0,this._bufferService.buffer.x+1,!0),this._bufferService.buffer.x+1>=this._bufferService.cols&&(this._bufferService.buffer.lines.get(t+1).isWrapped=!1);t--;)this._resetBufferLine(t);this._dirtyRowService.markDirty(0);break;case 2:for(t=this._bufferService.rows,this._dirtyRowService.markDirty(t-1);t--;)this._resetBufferLine(t);this._dirtyRowService.markDirty(0);break;case 3:var r=this._bufferService.buffer.lines.length-this._bufferService.rows;0<r&&(this._bufferService.buffer.lines.trimStart(r),this._bufferService.buffer.ybase=n(this._bufferService.buffer.ybase-r,0),this._bufferService.buffer.ydisp=n(this._bufferService.buffer.ydisp-r,0),this._onScroll.fire(0))}},r.prototype.eraseInLine=function(e){switch(this._restrictCursor(),e.params[0]){case 0:this._eraseInBufferLine(this._bufferService.buffer.y,this._bufferService.buffer.x,this._bufferService.cols);break;case 1:this._eraseInBufferLine(this._bufferService.buffer.y,0,this._bufferService.buffer.x+1);break;case 2:this._eraseInBufferLine(this._bufferService.buffer.y,0,this._bufferService.cols)}this._dirtyRowService.markDirty(this._bufferService.buffer.y)},r.prototype.insertLines=function(e){this._restrictCursor();var t=e.params[0]||1,r=this._bufferService.buffer;if(!(r.y>r.scrollBottom||r.y<r.scrollTop)){for(var i=r.ybase+r.y,n=this._bufferService.rows-1-r.scrollBottom,o=this._bufferService.rows-1+r.ybase-n+1;t--;)r.lines.splice(o-1,1),r.lines.splice(i,0,r.getBlankLine(this._eraseAttrData()));this._dirtyRowService.markRangeDirty(r.y,r.scrollBottom),r.x=0}},r.prototype.deleteLines=function(e){this._restrictCursor();var t=e.params[0]||1,r=this._bufferService.buffer;if(!(r.y>r.scrollBottom||r.y<r.scrollTop)){var i,n=r.ybase+r.y;for(i=this._bufferService.rows-1-r.scrollBottom,i=this._bufferService.rows-1+r.ybase-i;t--;)r.lines.splice(n,1),r.lines.splice(i,0,r.getBlankLine(this._eraseAttrData()));this._dirtyRowService.markRangeDirty(r.y,r.scrollBottom),r.x=0}},r.prototype.insertChars=function(e){this._restrictCursor();var t=this._bufferService.buffer.lines.get(this._bufferService.buffer.ybase+this._bufferService.buffer.y);t&&(t.insertCells(this._bufferService.buffer.x,e.params[0]||1,this._bufferService.buffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),this._dirtyRowService.markDirty(this._bufferService.buffer.y))},r.prototype.deleteChars=function(e){this._restrictCursor();var t=this._bufferService.buffer.lines.get(this._bufferService.buffer.ybase+this._bufferService.buffer.y);t&&(t.deleteCells(this._bufferService.buffer.x,e.params[0]||1,this._bufferService.buffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),this._dirtyRowService.markDirty(this._bufferService.buffer.y))},r.prototype.scrollUp=function(e){for(var t=e.params[0]||1,r=this._bufferService.buffer;t--;)r.lines.splice(r.ybase+r.scrollTop,1),r.lines.splice(r.ybase+r.scrollBottom,0,r.getBlankLine(this._eraseAttrData()));this._dirtyRowService.markRangeDirty(r.scrollTop,r.scrollBottom)},r.prototype.scrollDown=function(e){for(var t=e.params[0]||1,r=this._bufferService.buffer;t--;)r.lines.splice(r.ybase+r.scrollBottom,1),r.lines.splice(r.ybase+r.scrollTop,0,r.getBlankLine(v.DEFAULT_ATTR_DATA));this._dirtyRowService.markRangeDirty(r.scrollTop,r.scrollBottom)},r.prototype.scrollLeft=function(e){var t=this._bufferService.buffer;if(!(t.y>t.scrollBottom||t.y<t.scrollTop)){for(var r,i=e.params[0]||1,n=t.scrollTop;n<=t.scrollBottom;++n)(r=t.lines.get(t.ybase+n)).deleteCells(0,i,t.getNullCell(this._eraseAttrData()),this._eraseAttrData()),r.isWrapped=!1;this._dirtyRowService.markRangeDirty(t.scrollTop,t.scrollBottom)}},r.prototype.scrollRight=function(e){var t=this._bufferService.buffer;if(!(t.y>t.scrollBottom||t.y<t.scrollTop)){for(var r,i=e.params[0]||1,n=t.scrollTop;n<=t.scrollBottom;++n)(r=t.lines.get(t.ybase+n)).insertCells(0,i,t.getNullCell(this._eraseAttrData()),this._eraseAttrData()),r.isWrapped=!1;this._dirtyRowService.markRangeDirty(t.scrollTop,t.scrollBottom)}},r.prototype.insertColumns=function(e){var t=this._bufferService.buffer;if(!(t.y>t.scrollBottom||t.y<t.scrollTop)){for(var r,i=e.params[0]||1,n=t.scrollTop;n<=t.scrollBottom;++n)(r=this._bufferService.buffer.lines.get(t.ybase+n)).insertCells(t.x,i,t.getNullCell(this._eraseAttrData()),this._eraseAttrData()),r.isWrapped=!1;this._dirtyRowService.markRangeDirty(t.scrollTop,t.scrollBottom)}},r.prototype.deleteColumns=function(e){var t=this._bufferService.buffer;if(!(t.y>t.scrollBottom||t.y<t.scrollTop)){for(var r,i=e.params[0]||1,n=t.scrollTop;n<=t.scrollBottom;++n)(r=t.lines.get(t.ybase+n)).deleteCells(t.x,i,t.getNullCell(this._eraseAttrData()),this._eraseAttrData()),r.isWrapped=!1;this._dirtyRowService.markRangeDirty(t.scrollTop,t.scrollBottom)}},r.prototype.eraseChars=function(e){this._restrictCursor();var t=this._bufferService.buffer.lines.get(this._bufferService.buffer.ybase+this._bufferService.buffer.y);t&&(t.replaceCells(this._bufferService.buffer.x,this._bufferService.buffer.x+(e.params[0]||1),this._bufferService.buffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),this._dirtyRowService.markDirty(this._bufferService.buffer.y))},r.prototype.repeatPrecedingCharacter=function(e){if(this._parser.precedingCodepoint){for(var t=e.params[0]||1,r=new Uint32Array(t),i=0;i<t;++i)r[i]=this._parser.precedingCodepoint;this.print(r,0,r.length)}},r.prototype.sendDeviceAttributesPrimary=function(e){0<e.params[0]||(this._is("xterm")||this._is("rxvt-unicode")||this._is("screen")?this._coreService.triggerDataEvent(u.C0.ESC+"[?1;2c"):this._is("linux")&&this._coreService.triggerDataEvent(u.C0.ESC+"[?6c"))},r.prototype.sendDeviceAttributesSecondary=function(e){0<e.params[0]||(this._is("xterm")?this._coreService.triggerDataEvent(u.C0.ESC+"[>0;276;0c"):this._is("rxvt-unicode")?this._coreService.triggerDataEvent(u.C0.ESC+"[>85;95;0c"):this._is("linux")?this._coreService.triggerDataEvent(e.params[0]+"c"):this._is("screen")&&this._coreService.triggerDataEvent(u.C0.ESC+"[>83;40003;0c"))},r.prototype._is=function(e){return 0===(this._optionsService.options.termName+"").indexOf(e)},r.prototype.setMode=function(e){for(var t=0;t<e.length;t++)switch(e.params[t]){case 4:this._coreService.modes.insertMode=!0}},r.prototype.setModePrivate=function(e){for(var t=0;t<e.length;t++)switch(e.params[t]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!0;break;case 2:this._charsetService.setgCharset(0,h.DEFAULT_CHARSET),this._charsetService.setgCharset(1,h.DEFAULT_CHARSET),this._charsetService.setgCharset(2,h.DEFAULT_CHARSET),this._charsetService.setgCharset(3,h.DEFAULT_CHARSET);break;case 3:this._optionsService.options.windowOptions.setWinLines&&(this._bufferService.resize(132,this._bufferService.rows),this._onRequestReset.fire());break;case 6:this._coreService.decPrivateModes.origin=!0,this._setCursor(0,0);break;case 7:this._coreService.decPrivateModes.wraparound=!0;break;case 12:break;case 45:this._coreService.decPrivateModes.reverseWraparound=!0;break;case 66:this._logService.debug("Serial port requested application keypad."),this._coreService.decPrivateModes.applicationKeypad=!0,this._onRequestSyncScrollBar.fire();break;case 9:this._coreMouseService.activeProtocol="X10";break;case 1e3:this._coreMouseService.activeProtocol="VT200";break;case 1002:this._coreMouseService.activeProtocol="DRAG";break;case 1003:this._coreMouseService.activeProtocol="ANY";break;case 1004:this._coreService.decPrivateModes.sendFocus=!0;break;case 1005:this._logService.debug("DECSET 1005 not supported (see #2507)");break;case 1006:this._coreMouseService.activeEncoding="SGR";break;case 1015:this._logService.debug("DECSET 1015 not supported (see #2507)");break;case 25:this._coreService.isCursorHidden=!1;break;case 1048:this.saveCursor();break;case 1049:this.saveCursor();case 47:case 1047:this._bufferService.buffers.activateAltBuffer(this._eraseAttrData()),this._coreService.isCursorInitialized=!0,this._onRequestRefreshRows.fire(0,this._bufferService.rows-1),this._onRequestSyncScrollBar.fire();break;case 2004:this._coreService.decPrivateModes.bracketedPasteMode=!0}},r.prototype.resetMode=function(e){for(var t=0;t<e.length;t++)switch(e.params[t]){case 4:this._coreService.modes.insertMode=!1}},r.prototype.resetModePrivate=function(e){for(var t=0;t<e.length;t++)switch(e.params[t]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!1;break;case 3:this._optionsService.options.windowOptions.setWinLines&&(this._bufferService.resize(80,this._bufferService.rows),this._onRequestReset.fire());break;case 6:this._coreService.decPrivateModes.origin=!1,this._setCursor(0,0);break;case 7:this._coreService.decPrivateModes.wraparound=!1;break;case 12:break;case 45:this._coreService.decPrivateModes.reverseWraparound=!1;break;case 66:this._logService.debug("Switching back to normal keypad."),this._coreService.decPrivateModes.applicationKeypad=!1,this._onRequestSyncScrollBar.fire();break;case 9:case 1e3:case 1002:case 1003:this._coreMouseService.activeProtocol="NONE";break;case 1004:this._coreService.decPrivateModes.sendFocus=!1;break;case 1005:this._logService.debug("DECRST 1005 not supported (see #2507)");break;case 1006:this._coreMouseService.activeEncoding="DEFAULT";break;case 1015:this._logService.debug("DECRST 1015 not supported (see #2507)");break;case 25:this._coreService.isCursorHidden=!0;break;case 1048:this.restoreCursor();break;case 1049:case 47:case 1047:this._bufferService.buffers.activateNormalBuffer(),1049===e.params[t]&&this.restoreCursor(),this._coreService.isCursorInitialized=!0,this._onRequestRefreshRows.fire(0,this._bufferService.rows-1),this._onRequestSyncScrollBar.fire();break;case 2004:this._coreService.decPrivateModes.bracketedPasteMode=!1}},r.prototype._updateAttrColor=function(e,t,r,i,n){return 2===t?(e|=50331648,e&=-16777216,e|=S.AttributeData.fromColorRGB([r,i,n])):5==t&&(e&=-50331904,e|=33554432|255&r),e},r.prototype._extractColor=function(e,t,r){var i=[0,0,-1,0,0,0],n=0,o=0;do{if(i[o+n]=e.params[t+o],e.hasSubParams(t+o)){var s=e.getSubParams(t+o),a=0;do{5===i[1]&&(n=1),i[o+a+1+n]=s[a]}while(++a<s.length&&a+o+1+n<i.length);break}if(5===i[1]&&2<=o+n||2===i[1]&&5<=o+n)break;i[1]&&(n=1)}while(++o+t<e.length&&o+n<i.length);for(a=2;a<i.length;++a)-1===i[a]&&(i[a]=0);switch(i[0]){case 38:r.fg=this._updateAttrColor(r.fg,i[1],i[3],i[4],i[5]);break;case 48:r.bg=this._updateAttrColor(r.bg,i[1],i[3],i[4],i[5]);break;case 58:r.extended=r.extended.clone(),r.extended.underlineColor=this._updateAttrColor(r.extended.underlineColor,i[1],i[3],i[4],i[5])}return o},r.prototype._processUnderline=function(e,t){t.extended=t.extended.clone(),(!~e||5<e)&&(e=1),t.extended.underlineStyle=e,t.fg|=268435456,0===e&&(t.fg&=-268435457),t.updateExtended()},r.prototype.charAttributes=function(e){if(1===e.length&&0===e.params[0])return this._curAttrData.fg=v.DEFAULT_ATTR_DATA.fg,void(this._curAttrData.bg=v.DEFAULT_ATTR_DATA.bg);for(var t,r=e.length,i=this._curAttrData,n=0;n<r;n++)30<=(t=e.params[n])&&37>=t?(i.fg&=-50331904,i.fg|=16777216|t-30):40<=t&&47>=t?(i.bg&=-50331904,i.bg|=16777216|t-40):90<=t&&97>=t?(i.fg&=-50331904,i.fg|=16777224|t-90):100<=t&&107>=t?(i.bg&=-50331904,i.bg|=16777224|t-100):0===t?(i.fg=v.DEFAULT_ATTR_DATA.fg,i.bg=v.DEFAULT_ATTR_DATA.bg):1===t?i.fg|=134217728:3===t?i.bg|=67108864:4===t?(i.fg|=268435456,this._processUnderline(e.hasSubParams(n)?e.getSubParams(n)[0]:1,i)):5===t?i.fg|=536870912:7===t?i.fg|=67108864:8===t?i.fg|=1073741824:2===t?i.bg|=134217728:21===t?this._processUnderline(2,i):22===t?(i.fg&=-134217729,i.bg&=-134217729):23===t?i.bg&=-67108865:24===t?i.fg&=-268435457:25===t?i.fg&=-536870913:27===t?i.fg&=-67108865:28===t?i.fg&=-1073741825:39===t?(i.fg&=-67108864,i.fg|=16777215&v.DEFAULT_ATTR_DATA.fg):49===t?(i.bg&=-67108864,i.bg|=16777215&v.DEFAULT_ATTR_DATA.bg):38===t||48===t||58===t?n+=this._extractColor(e,n,i):59===t?(i.extended=i.extended.clone(),i.extended.underlineColor=-1,i.updateExtended()):100===t?(i.fg&=-67108864,i.fg|=16777215&v.DEFAULT_ATTR_DATA.fg,i.bg&=-67108864,i.bg|=16777215&v.DEFAULT_ATTR_DATA.bg):this._logService.debug("Unknown SGR attribute: %d.",t)},r.prototype.deviceStatus=function(e){switch(e.params[0]){case 5:this._coreService.triggerDataEvent(u.C0.ESC+"[0n");break;case 6:var t=this._bufferService.buffer.y+1,r=this._bufferService.buffer.x+1;this._coreService.triggerDataEvent(u.C0.ESC+"["+t+";"+r+"R")}},r.prototype.deviceStatusPrivate=function(e){switch(e.params[0]){case 6:var t=this._bufferService.buffer.y+1,r=this._bufferService.buffer.x+1;this._coreService.triggerDataEvent(u.C0.ESC+"[?"+t+";"+r+"R")}},r.prototype.softReset=function(){this._coreService.isCursorHidden=!1,this._onRequestSyncScrollBar.fire(),this._bufferService.buffer.scrollTop=0,this._bufferService.buffer.scrollBottom=this._bufferService.rows-1,this._curAttrData=v.DEFAULT_ATTR_DATA.clone(),this._coreService.reset(),this._charsetService.reset(),this._bufferService.buffer.savedX=0,this._bufferService.buffer.savedY=this._bufferService.buffer.ybase,this._bufferService.buffer.savedCurAttrData.fg=this._curAttrData.fg,this._bufferService.buffer.savedCurAttrData.bg=this._curAttrData.bg,this._bufferService.buffer.savedCharset=this._charsetService.charset,this._coreService.decPrivateModes.origin=!1},r.prototype.setCursorStyle=function(e){var t=e.params[0]||1;1===t||2===t?this._optionsService.options.cursorStyle="block":3===t||4===t?this._optionsService.options.cursorStyle="underline":(5===t||6===t)&&(this._optionsService.options.cursorStyle="bar"),this._optionsService.options.cursorBlink=1==t%2},r.prototype.setScrollRegion=function(e){var t,r=e.params[0]||1;(2>e.length||(t=e.params[1])>this._bufferService.rows||0===t)&&(t=this._bufferService.rows),t>r&&(this._bufferService.buffer.scrollTop=r-1,this._bufferService.buffer.scrollBottom=t-1,this._setCursor(0,0))},r.prototype.windowOptions=function(e){if(o(e.params[0],this._optionsService.options.windowOptions)){var t=1<e.length?e.params[1]:0;switch(e.params[0]){case 14:2!==t&&this._onRequestWindowsOptionsReport.fire(l.GET_WIN_SIZE_PIXELS);break;case 16:this._onRequestWindowsOptionsReport.fire(l.GET_CELL_SIZE_PIXELS);break;case 18:this._bufferService&&this._coreService.triggerDataEvent(u.C0.ESC+"[8;"+this._bufferService.rows+";"+this._bufferService.cols+"t");break;case 22:0!==t&&2!==t||(this._windowTitleStack.push(this._windowTitle),10<this._windowTitleStack.length&&this._windowTitleStack.shift()),0!==t&&1!==t||(this._iconNameStack.push(this._iconName),10<this._iconNameStack.length&&this._iconNameStack.shift());break;case 23:0!==t&&2!==t||this._windowTitleStack.length&&this.setTitle(this._windowTitleStack.pop()),0!==t&&1!==t||this._iconNameStack.length&&this.setIconName(this._iconNameStack.pop())}}},r.prototype.saveCursor=function(){this._bufferService.buffer.savedX=this._bufferService.buffer.x,this._bufferService.buffer.savedY=this._bufferService.buffer.ybase+this._bufferService.buffer.y,this._bufferService.buffer.savedCurAttrData.fg=this._curAttrData.fg,this._bufferService.buffer.savedCurAttrData.bg=this._curAttrData.bg,this._bufferService.buffer.savedCharset=this._charsetService.charset},r.prototype.restoreCursor=function(){this._bufferService.buffer.x=this._bufferService.buffer.savedX||0,this._bufferService.buffer.y=n(this._bufferService.buffer.savedY-this._bufferService.buffer.ybase,0),this._curAttrData.fg=this._bufferService.buffer.savedCurAttrData.fg,this._curAttrData.bg=this._bufferService.buffer.savedCurAttrData.bg,this._charsetService.charset=this._savedCharset,this._bufferService.buffer.savedCharset&&(this._charsetService.charset=this._bufferService.buffer.savedCharset),this._restrictCursor()},r.prototype.setTitle=function(e){this._windowTitle=e,this._onTitleChange.fire(e)},r.prototype.setIconName=function(e){this._iconName=e},r.prototype.nextLine=function(){this._bufferService.buffer.x=0,this.index()},r.prototype.keypadApplicationMode=function(){this._logService.debug("Serial port requested application keypad."),this._coreService.decPrivateModes.applicationKeypad=!0,this._onRequestSyncScrollBar.fire()},r.prototype.keypadNumericMode=function(){this._logService.debug("Switching back to normal keypad."),this._coreService.decPrivateModes.applicationKeypad=!1,this._onRequestSyncScrollBar.fire()},r.prototype.selectDefaultCharset=function(){this._charsetService.setgLevel(0),this._charsetService.setgCharset(0,h.DEFAULT_CHARSET)},r.prototype.selectCharset=function(e){2===e.length?"/"!==e[0]&&this._charsetService.setgCharset(w[e[0]],h.CHARSETS[e[1]]||h.DEFAULT_CHARSET):this.selectDefaultCharset()},r.prototype.index=function(){this._restrictCursor();var e=this._bufferService.buffer;this._bufferService.buffer.y++,e.y===e.scrollBottom+1?(e.y--,this._onRequestScroll.fire(this._eraseAttrData())):e.y>=this._bufferService.rows&&(e.y=this._bufferService.rows-1),this._restrictCursor()},r.prototype.tabSet=function(){this._bufferService.buffer.tabs[this._bufferService.buffer.x]=!0},r.prototype.reverseIndex=function(){this._restrictCursor();var e=this._bufferService.buffer;if(e.y===e.scrollTop){var t=e.scrollBottom-e.scrollTop;e.lines.shiftElements(e.ybase+e.y,t,1),e.lines.set(e.ybase+e.y,e.getBlankLine(this._eraseAttrData())),this._dirtyRowService.markRangeDirty(e.scrollTop,e.scrollBottom)}else e.y--,this._restrictCursor()},r.prototype.fullReset=function(){this._parser.reset(),this._onRequestReset.fire()},r.prototype.reset=function(){this._curAttrData=v.DEFAULT_ATTR_DATA.clone(),this._eraseAttrDataInternal=v.DEFAULT_ATTR_DATA.clone()},r.prototype._eraseAttrData=function(){return this._eraseAttrDataInternal.bg&=-67108864,this._eraseAttrDataInternal.bg|=67108863&this._curAttrData.bg,this._eraseAttrDataInternal},r.prototype.setgLevel=function(e){this._charsetService.setgLevel(e)},r.prototype.screenAlignmentPattern=function(){var e=new b.CellData;e.content=4194373,e.fg=this._curAttrData.fg,e.bg=this._curAttrData.bg;var t=this._bufferService.buffer;this._setCursor(0,0);for(var r=0;r<this._bufferService.rows;++r){var i=t.ybase+t.y+r,n=t.lines.get(i);n&&(n.fill(e),n.isWrapped=!1)}this._dirtyRowService.markAllDirty(),this._setCursor(0,0)},r}(d.Disposable);r.InputHandler=x},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DEFAULT_CHARSET=t.CHARSETS=void 0,t.CHARSETS={},t.DEFAULT_CHARSET=t.CHARSETS.B,t.CHARSETS[0]={"`":"◆",a:"▒",b:"␉",c:"␌",d:"␍",e:"␊",f:"°",g:"±",h:"␤",i:"␋",j:"┘",k:"┐",l:"┌",m:"└",n:"┼",o:"⎺",p:"⎻",q:"─",r:"⎼",s:"⎽",t:"├",u:"┤",v:"┴",w:"┬",x:"│",y:"≤",z:"≥","{":"π","|":"≠","}":"£","~":"·"},t.CHARSETS.A={"#":"£"},t.CHARSETS.B=void 0,t.CHARSETS[4]={"#":"£","@":"¾","[":"ij","\\":"½","]":"|","{":"¨","|":"f","}":"¼","~":"´"},t.CHARSETS.C=t.CHARSETS[5]={"[":"Ä","\\":"Ö","]":"Å","^":"Ü","`":"é","{":"ä","|":"ö","}":"å","~":"ü"},t.CHARSETS.R={"#":"£","@":"à","[":"°","\\":"ç","]":"§","{":"é","|":"ù","}":"è","~":"¨"},t.CHARSETS.Q={"@":"à","[":"â","\\":"ç","]":"ê","^":"î","`":"ô","{":"é","|":"ù","}":"è","~":"û"},t.CHARSETS.K={"@":"§","[":"Ä","\\":"Ö","]":"Ü","{":"ä","|":"ö","}":"ü","~":"ß"},t.CHARSETS.Y={"#":"£","@":"§","[":"°","\\":"ç","]":"é","`":"ù","{":"à","|":"ò","}":"è","~":"ì"},t.CHARSETS.E=t.CHARSETS[6]={"@":"Ä","[":"Æ","\\":"Ø","]":"Å","^":"Ü","`":"ä","{":"æ","|":"ø","}":"å","~":"ü"},t.CHARSETS.Z={"#":"£","@":"§","[":"¡","\\":"Ñ","]":"¿","{":"°","|":"ñ","}":"ç"},t.CHARSETS.H=t.CHARSETS[7]={"@":"É","[":"Ä","\\":"Ö","]":"Å","^":"Ü","`":"é","{":"ä","|":"ö","}":"å","~":"ü"},t.CHARSETS["="]={"#":"ù","@":"à","[":"é","\\":"ç","]":"ê","^":"î",_:"è","`":"ô","{":"ä","|":"ö","}":"ü","~":"û"}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Params=void 0;var r=function(){function e(e,t){if(void 0===e&&(e=32),void 0===t&&(t=32),this.maxLength=e,this.maxSubParamsLength=t,256<t)throw new Error("maxSubParamsLength must not be greater than 256");this.params=new Int32Array(e),this.length=0,this._subParams=new Int32Array(t),this._subParamsLength=0,this._subParamsIdx=new Uint16Array(e),this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1}return e.fromArray=function(t){var r=new e;if(!t.length)return r;for(var i,n=t[0]instanceof Array?1:0;n<t.length;++n)if((i=t[n])instanceof Array)for(var o=0;o<i.length;++o)r.addSubParam(i[o]);else r.addParam(i);return r},e.prototype.clone=function(){var t=new e(this.maxLength,this.maxSubParamsLength);return t.params.set(this.params),t.length=this.length,t._subParams.set(this._subParams),t._subParamsLength=this._subParamsLength,t._subParamsIdx.set(this._subParamsIdx),t._rejectDigits=this._rejectDigits,t._rejectSubDigits=this._rejectSubDigits,t._digitIsSub=this._digitIsSub,t},e.prototype.toArray=function(){for(var e=[],t=0;t<this.length;++t){e.push(this.params[t]);var r=this._subParamsIdx[t]>>8,i=255&this._subParamsIdx[t];0<i-r&&e.push(Array.prototype.slice.call(this._subParams,r,i))}return e},e.prototype.reset=function(){this.length=0,this._subParamsLength=0,this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1},e.prototype.addParam=function(e){if(this._digitIsSub=!1,this.length>=this.maxLength)this._rejectDigits=!0;else{if(-1>e)throw new Error("values lesser than -1 are not allowed");this._subParamsIdx[this.length]=this._subParamsLength<<8|this._subParamsLength,this.params[this.length++]=2147483647<e?2147483647:e}},e.prototype.addSubParam=function(e){if(this._digitIsSub=!0,this.length)if(this._rejectDigits||this._subParamsLength>=this.maxSubParamsLength)this._rejectSubDigits=!0;else{if(-1>e)throw new Error("values lesser than -1 are not allowed");this._subParams[this._subParamsLength++]=2147483647<e?2147483647:e,this._subParamsIdx[this.length-1]++}},e.prototype.hasSubParams=function(e){return 0<(255&this._subParamsIdx[e])-(this._subParamsIdx[e]>>8)},e.prototype.getSubParams=function(e){var t=this._subParamsIdx[e]>>8,r=255&this._subParamsIdx[e];return 0<r-t?this._subParams.subarray(t,r):null},e.prototype.getSubParamsAll=function(){for(var e={},t=0;t<this.length;++t){var r=this._subParamsIdx[t]>>8,i=255&this._subParamsIdx[t];0<i-r&&(e[t]=this._subParams.slice(r,i))}return e},e.prototype.addDigit=function(e){var t;if(!(this._rejectDigits||!(t=this._digitIsSub?this._subParamsLength:this.length)||this._digitIsSub&&this._rejectSubDigits)){var r=this._digitIsSub?this._subParams:this.params,i=r[t-1];r[t-1]=~i?c(10*i+e,2147483647):e}},e}();t.Params=r},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.OscHandler=t.OscParser=void 0;var i=r(23),n=r(8),o=function(){function e(){this._state=0,this._id=-1,this._handlers=Object.create(null),this._handlerFb=function(){}}return e.prototype.addHandler=function(e,t){void 0===this._handlers[e]&&(this._handlers[e]=[]);var r=this._handlers[e];return r.push(t),{dispose:function(){var e=r.indexOf(t);-1!==e&&r.splice(e,1)}}},e.prototype.setHandler=function(e,t){this._handlers[e]=[t]},e.prototype.clearHandler=function(e){this._handlers[e]&&delete this._handlers[e]},e.prototype.setHandlerFallback=function(e){this._handlerFb=e},e.prototype.dispose=function(){this._handlers=Object.create(null),this._handlerFb=function(){}},e.prototype.reset=function(){2===this._state&&this.end(!1),this._id=-1,this._state=0},e.prototype._start=function(){var e=this._handlers[this._id];if(e)for(var t=e.length-1;0<=t;t--)e[t].start();else this._handlerFb(this._id,"START")},e.prototype._put=function(e,t,r){var i=this._handlers[this._id];if(i)for(var o=i.length-1;0<=o;o--)i[o].put(e,t,r);else this._handlerFb(this._id,"PUT",n.utf32ToString(e,t,r))},e.prototype._end=function(e){var t=this._handlers[this._id];if(t){for(var r=t.length-1;0<=r&&!1===t[r].end(e);r--);for(r--;0<=r;r--)t[r].end(!1)}else this._handlerFb(this._id,"END",e)},e.prototype.start=function(){this.reset(),this._id=-1,this._state=1},e.prototype.put=function(e,t,r){if(3!==this._state){if(1===this._state)for(;t<r;){var i=e[t++];if(59===i){this._state=2,this._start();break}if(48>i||57<i)return void(this._state=3);-1===this._id&&(this._id=0),this._id=10*this._id+i-48}2===this._state&&0<r-t&&this._put(e,t,r)}},e.prototype.end=function(e){0!==this._state&&(3!==this._state&&(1===this._state&&this._start(),this._end(e)),this._id=-1,this._state=0)},e}();t.OscParser=o;var s=function(){function e(e){this._handler=e,this._data="",this._hitLimit=!1}return e.prototype.start=function(){this._data="",this._hitLimit=!1},e.prototype.put=function(e,t,r){this._hitLimit||(this._data+=n.utf32ToString(e,t,r),this._data.length>i.PAYLOAD_LIMIT&&(this._data="",this._hitLimit=!0))},e.prototype.end=function(e){var t;return this._hitLimit?t=!1:e&&(t=this._handler(this._data)),this._data="",this._hitLimit=!1,t},e}();t.OscHandler=s},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PAYLOAD_LIMIT=void 0,t.PAYLOAD_LIMIT=1e7},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DcsHandler=t.DcsParser=void 0;var i=r(8),n=r(21),o=r(23),s=[],a=function(){function e(){this._handlers=Object.create(null),this._active=s,this._ident=0,this._handlerFb=function(){}}return e.prototype.dispose=function(){this._handlers=Object.create(null),this._handlerFb=function(){}},e.prototype.addHandler=function(e,t){void 0===this._handlers[e]&&(this._handlers[e]=[]);var r=this._handlers[e];return r.push(t),{dispose:function(){var e=r.indexOf(t);-1!==e&&r.splice(e,1)}}},e.prototype.setHandler=function(e,t){this._handlers[e]=[t]},e.prototype.clearHandler=function(e){this._handlers[e]&&delete this._handlers[e]},e.prototype.setHandlerFallback=function(e){this._handlerFb=e},e.prototype.reset=function(){this._active.length&&this.unhook(!1),this._active=s,this._ident=0},e.prototype.hook=function(e,t){if(this.reset(),this._ident=e,this._active=this._handlers[e]||s,this._active.length)for(var r=this._active.length-1;0<=r;r--)this._active[r].hook(t);else this._handlerFb(this._ident,"HOOK",t)},e.prototype.put=function(e,t,r){if(this._active.length)for(var n=this._active.length-1;0<=n;n--)this._active[n].put(e,t,r);else this._handlerFb(this._ident,"PUT",i.utf32ToString(e,t,r))},e.prototype.unhook=function(e){if(this._active.length){for(var t=this._active.length-1;0<=t&&!1===this._active[t].unhook(e);t--);for(t--;0<=t;t--)this._active[t].unhook(!1)}else this._handlerFb(this._ident,"UNHOOK",e);this._active=s,this._ident=0},e}();t.DcsParser=a;var c=function(){function e(e){this._handler=e,this._data="",this._hitLimit=!1}return e.prototype.hook=function(e){this._params=e.clone(),this._data="",this._hitLimit=!1},e.prototype.put=function(e,t,r){this._hitLimit||(this._data+=i.utf32ToString(e,t,r),this._data.length>o.PAYLOAD_LIMIT&&(this._data="",this._hitLimit=!0))},e.prototype.unhook=function(e){var t;return this._hitLimit?t=!1:e&&(t=this._handler(this._data,this._params||new n.Params)),this._params=void 0,this._data="",this._hitLimit=!1,t},e}();t.DcsHandler=c},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.removeTerminalFromCache=t.acquireCharAtlas=void 0;var i=r(26),n=r(43),o=[];t.acquireCharAtlas=function(e,t,r,s,a){for(var c,l=i.generateConfig(s,a,e,r),u=0;u<o.length;u++)if(0<=(c=(h=o[u]).ownedBy.indexOf(t))){if(i.configEquals(h.config,l))return h.atlas;1===h.ownedBy.length?(h.atlas.dispose(),o.splice(u,1)):h.ownedBy.splice(c,1);break}for(u=0;u<o.length;u++){var h=o[u];if(i.configEquals(h.config,l))return h.ownedBy.push(t),h.atlas}var f={atlas:new n.DynamicCharAtlas(document,l),config:l,ownedBy:[t]};return o.push(f),f.atlas},t.removeTerminalFromCache=function(e){for(var t,r=0;r<o.length;r++)if(-1!==(t=o[r].ownedBy.indexOf(e))){1===o[r].ownedBy.length?(o[r].atlas.dispose(),o.splice(r,1)):o[r].ownedBy.splice(t,1);break}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.is256Color=t.configEquals=t.generateConfig=void 0;var i=r(3);t.generateConfig=function(e,t,r,i){var n={foreground:i.foreground,background:i.background,cursor:void 0,cursorAccent:void 0,selection:void 0,ansi:i.ansi.slice(0,16)};return{devicePixelRatio:window.devicePixelRatio,scaledCharWidth:e,scaledCharHeight:t,fontFamily:r.fontFamily,fontSize:r.fontSize,fontWeight:r.fontWeight,fontWeightBold:r.fontWeightBold,allowTransparency:r.allowTransparency,colors:n}},t.configEquals=function(e,t){for(var r=0;r<e.colors.ansi.length;r++)if(e.colors.ansi[r].rgba!==t.colors.ansi[r].rgba)return!1;return e.devicePixelRatio===t.devicePixelRatio&&e.fontFamily===t.fontFamily&&e.fontSize===t.fontSize&&e.fontWeight===t.fontWeight&&e.fontWeightBold===t.fontWeightBold&&e.allowTransparency===t.allowTransparency&&e.scaledCharWidth===t.scaledCharWidth&&e.scaledCharHeight===t.scaledCharHeight&&e.colors.foreground===t.colors.foreground&&e.colors.background===t.colors.background},t.is256Color=function(e){return e<i.DEFAULT_COLOR}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ColorManager=t.DEFAULT_ANSI_COLORS=void 0;var i=r(10),n=r(45),s=i.css.toColor("#ffffff"),a=i.css.toColor("#000000"),c=i.css.toColor("#ffffff"),l=i.css.toColor("#000000"),u={css:"rgba(255, 255, 255, 0.3)",rgba:4294967117};t.DEFAULT_ANSI_COLORS=function(){for(var e=[i.css.toColor("#2e3436"),i.css.toColor("#cc0000"),i.css.toColor("#4e9a06"),i.css.toColor("#c4a000"),i.css.toColor("#3465a4"),i.css.toColor("#75507b"),i.css.toColor("#06989a"),i.css.toColor("#d3d7cf"),i.css.toColor("#555753"),i.css.toColor("#ef2929"),i.css.toColor("#8ae234"),i.css.toColor("#fce94f"),i.css.toColor("#729fcf"),i.css.toColor("#ad7fa8"),i.css.toColor("#34e2e2"),i.css.toColor("#eeeeec")],t=[0,95,135,175,215,255],r=0;216>r;r++){var n=t[0|r/36%6],o=t[0|r/6%6],s=t[r%6];e.push({css:i.channels.toCss(n,o,s),rgba:i.channels.toRgba(n,o,s)})}for(r=0;24>r;r++){var a=8+10*r;e.push({css:i.channels.toCss(a,a,a),rgba:i.channels.toRgba(a,a,a)})}return e}();var h=function(){function e(e,r){this.allowTransparency=r;var o=e.createElement("canvas");o.width=1,o.height=1;var h=o.getContext("2d");if(!h)throw new Error("Could not get rendering context");this._ctx=h,this._ctx.globalCompositeOperation="copy",this._litmusColor=this._ctx.createLinearGradient(0,0,1,1),this._contrastCache=new n.ColorContrastCache,this.colors={foreground:s,background:a,cursor:c,cursorAccent:l,selectionTransparent:u,selectionOpaque:i.color.blend(a,u),ansi:t.DEFAULT_ANSI_COLORS.slice(),contrastCache:this._contrastCache}}return e.prototype.onOptionsChange=function(e){"minimumContrastRatio"===e&&this._contrastCache.clear()},e.prototype.setTheme=function(e){void 0===e&&(e={}),this.colors.foreground=this._parseColor(e.foreground,s),this.colors.background=this._parseColor(e.background,a),this.colors.cursor=this._parseColor(e.cursor,c,!0),this.colors.cursorAccent=this._parseColor(e.cursorAccent,l,!0),this.colors.selectionTransparent=this._parseColor(e.selection,u,!0),this.colors.selectionOpaque=i.color.blend(this.colors.background,this.colors.selectionTransparent),i.color.isOpaque(this.colors.selectionTransparent)&&(this.colors.selectionTransparent=i.color.opacity(this.colors.selectionTransparent,.3)),this.colors.ansi[0]=this._parseColor(e.black,t.DEFAULT_ANSI_COLORS[0]),this.colors.ansi[1]=this._parseColor(e.red,t.DEFAULT_ANSI_COLORS[1]),this.colors.ansi[2]=this._parseColor(e.green,t.DEFAULT_ANSI_COLORS[2]),this.colors.ansi[3]=this._parseColor(e.yellow,t.DEFAULT_ANSI_COLORS[3]),this.colors.ansi[4]=this._parseColor(e.blue,t.DEFAULT_ANSI_COLORS[4]),this.colors.ansi[5]=this._parseColor(e.magenta,t.DEFAULT_ANSI_COLORS[5]),this.colors.ansi[6]=this._parseColor(e.cyan,t.DEFAULT_ANSI_COLORS[6]),this.colors.ansi[7]=this._parseColor(e.white,t.DEFAULT_ANSI_COLORS[7]),this.colors.ansi[8]=this._parseColor(e.brightBlack,t.DEFAULT_ANSI_COLORS[8]),this.colors.ansi[9]=this._parseColor(e.brightRed,t.DEFAULT_ANSI_COLORS[9]),this.colors.ansi[10]=this._parseColor(e.brightGreen,t.DEFAULT_ANSI_COLORS[10]),this.colors.ansi[11]=this._parseColor(e.brightYellow,t.DEFAULT_ANSI_COLORS[11]),this.colors.ansi[12]=this._parseColor(e.brightBlue,t.DEFAULT_ANSI_COLORS[12]),this.colors.ansi[13]=this._parseColor(e.brightMagenta,t.DEFAULT_ANSI_COLORS[13]),this.colors.ansi[14]=this._parseColor(e.brightCyan,t.DEFAULT_ANSI_COLORS[14]),this.colors.ansi[15]=this._parseColor(e.brightWhite,t.DEFAULT_ANSI_COLORS[15]),this._contrastCache.clear()},e.prototype._parseColor=function(e,t,r){if(void 0===r&&(r=this.allowTransparency),void 0===e)return t;if(this._ctx.fillStyle=this._litmusColor,this._ctx.fillStyle=e,"string"!=typeof this._ctx.fillStyle)return console.warn("Color: "+e+" is invalid using fallback "+t.css),t;this._ctx.fillRect(0,0,1,1);var n=this._ctx.getImageData(0,0,1,1).data;if(255!==n[3]){if(!r)return console.warn("Color: "+e+" is using transparency, but allowTransparency is false. Using fallback "+t.css+"."),t;var s=this._ctx.fillStyle.substring(5,this._ctx.fillStyle.length-1).split(",").map((function(e){return+e})),a=s[0],c=s[1],l=s[2],u=s[3],h=o(255*u);return{rgba:i.channels.toRgba(a,c,l,h),css:e}}return{css:this._ctx.fillStyle,rgba:i.channels.toRgba(n[0],n[1],n[2],n[3])}},e}();t.ColorManager=h},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.throwIfFalsy=void 0,t.throwIfFalsy=function(e){if(!e)throw new Error("value must not be falsy");return e}},function(e,t,r){"use strict";var i,o=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0}),t.CharacterJoinerRegistry=t.JoinedCellData=void 0;var s=r(6),a=r(3),l=r(4),u=function(e){function t(t,r,i){var n=e.call(this)||this;return n.content=0,n.combinedData="",n.fg=t.fg,n.bg=t.bg,n.combinedData=r,n._width=i,n}return o(t,e),t.prototype.isCombined=function(){return 2097152},t.prototype.getWidth=function(){return this._width},t.prototype.getChars=function(){return this.combinedData},t.prototype.getCode=function(){return 2097151},t.prototype.setFromCharData=function(){throw new Error("not implemented")},t.prototype.getAsCharData=function(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]},t}(s.AttributeData);t.JoinedCellData=u;var h=function(){function e(e){this._bufferService=e,this._characterJoiners=[],this._nextCharacterJoinerId=0,this._workCell=new l.CellData}return e.prototype.registerCharacterJoiner=function(e){var t={id:this._nextCharacterJoinerId++,handler:e};return this._characterJoiners.push(t),t.id},e.prototype.deregisterCharacterJoiner=function(e){for(var t=0;t<this._characterJoiners.length;t++)if(this._characterJoiners[t].id===e)return this._characterJoiners.splice(t,1),!0;return!1},e.prototype.getJoinedCharacters=function(e){if(0===this._characterJoiners.length)return[];var t=this._bufferService.buffer.lines.get(e);if(!t||0===t.length)return[];for(var r=[],i=t.translateToString(!0),n=0,o=0,s=0,c=t.getFg(0),l=t.getBg(0),u=0;u<t.getTrimmedLength();u++)if(t.loadCell(u,this._workCell),0!==this._workCell.getWidth()){if(this._workCell.fg!==c||this._workCell.bg!==l){if(1<u-n)for(var h=this._getJoinedRanges(i,s,o,t,n),f=0;f<h.length;f++)r.push(h[f]);n=u,s=o,c=this._workCell.fg,l=this._workCell.bg}o+=this._workCell.getChars().length||a.WHITESPACE_CELL_CHAR.length}if(1<this._bufferService.cols-n)for(h=this._getJoinedRanges(i,s,o,t,n),f=0;f<h.length;f++)r.push(h[f]);return r},e.prototype._getJoinedRanges=function(t,r,i,n,o){for(var s=t.substring(r,i),a=this._characterJoiners[0].handler(s),c=1;c<this._characterJoiners.length;c++)for(var l=this._characterJoiners[c].handler(s),u=0;u<l.length;u++)e._mergeRanges(a,l[u]);return this._stringRangesToCellRanges(a,n,o),a},e.prototype._stringRangesToCellRanges=function(e,t,r){var i=0,n=!1,o=0,s=e[i];if(s){for(var c=r;c<this._bufferService.cols;c++){var l=t.getWidth(c),u=t.getString(c).length||a.WHITESPACE_CELL_CHAR.length;if(0!==l){if(!n&&s[0]<=o&&(s[0]=c,n=!0),s[1]<=o){if(s[1]=c,!(s=e[++i]))break;s[0]<=o?(s[0]=c,n=!0):n=!1}o+=u}}s&&(s[1]=this._bufferService.cols)}},e._mergeRanges=function(e,t){for(var r,i=!1,o=0;o<e.length;o++)if(r=e[o],i){if(t[1]<=r[0])return e[o-1][1]=t[1],e;if(t[1]<=r[1])return e[o-1][1]=n(t[1],r[1]),e.splice(o,1),e;e.splice(o,1),o--}else{if(t[1]<=r[0])return e.splice(o,0,t),e;if(t[1]<=r[1])return r[0]=c(t[0],r[0]),e;t[0]<r[1]&&(r[0]=c(t[0],r[0]),i=!0)}return i?e[e.length-1][1]=t[1]:e.push(t),e},e}();t.CharacterJoinerRegistry=h},function(e,t){"use strict";function r(e,t){var r=t.getBoundingClientRect();return[e.clientX-r.left,e.clientY-r.top]}Object.defineProperty(t,"__esModule",{value:!0}),t.getRawByteCoords=t.getCoords=t.getCoordsRelativeToElement=void 0,t.getCoordsRelativeToElement=r,t.getCoords=function(e,t,i,o,s,l,u,h){if(s){var f=r(e,t);if(f)return f[0]=a((f[0]+(h?l/2:0))/l),f[1]=a(f[1]/u),f[0]=c(n(f[0],1),i+(h?1:0)),f[1]=c(n(f[1],1),o),f}},t.getRawByteCoords=function(e){if(e)return{x:e[0]+32,y:e[1]+32}}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RenderDebouncer=void 0;var r=function(){function e(e){this._renderCallback=e}return e.prototype.dispose=function(){this._animationFrame&&(window.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)},e.prototype.refresh=function(e,t,r){var i=this;this._rowCount=r,e=void 0===e?0:e,t=void 0===t?this._rowCount-1:t,this._rowStart=void 0===this._rowStart?e:c(this._rowStart,e),this._rowEnd=void 0===this._rowEnd?t:n(this._rowEnd,t),this._animationFrame||(this._animationFrame=window.requestAnimationFrame((function(){return i._innerRefresh()})))},e.prototype._innerRefresh=function(){if(void 0!==this._rowStart&&void 0!==this._rowEnd&&void 0!==this._rowCount){var e=n(this._rowStart,0),t=c(this._rowEnd,this._rowCount-1);this._rowStart=void 0,this._rowEnd=void 0,this._animationFrame=void 0,this._renderCallback(e,t)}},e}();t.RenderDebouncer=r},function(e,t,r){"use strict";var i,n=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0}),t.ScreenDprMonitor=void 0;var o=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._currentDevicePixelRatio=window.devicePixelRatio,t}return n(t,e),t.prototype.setListener=function(e){var t=this;this._listener&&this.clearListener(),this._listener=e,this._outerListener=function(){t._listener&&(t._listener(window.devicePixelRatio,t._currentDevicePixelRatio),t._updateDpr())},this._updateDpr()},t.prototype.dispose=function(){e.prototype.dispose.call(this),this.clearListener()},t.prototype._updateDpr=function(){var e;this._outerListener&&(null===(e=this._resolutionMediaMatchList)||void 0===e||e.removeListener(this._outerListener),this._currentDevicePixelRatio=window.devicePixelRatio,this._resolutionMediaMatchList=window.matchMedia("screen and (resolution: "+window.devicePixelRatio+"dppx)"),this._resolutionMediaMatchList.addListener(this._outerListener))},t.prototype.clearListener=function(){this._resolutionMediaMatchList&&this._listener&&this._outerListener&&(this._resolutionMediaMatchList.removeListener(this._outerListener),this._resolutionMediaMatchList=void 0,this._listener=void 0,this._outerListener=void 0)},t}(r(2).Disposable);t.ScreenDprMonitor=o},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.clone=void 0,t.clone=function e(t,r){if(void 0===r&&(r=5),"object"!=typeof t)return t;var i=Array.isArray(t)?[]:{};for(var n in t)i[n]=1>=r?t[n]:t[n]?e(t[n],r-1):t[n];return i}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Terminal=void 0;var i=r(4),n=r(35),o=r(18),s=r(0),a=r(83),c=function(){function e(e){this._core=new n.Terminal(e),this._addonManager=new a.AddonManager}return e.prototype._checkProposedApi=function(){if(!this._core.optionsService.options.allowProposedApi)throw new Error("You must set the allowProposedApi option to true to use proposed API")},Object.defineProperty(e.prototype,"onCursorMove",{get:function(){return this._core.onCursorMove},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"onLineFeed",{get:function(){return this._core.onLineFeed},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"onSelectionChange",{get:function(){return this._core.onSelectionChange},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"onData",{get:function(){return this._core.onData},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"onBinary",{get:function(){return this._core.onBinary},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"onTitleChange",{get:function(){return this._core.onTitleChange},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"onScroll",{get:function(){return this._core.onScroll},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"onKey",{get:function(){return this._core.onKey},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"onRender",{get:function(){return this._core.onRender},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"onResize",{get:function(){return this._core.onResize},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"element",{get:function(){return this._core.element},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parser",{get:function(){return this._checkProposedApi(),this._parser||(this._parser=new f(this._core)),this._parser},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"unicode",{get:function(){return this._checkProposedApi(),new d(this._core)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"textarea",{get:function(){return this._core.textarea},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"rows",{get:function(){return this._core.rows},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"cols",{get:function(){return this._core.cols},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"buffer",{get:function(){return this._checkProposedApi(),new u(this._core.buffers)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"markers",{get:function(){return this._checkProposedApi(),this._core.markers},enumerable:!1,configurable:!0}),e.prototype.blur=function(){this._core.blur()},e.prototype.focus=function(){this._core.focus()},e.prototype.resize=function(e,t){this._verifyIntegers(e,t),this._core.resize(e,t)},e.prototype.open=function(e){this._core.open(e)},e.prototype.attachCustomKeyEventHandler=function(e){this._core.attachCustomKeyEventHandler(e)},e.prototype.registerLinkMatcher=function(e,t,r){return this._checkProposedApi(),this._core.registerLinkMatcher(e,t,r)},e.prototype.deregisterLinkMatcher=function(e){this._checkProposedApi(),this._core.deregisterLinkMatcher(e)},e.prototype.registerLinkProvider=function(e){return this._checkProposedApi(),this._core.registerLinkProvider(e)},e.prototype.registerCharacterJoiner=function(e){return this._checkProposedApi(),this._core.registerCharacterJoiner(e)},e.prototype.deregisterCharacterJoiner=function(e){this._checkProposedApi(),this._core.deregisterCharacterJoiner(e)},e.prototype.registerMarker=function(e){return this._checkProposedApi(),this._verifyIntegers(e),this._core.addMarker(e)},e.prototype.addMarker=function(e){return this.registerMarker(e)},e.prototype.hasSelection=function(){return this._core.hasSelection()},e.prototype.select=function(e,t,r){this._verifyIntegers(e,t,r),this._core.select(e,t,r)},e.prototype.getSelection=function(){return this._core.getSelection()},e.prototype.getSelectionPosition=function(){return this._core.getSelectionPosition()},e.prototype.clearSelection=function(){this._core.clearSelection()},e.prototype.selectAll=function(){this._core.selectAll()},e.prototype.selectLines=function(e,t){this._verifyIntegers(e,t),this._core.selectLines(e,t)},e.prototype.dispose=function(){this._addonManager.dispose(),this._core.dispose()},e.prototype.scrollLines=function(e){this._verifyIntegers(e),this._core.scrollLines(e)},e.prototype.scrollPages=function(e){this._verifyIntegers(e),this._core.scrollPages(e)},e.prototype.scrollToTop=function(){this._core.scrollToTop()},e.prototype.scrollToBottom=function(){this._core.scrollToBottom()},e.prototype.scrollToLine=function(e){this._verifyIntegers(e),this._core.scrollToLine(e)},e.prototype.clear=function(){this._core.clear()},e.prototype.write=function(e,t){this._core.write(e,t)},e.prototype.writeUtf8=function(e,t){this._core.write(e,t)},e.prototype.writeln=function(e,t){this._core.write(e),this._core.write("\r\n",t)},e.prototype.paste=function(e){this._core.paste(e)},e.prototype.getOption=function(e){return this._core.optionsService.getOption(e)},e.prototype.setOption=function(e,t){this._core.optionsService.setOption(e,t)},e.prototype.refresh=function(e,t){this._verifyIntegers(e,t),this._core.refresh(e,t)},e.prototype.reset=function(){this._core.reset()},e.prototype.loadAddon=function(e){return this._addonManager.loadAddon(this,e)},Object.defineProperty(e,"strings",{get:function(){return o},enumerable:!1,configurable:!0}),e.prototype._verifyIntegers=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var r,i=0,n=e;i<n.length;i++)if((r=n[i])===1/0||isNaN(r)||0!=r%1)throw new Error("This API only accepts integers")},e}();t.Terminal=c;var l=function(){function e(e,t){this._buffer=e,this.type=t}return e.prototype.init=function(e){return this._buffer=e,this},Object.defineProperty(e.prototype,"cursorY",{get:function(){return this._buffer.y},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"cursorX",{get:function(){return this._buffer.x},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"viewportY",{get:function(){return this._buffer.ydisp},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"baseY",{get:function(){return this._buffer.ybase},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"length",{get:function(){return this._buffer.lines.length},enumerable:!1,configurable:!0}),e.prototype.getLine=function(e){var t=this._buffer.lines.get(e);if(t)return new h(t)},e.prototype.getNullCell=function(){return new i.CellData},e}(),u=function(){function e(e){var t=this;this._buffers=e,this._onBufferChange=new s.EventEmitter,this._normal=new l(this._buffers.normal,"normal"),this._alternate=new l(this._buffers.alt,"alternate"),this._buffers.onBufferActivate((function(){return t._onBufferChange.fire(t.active)}))}return Object.defineProperty(e.prototype,"onBufferChange",{get:function(){return this._onBufferChange.event},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"active",{get:function(){if(this._buffers.active===this._buffers.normal)return this.normal;if(this._buffers.active===this._buffers.alt)return this.alternate;throw new Error("Active buffer is neither normal nor alternate")},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"normal",{get:function(){return this._normal.init(this._buffers.normal)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"alternate",{get:function(){return this._alternate.init(this._buffers.alt)},enumerable:!1,configurable:!0}),e}(),h=function(){function e(e){this._line=e}return Object.defineProperty(e.prototype,"isWrapped",{get:function(){return this._line.isWrapped},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"length",{get:function(){return this._line.length},enumerable:!1,configurable:!0}),e.prototype.getCell=function(e,t){if(!(0>e||e>=this._line.length))return t?(this._line.loadCell(e,t),t):this._line.loadCell(e,new i.CellData)},e.prototype.translateToString=function(e,t,r){return this._line.translateToString(e,t,r)},e}(),f=function(){function e(e){this._core=e}return e.prototype.registerCsiHandler=function(e,t){return this._core.addCsiHandler(e,(function(e){return t(e.toArray())}))},e.prototype.addCsiHandler=function(e,t){return this.registerCsiHandler(e,t)},e.prototype.registerDcsHandler=function(e,t){return this._core.addDcsHandler(e,(function(e,r){return t(e,r.toArray())}))},e.prototype.addDcsHandler=function(e,t){return this.registerDcsHandler(e,t)},e.prototype.registerEscHandler=function(e,t){return this._core.addEscHandler(e,t)},e.prototype.addEscHandler=function(e,t){return this.registerEscHandler(e,t)},e.prototype.registerOscHandler=function(e,t){return this._core.addOscHandler(e,t)},e.prototype.addOscHandler=function(e,t){return this.registerOscHandler(e,t)},e}(),d=function(){function e(e){this._core=e}return e.prototype.register=function(e){this._core.unicodeService.register(e)},Object.defineProperty(e.prototype,"versions",{get:function(){return this._core.unicodeService.versions},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"activeVersion",{get:function(){return this._core.unicodeService.activeVersion},set:function(e){this._core.unicodeService.activeVersion=e},enumerable:!1,configurable:!0}),e}()},function(e,r,n){"use strict";var o,s=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0}),r.Terminal=void 0;var c=n(36),l=n(37),u=n(38),h=n(12),f=n(19),d=n(40),p=n(50),_=n(51),v=n(11),g=n(7),y=n(18),b=n(54),S=n(55),m=n(56),C=n(57),w=n(59),E=n(0),x=n(16),L=n(27),A=n(60),R=n(5),O=n(61),k=n(62),T=n(63),P=n(64),D=n(65),M="undefined"==typeof window?null:window.document,I=function(e){function r(t){void 0===t&&(t={});var r=e.call(this,t)||this;return r.browser=v,r._keyDownHandled=!1,r._onCursorMove=new E.EventEmitter,r._onKey=new E.EventEmitter,r._onRender=new E.EventEmitter,r._onSelectionChange=new E.EventEmitter,r._onTitleChange=new E.EventEmitter,r._onFocus=new E.EventEmitter,r._onBlur=new E.EventEmitter,r._onA11yCharEmitter=new E.EventEmitter,r._onA11yTabEmitter=new E.EventEmitter,r._setup(),r.linkifier=r._instantiationService.createInstance(p.Linkifier),r.linkifier2=r.register(r._instantiationService.createInstance(T.Linkifier2)),r.register(r._inputHandler.onRequestBell((function(){return r.bell()}))),r.register(r._inputHandler.onRequestRefreshRows((function(e,t){return r.refresh(e,t)}))),r.register(r._inputHandler.onRequestReset((function(){return r.reset()}))),r.register(r._inputHandler.onRequestScroll((function(e,t){return r.scroll(e,t||void 0)}))),r.register(r._inputHandler.onRequestWindowsOptionsReport((function(e){return r._reportWindowsOptions(e)}))),r.register(E.forwardEvent(r._inputHandler.onCursorMove,r._onCursorMove)),r.register(E.forwardEvent(r._inputHandler.onTitleChange,r._onTitleChange)),r.register(E.forwardEvent(r._inputHandler.onA11yChar,r._onA11yCharEmitter)),r.register(E.forwardEvent(r._inputHandler.onA11yTab,r._onA11yTabEmitter)),r.register(r._bufferService.onResize((function(e){return r._afterResize(e.cols,e.rows)}))),r}return s(r,e),Object.defineProperty(r.prototype,"options",{get:function(){return this.optionsService.options},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"onCursorMove",{get:function(){return this._onCursorMove.event},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"onKey",{get:function(){return this._onKey.event},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"onRender",{get:function(){return this._onRender.event},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"onSelectionChange",{get:function(){return this._onSelectionChange.event},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"onTitleChange",{get:function(){return this._onTitleChange.event},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"onFocus",{get:function(){return this._onFocus.event},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"onBlur",{get:function(){return this._onBlur.event},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"onA11yChar",{get:function(){return this._onA11yCharEmitter.event},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"onA11yTab",{get:function(){return this._onA11yTabEmitter.event},enumerable:!1,configurable:!0}),r.prototype.dispose=function(){var t,r,i;this._isDisposed||(e.prototype.dispose.call(this),null===(t=this._renderService)||void 0===t||t.dispose(),this._customKeyEventHandler=void 0,this.write=function(){},null===(i=null===(r=this.element)||void 0===r?void 0:r.parentNode)||void 0===i||i.removeChild(this.element))},r.prototype._setup=function(){e.prototype._setup.call(this),this._customKeyEventHandler=void 0},Object.defineProperty(r.prototype,"buffer",{get:function(){return this.buffers.active},enumerable:!1,configurable:!0}),r.prototype.focus=function(){this.textarea&&this.textarea.focus({preventScroll:!0})},r.prototype._updateOptions=function(t){var r,i,n,o;switch(e.prototype._updateOptions.call(this,t),t){case"fontFamily":case"fontSize":null===(r=this._renderService)||void 0===r||r.clear(),null===(i=this._charSizeService)||void 0===i||i.measure();break;case"cursorBlink":case"cursorStyle":this.refresh(this.buffer.y,this.buffer.y);break;case"drawBoldTextInBrightColors":case"letterSpacing":case"lineHeight":case"fontWeight":case"fontWeightBold":case"minimumContrastRatio":this._renderService&&(this._renderService.clear(),this._renderService.onResize(this.cols,this.rows),this.refresh(0,this.rows-1));break;case"rendererType":this._renderService&&(this._renderService.setRenderer(this._createRenderer()),this._renderService.onResize(this.cols,this.rows));break;case"scrollback":null===(n=this.viewport)||void 0===n||n.syncScrollArea();break;case"screenReaderMode":this.optionsService.options.screenReaderMode?!this._accessibilityManager&&this._renderService&&(this._accessibilityManager=new m.AccessibilityManager(this,this._renderService)):(null===(o=this._accessibilityManager)||void 0===o||o.dispose(),this._accessibilityManager=void 0);break;case"tabStopWidth":this.buffers.setupTabStops();break;case"theme":this._setTheme(this.optionsService.options.theme)}},r.prototype._onTextAreaFocus=function(e){this._coreService.decPrivateModes.sendFocus&&this._coreService.triggerDataEvent(h.C0.ESC+"[I"),this.updateCursorStyle(e),this.element.classList.add("focus"),this._showCursor(),this._onFocus.fire()},r.prototype.blur=function(){var e;return null===(e=this.textarea)||void 0===e?void 0:e.blur()},r.prototype._onTextAreaBlur=function(){this.textarea.value="",this.refresh(this.buffer.y,this.buffer.y),this._coreService.decPrivateModes.sendFocus&&this._coreService.triggerDataEvent(h.C0.ESC+"[O"),this.element.classList.remove("focus"),this._onBlur.fire()},r.prototype._syncTextArea=function(){if(this.textarea&&this.buffer.isCursorInViewport&&!this._compositionHelper.isComposing){var e=a(this._charSizeService.height*this.optionsService.options.lineHeight),t=this._bufferService.buffer.y*e,r=this._bufferService.buffer.x*this._charSizeService.width;this.textarea.style.left=r+"px",this.textarea.style.top=t+"px",this.textarea.style.width=this._charSizeService.width+"px",this.textarea.style.height=e+"px",this.textarea.style.lineHeight=e+"px",this.textarea.style.zIndex="-5"}},r.prototype._initGlobal=function(){var e=this;this._bindKeys(),this.register(g.addDisposableDomListener(this.element,"copy",(function(t){e.hasSelection()&&u.copyHandler(t,e._selectionService)})));var t=function(t){return u.handlePasteEvent(t,e.textarea,e._coreService)};this.register(g.addDisposableDomListener(this.textarea,"paste",t)),this.register(g.addDisposableDomListener(this.element,"paste",t)),v.isFirefox?this.register(g.addDisposableDomListener(this.element,"mousedown",(function(t){2===t.button&&u.rightClickHandler(t,e.textarea,e.screenElement,e._selectionService,e.options.rightClickSelectsWord)}))):this.register(g.addDisposableDomListener(this.element,"contextmenu",(function(t){u.rightClickHandler(t,e.textarea,e.screenElement,e._selectionService,e.options.rightClickSelectsWord)}))),v.isLinux&&this.register(g.addDisposableDomListener(this.element,"auxclick",(function(t){1===t.button&&u.moveTextAreaUnderMouseCursor(t,e.textarea,e.screenElement)})))},r.prototype._bindKeys=function(){var e=this;this.register(g.addDisposableDomListener(this.textarea,"keyup",(function(t){return e._keyUp(t)}),!0)),this.register(g.addDisposableDomListener(this.textarea,"keydown",(function(t){return e._keyDown(t)}),!0)),this.register(g.addDisposableDomListener(this.textarea,"keypress",(function(t){return e._keyPress(t)}),!0)),this.register(g.addDisposableDomListener(this.textarea,"compositionstart",(function(){return e._compositionHelper.compositionstart()}))),this.register(g.addDisposableDomListener(this.textarea,"compositionupdate",(function(t){return e._compositionHelper.compositionupdate(t)}))),this.register(g.addDisposableDomListener(this.textarea,"compositionend",(function(){return e._compositionHelper.compositionend()}))),this.register(this.onRender((function(){return e._compositionHelper.updateCompositionElements()}))),this.register(this.onRender((function(t){return e._queueLinkification(t.start,t.end)})))},r.prototype.open=function(e){var t=this;if(!e)throw new Error("Terminal requires a parent element.");M.body.contains(e)||this._logService.debug("Terminal.open was called on an element that was not attached to the DOM"),this._document=e.ownerDocument,this.element=this._document.createElement("div"),this.element.dir="ltr",this.element.classList.add("terminal"),this.element.classList.add("xterm"),this.element.setAttribute("tabindex","0"),e.appendChild(this.element);var r=M.createDocumentFragment();this._viewportElement=M.createElement("div"),this._viewportElement.classList.add("xterm-viewport"),r.appendChild(this._viewportElement),this._viewportScrollArea=M.createElement("div"),this._viewportScrollArea.classList.add("xterm-scroll-area"),this._viewportElement.appendChild(this._viewportScrollArea),this.screenElement=M.createElement("div"),this.screenElement.classList.add("xterm-screen"),this._helperContainer=M.createElement("div"),this._helperContainer.classList.add("xterm-helpers"),this.screenElement.appendChild(this._helperContainer),r.appendChild(this.screenElement),this.textarea=M.createElement("textarea"),this.textarea.classList.add("xterm-helper-textarea"),this.textarea.setAttribute("aria-label",y.promptLabel),this.textarea.setAttribute("aria-multiline","false"),this.textarea.setAttribute("autocorrect","off"),this.textarea.setAttribute("autocapitalize","off"),this.textarea.setAttribute("spellcheck","false"),this.textarea.tabIndex=0,this.register(g.addDisposableDomListener(this.textarea,"focus",(function(e){return t._onTextAreaFocus(e)}))),this.register(g.addDisposableDomListener(this.textarea,"blur",(function(){return t._onTextAreaBlur()}))),this._helperContainer.appendChild(this.textarea);var i=this._instantiationService.createInstance(P.CoreBrowserService,this.textarea);this._instantiationService.setService(R.ICoreBrowserService,i),this._charSizeService=this._instantiationService.createInstance(O.CharSizeService,this._document,this._helperContainer),this._instantiationService.setService(R.ICharSizeService,this._charSizeService),this._compositionView=M.createElement("div"),this._compositionView.classList.add("composition-view"),this._compositionHelper=this._instantiationService.createInstance(c.CompositionHelper,this.textarea,this._compositionView),this._helperContainer.appendChild(this._compositionView),this.element.appendChild(r),this._theme=this.options.theme||this._theme,this._colorManager=new L.ColorManager(M,this.options.allowTransparency),this.register(this.optionsService.onOptionChange((function(e){return t._colorManager.onOptionsChange(e)}))),this._colorManager.setTheme(this._theme);var n=this._createRenderer();this._renderService=this.register(this._instantiationService.createInstance(A.RenderService,n,this.rows,this.screenElement)),this._instantiationService.setService(R.IRenderService,this._renderService),this.register(this._renderService.onRenderedBufferChange((function(e){return t._onRender.fire(e)}))),this.onResize((function(e){return t._renderService.resize(e.cols,e.rows)})),this._soundService=this._instantiationService.createInstance(b.SoundService),this._instantiationService.setService(R.ISoundService,this._soundService),this._mouseService=this._instantiationService.createInstance(k.MouseService),this._instantiationService.setService(R.IMouseService,this._mouseService),this.viewport=this._instantiationService.createInstance(l.Viewport,(function(e,r){return t.scrollLines(e,r)}),this._viewportElement,this._viewportScrollArea),this.viewport.onThemeChange(this._colorManager.colors),this.register(this._inputHandler.onRequestSyncScrollBar((function(){return t.viewport.syncScrollArea()}))),this.register(this.viewport),this.register(this.onCursorMove((function(){t._renderService.onCursorMove(),t._syncTextArea()}))),this.register(this.onResize((function(){return t._renderService.onResize(t.cols,t.rows)}))),this.register(this.onBlur((function(){return t._renderService.onBlur()}))),this.register(this.onFocus((function(){return t._renderService.onFocus()}))),this.register(this._renderService.onDimensionsChange((function(){return t.viewport.syncScrollArea()}))),this._selectionService=this.register(this._instantiationService.createInstance(_.SelectionService,this.element,this.screenElement)),this._instantiationService.setService(R.ISelectionService,this._selectionService),this.register(this._selectionService.onRequestScrollLines((function(e){return t.scrollLines(e.amount,e.suppressScrollEvent)}))),this.register(this._selectionService.onSelectionChange((function(){return t._onSelectionChange.fire()}))),this.register(this._selectionService.onRequestRedraw((function(e){return t._renderService.onSelectionChanged(e.start,e.end,e.columnSelectMode)}))),this.register(this._selectionService.onLinuxMouseSelection((function(e){t.textarea.value=e,t.textarea.focus(),t.textarea.select()}))),this.register(this.onScroll((function(){t.viewport.syncScrollArea(),t._selectionService.refresh()}))),this.register(g.addDisposableDomListener(this._viewportElement,"scroll",(function(){return t._selectionService.refresh()}))),this._mouseZoneManager=this._instantiationService.createInstance(S.MouseZoneManager,this.element,this.screenElement),this.register(this._mouseZoneManager),this.register(this.onScroll((function(){return t._mouseZoneManager.clearAll()}))),this.linkifier.attachToDom(this.element,this._mouseZoneManager),this.linkifier2.attachToDom(this.element,this._mouseService,this._renderService),this.register(g.addDisposableDomListener(this.element,"mousedown",(function(e){return t._selectionService.onMouseDown(e)}))),this._coreMouseService.areMouseEventsActive?(this._selectionService.disable(),this.element.classList.add("enable-mouse-events")):this._selectionService.enable(),this.options.screenReaderMode&&(this._accessibilityManager=new m.AccessibilityManager(this,this._renderService)),this._charSizeService.measure(),this.refresh(0,this.rows-1),this._initGlobal(),this.bindMouse()},r.prototype._createRenderer=function(){switch(this.options.rendererType){case"canvas":return this._instantiationService.createInstance(d.Renderer,this._colorManager.colors,this.screenElement,this.linkifier,this.linkifier2);case"dom":return this._instantiationService.createInstance(C.DomRenderer,this._colorManager.colors,this.element,this.screenElement,this._viewportElement,this.linkifier,this.linkifier2);default:throw new Error('Unrecognized rendererType "'+this.options.rendererType+'"')}},r.prototype._setTheme=function(e){var t,r,i;this._theme=e,null===(t=this._colorManager)||void 0===t||t.setTheme(e),null===(r=this._renderService)||void 0===r||r.setColors(this._colorManager.colors),null===(i=this.viewport)||void 0===i||i.onThemeChange(this._colorManager.colors)},r.prototype.bindMouse=function(){function e(e){var t,i,n=r._mouseService.getRawByteCoords(e,r.screenElement,r.cols,r.rows);if(!n)return!1;switch(e.overrideType||e.type){case"mousemove":i=32,void 0===e.buttons?(t=3,void 0!==e.button&&(t=3>e.button?e.button:3)):t=1&e.buttons?0:4&e.buttons?1:2&e.buttons?2:3;break;case"mouseup":i=0,t=3>e.button?e.button:3;break;case"mousedown":i=1,t=3>e.button?e.button:3;break;case"wheel":0!==e.deltaY&&(i=0>e.deltaY?0:1),t=4;break;default:return!1}return!(void 0===i||void 0===t||4<t)&&r._coreMouseService.triggerMouseEvent({col:n.x-33,row:n.y-33,button:t,action:i,ctrl:e.ctrlKey,alt:e.altKey,shift:e.shiftKey})}var t=this,r=this,n=this.element,o={mouseup:null,wheel:null,mousedrag:null,mousemove:null},s=function(r){return e(r),r.buttons||(t._document.removeEventListener("mouseup",o.mouseup),o.mousedrag&&t._document.removeEventListener("mousemove",o.mousedrag)),t.cancel(r)},a=function(r){return e(r),r.preventDefault(),t.cancel(r)},c=function(t){t.buttons&&e(t)},l=function(t){t.buttons||e(t)};this.register(this._coreMouseService.onProtocolChange((function(e){e?("debug"===t.optionsService.options.logLevel&&t._logService.debug("Binding to mouse events:",t._coreMouseService.explainEvents(e)),t.element.classList.add("enable-mouse-events"),t._selectionService.disable()):(t._logService.debug("Unbinding from mouse events."),t.element.classList.remove("enable-mouse-events"),t._selectionService.enable()),8&e?o.mousemove||(n.addEventListener("mousemove",l),o.mousemove=l):(n.removeEventListener("mousemove",o.mousemove),o.mousemove=null),16&e?o.wheel||(n.addEventListener("wheel",a,{passive:!1}),o.wheel=a):(n.removeEventListener("wheel",o.wheel),o.wheel=null),2&e?o.mouseup||(o.mouseup=s):(t._document.removeEventListener("mouseup",o.mouseup),o.mouseup=null),4&e?o.mousedrag||(o.mousedrag=c):(t._document.removeEventListener("mousemove",o.mousedrag),o.mousedrag=null)}))),this._coreMouseService.activeProtocol=this._coreMouseService.activeProtocol,this.register(g.addDisposableDomListener(n,"mousedown",(function(r){if(r.preventDefault(),t.focus(),t._coreMouseService.areMouseEventsActive&&!t._selectionService.shouldForceSelection(r))return e(r),o.mouseup&&t._document.addEventListener("mouseup",o.mouseup),o.mousedrag&&t._document.addEventListener("mousemove",o.mousedrag),t.cancel(r)}))),this.register(g.addDisposableDomListener(n,"wheel",(function(e){if(o.wheel);else if(!t.buffer.hasScrollback){var r=t.viewport.getLinesScrolled(e);if(0===r)return;for(var n=h.C0.ESC+(t._coreService.decPrivateModes.applicationCursorKeys?"O":"[")+(0>e.deltaY?"A":"B"),s="",a=0;a<i(r);a++)s+=n;t._coreService.triggerDataEvent(s,!0)}}),{passive:!0})),this.register(g.addDisposableDomListener(n,"wheel",(function(e){if(!o.wheel)return t.viewport.onWheel(e)?void 0:t.cancel(e)}),{passive:!1})),this.register(g.addDisposableDomListener(n,"touchstart",(function(e){if(!t._coreMouseService.areMouseEventsActive)return t.viewport.onTouchStart(e),t.cancel(e)}),{passive:!0})),this.register(g.addDisposableDomListener(n,"touchmove",(function(e){if(!t._coreMouseService.areMouseEventsActive)return t.viewport.onTouchMove(e)?void 0:t.cancel(e)}),{passive:!1}))},r.prototype.refresh=function(e,t){var r;null===(r=this._renderService)||void 0===r||r.refreshRows(e,t)},r.prototype._queueLinkification=function(e,t){var r;null===(r=this.linkifier)||void 0===r||r.linkifyRows(e,t)},r.prototype.updateCursorStyle=function(e){this._selectionService&&this._selectionService.shouldColumnSelect(e)?this.element.classList.add("column-select"):this.element.classList.remove("column-select")},r.prototype._showCursor=function(){this._coreService.isCursorInitialized||(this._coreService.isCursorInitialized=!0,this.refresh(this.buffer.y,this.buffer.y))},r.prototype.scrollLines=function(t,r){e.prototype.scrollLines.call(this,t,r),this.refresh(0,this.rows-1)},r.prototype.paste=function(e){u.paste(e,this.textarea,this._coreService)},r.prototype.attachCustomKeyEventHandler=function(e){this._customKeyEventHandler=e},r.prototype.registerLinkMatcher=function(e,t,r){var i=this.linkifier.registerLinkMatcher(e,t,r);return this.refresh(0,this.rows-1),i},r.prototype.deregisterLinkMatcher=function(e){this.linkifier.deregisterLinkMatcher(e)&&this.refresh(0,this.rows-1)},r.prototype.registerLinkProvider=function(e){return this.linkifier2.registerLinkProvider(e)},r.prototype.registerCharacterJoiner=function(e){var t=this._renderService.registerCharacterJoiner(e);return this.refresh(0,this.rows-1),t},r.prototype.deregisterCharacterJoiner=function(e){this._renderService.deregisterCharacterJoiner(e)&&this.refresh(0,this.rows-1)},Object.defineProperty(r.prototype,"markers",{get:function(){return this.buffer.markers},enumerable:!1,configurable:!0}),r.prototype.addMarker=function(e){if(this.buffer===this.buffers.normal)return this.buffer.addMarker(this.buffer.ybase+this.buffer.y+e)},r.prototype.hasSelection=function(){return!!this._selectionService&&this._selectionService.hasSelection},r.prototype.select=function(e,t,r){this._selectionService.setSelection(e,t,r)},r.prototype.getSelection=function(){return this._selectionService?this._selectionService.selectionText:""},r.prototype.getSelectionPosition=function(){if(this._selectionService&&this._selectionService.hasSelection)return{startColumn:this._selectionService.selectionStart[0],startRow:this._selectionService.selectionStart[1],endColumn:this._selectionService.selectionEnd[0],endRow:this._selectionService.selectionEnd[1]}},r.prototype.clearSelection=function(){var e;null===(e=this._selectionService)||void 0===e||e.clearSelection()},r.prototype.selectAll=function(){var e;null===(e=this._selectionService)||void 0===e||e.selectAll()},r.prototype.selectLines=function(e,t){var r;null===(r=this._selectionService)||void 0===r||r.selectLines(e,t)},r.prototype._keyDown=function(e){if(this._keyDownHandled=!1,this._customKeyEventHandler&&!1===this._customKeyEventHandler(e))return!1;if(!this._compositionHelper.keydown(e))return this.buffer.ybase!==this.buffer.ydisp&&this.scrollToBottom(),!1;var t=w.evaluateKeyboardEvent(e,this._coreService.decPrivateModes.applicationCursorKeys,this.browser.isMac,this.options.macOptionIsMeta);if(this.updateCursorStyle(e),3===t.type||2===t.type){var r=this.rows-1;return this.scrollLines(2===t.type?-r:r),this.cancel(e,!0)}return 1===t.type&&this.selectAll(),!!this._isThirdLevelShift(this.browser,e)||(t.cancel&&this.cancel(e,!0),!t.key||(t.key!==h.C0.ETX&&t.key!==h.C0.CR||(this.textarea.value=""),this._onKey.fire({key:t.key,domEvent:e}),this._showCursor(),this._coreService.triggerDataEvent(t.key,!0),this.optionsService.options.screenReaderMode?void(this._keyDownHandled=!0):this.cancel(e,!0)))},r.prototype._isThirdLevelShift=function(e,t){var r=e.isMac&&!this.options.macOptionIsMeta&&t.altKey&&!t.ctrlKey&&!t.metaKey||e.isWindows&&t.altKey&&t.ctrlKey&&!t.metaKey;return"keypress"===t.type?r:r&&(!t.keyCode||47<t.keyCode)},r.prototype._keyUp=function(e){this._customKeyEventHandler&&!1===this._customKeyEventHandler(e)||(function(e){return 16===e.keyCode||17===e.keyCode||18===e.keyCode}(e)||this.focus(),this.updateCursorStyle(e))},r.prototype._keyPress=function(e){var r;if(this._keyDownHandled)return!1;if(this._customKeyEventHandler&&!1===this._customKeyEventHandler(e))return!1;if(this.cancel(e),e.charCode)r=e.charCode;else if(null===e.which||void 0===e.which)r=e.keyCode;else{if(0===e.which||0===e.charCode)return!1;r=e.which}return!(!r||(e.altKey||e.ctrlKey||e.metaKey)&&!this._isThirdLevelShift(this.browser,e)||(r=t(r),this._onKey.fire({key:r,domEvent:e}),this._showCursor(),this._coreService.triggerDataEvent(r,!0),0))},r.prototype.bell=function(){this._soundBell()&&this._soundService.playBellSound()},r.prototype.resize=function(t,r){t!==this.cols||r!==this.rows?e.prototype.resize.call(this,t,r):this._charSizeService&&!this._charSizeService.hasValidSize&&this._charSizeService.measure()},r.prototype._afterResize=function(){var e,t;null===(e=this._charSizeService)||void 0===e||e.measure(),null===(t=this.viewport)||void 0===t||t.syncScrollArea(!0)},r.prototype.clear=function(){if(0!==this.buffer.ybase||0!==this.buffer.y){this.buffer.lines.set(0,this.buffer.lines.get(this.buffer.ybase+this.buffer.y)),this.buffer.lines.length=1,this.buffer.ydisp=0,this.buffer.ybase=0,this.buffer.y=0;for(var e=1;e<this.rows;e++)this.buffer.lines.push(this.buffer.getBlankLine(x.DEFAULT_ATTR_DATA));this.refresh(0,this.rows-1),this._onScroll.fire(this.buffer.ydisp)}},r.prototype.reset=function(){var t,r;this.options.rows=this.rows,this.options.cols=this.cols;var i=this._customKeyEventHandler;this._setup(),e.prototype.reset.call(this),null===(t=this._selectionService)||void 0===t||t.reset(),this._customKeyEventHandler=i,this.refresh(0,this.rows-1),null===(r=this.viewport)||void 0===r||r.syncScrollArea()},r.prototype._reportWindowsOptions=function(e){if(this._renderService)switch(e){case f.WindowsOptionsReportType.GET_WIN_SIZE_PIXELS:var t=this._renderService.dimensions.scaledCanvasWidth.toFixed(0),r=this._renderService.dimensions.scaledCanvasHeight.toFixed(0);this._coreService.triggerDataEvent(h.C0.ESC+"[4;"+r+";"+t+"t");break;case f.WindowsOptionsReportType.GET_CELL_SIZE_PIXELS:var i=this._renderService.dimensions.scaledCellWidth.toFixed(0),n=this._renderService.dimensions.scaledCellHeight.toFixed(0);this._coreService.triggerDataEvent(h.C0.ESC+"[6;"+n+";"+i+"t")}},r.prototype.cancel=function(e,t){if(this.options.cancelEvents||t)return e.preventDefault(),e.stopPropagation(),!1},r.prototype._visualBell=function(){return!1},r.prototype._soundBell=function(){return"sound"===this.options.bellStyle},r}(D.CoreTerminal);r.Terminal=I},function(e,t,r){"use strict";var i=this&&this.__decorate||function(e,t,r,i){var n,o=arguments.length,s=3>o?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,i);else for(var a=e.length-1;0<=a;a--)(n=e[a])&&(s=(3>o?n(s):3<o?n(t,r,s):n(t,r))||s);return 3<o&&s&&Object.defineProperty(t,r,s),s},n=this&&this.__param||function(e,t){return function(r,i){t(r,i,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.CompositionHelper=void 0;var o=r(5),s=r(1),c=function(){function e(e,t,r,i,n,o){this._textarea=e,this._compositionView=t,this._bufferService=r,this._optionsService=i,this._charSizeService=n,this._coreService=o,this._isComposing=!1,this._isSendingComposition=!1,this._compositionPosition={start:0,end:0}}return Object.defineProperty(e.prototype,"isComposing",{get:function(){return this._isComposing},enumerable:!1,configurable:!0}),e.prototype.compositionstart=function(){this._isComposing=!0,this._compositionPosition.start=this._textarea.value.length,this._compositionView.textContent="",this._compositionView.classList.add("active")},e.prototype.compositionupdate=function(e){var t=this;this._compositionView.textContent=e.data,this.updateCompositionElements(),setTimeout((function(){t._compositionPosition.end=t._textarea.value.length}),0)},e.prototype.compositionend=function(){this._finalizeComposition(!0)},e.prototype.keydown=function(e){if(this._isComposing||this._isSendingComposition){if(229===e.keyCode)return!1;if(16===e.keyCode||17===e.keyCode||18===e.keyCode)return!1;this._finalizeComposition(!1)}return 229!==e.keyCode||(this._handleAnyTextareaChanges(),!1)},e.prototype._finalizeComposition=function(e){var t=this;if(this._compositionView.classList.remove("active"),this._isComposing=!1,e){var r={start:this._compositionPosition.start,end:this._compositionPosition.end};this._isSendingComposition=!0,setTimeout((function(){var e;t._isSendingComposition&&(t._isSendingComposition=!1,e=t._isComposing?t._textarea.value.substring(r.start,r.end):t._textarea.value.substring(r.start),t._coreService.triggerDataEvent(e,!0))}),0)}else{this._isSendingComposition=!1;var i=this._textarea.value.substring(this._compositionPosition.start,this._compositionPosition.end);this._coreService.triggerDataEvent(i,!0)}},e.prototype._handleAnyTextareaChanges=function(){var e=this,t=this._textarea.value;setTimeout((function(){if(!e._isComposing){var r=e._textarea.value.replace(t,"");0<r.length&&e._coreService.triggerDataEvent(r,!0)}}),0)},e.prototype.updateCompositionElements=function(e){var t=this;if(this._isComposing){if(this._bufferService.buffer.isCursorInViewport){var r=a(this._charSizeService.height*this._optionsService.options.lineHeight),i=this._bufferService.buffer.y*r,n=this._bufferService.buffer.x*this._charSizeService.width;this._compositionView.style.left=n+"px",this._compositionView.style.top=i+"px",this._compositionView.style.height=r+"px",this._compositionView.style.lineHeight=r+"px",this._compositionView.style.fontFamily=this._optionsService.options.fontFamily,this._compositionView.style.fontSize=this._optionsService.options.fontSize+"px";var o=this._compositionView.getBoundingClientRect();this._textarea.style.left=n+"px",this._textarea.style.top=i+"px",this._textarea.style.width=o.width+"px",this._textarea.style.height=o.height+"px",this._textarea.style.lineHeight=o.height+"px"}e||setTimeout((function(){return t.updateCompositionElements(!0)}),0)}},i([n(2,s.IBufferService),n(3,s.IOptionsService),n(4,o.ICharSizeService),n(5,s.ICoreService)],e)}();t.CompositionHelper=c},function(e,t,r){"use strict";var n,a=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),c=this&&this.__decorate||function(e,t,r,i){var n,o=arguments.length,s=3>o?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,i);else for(var a=e.length-1;0<=a;a--)(n=e[a])&&(s=(3>o?n(s):3<o?n(t,r,s):n(t,r))||s);return 3<o&&s&&Object.defineProperty(t,r,s),s},l=this&&this.__param||function(e,t){return function(r,i){t(r,i,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.Viewport=void 0;var u=r(2),h=r(7),f=r(5),d=r(1),p=function(e){function t(t,r,i,n,o,s,a){var c=e.call(this)||this;return c._scrollLines=t,c._viewportElement=r,c._scrollArea=i,c._bufferService=n,c._optionsService=o,c._charSizeService=s,c._renderService=a,c.scrollBarWidth=0,c._currentRowHeight=0,c._lastRecordedBufferLength=0,c._lastRecordedViewportHeight=0,c._lastRecordedBufferHeight=0,c._lastTouchY=0,c._lastScrollTop=0,c._wheelPartialScroll=0,c._refreshAnimationFrame=null,c._ignoreNextScrollEvent=!1,c.scrollBarWidth=c._viewportElement.offsetWidth-c._scrollArea.offsetWidth||15,c.register(h.addDisposableDomListener(c._viewportElement,"scroll",c._onScroll.bind(c))),setTimeout((function(){return c.syncScrollArea()}),0),c}return a(t,e),t.prototype.onThemeChange=function(e){this._viewportElement.style.backgroundColor=e.background.css},t.prototype._refresh=function(e){var t=this;return e?(this._innerRefresh(),void(null!==this._refreshAnimationFrame&&cancelAnimationFrame(this._refreshAnimationFrame))):void(null===this._refreshAnimationFrame&&(this._refreshAnimationFrame=requestAnimationFrame((function(){return t._innerRefresh()}))))},t.prototype._innerRefresh=function(){if(0<this._charSizeService.height){this._currentRowHeight=this._renderService.dimensions.scaledCellHeight/window.devicePixelRatio,this._lastRecordedViewportHeight=this._viewportElement.offsetHeight;var e=o(this._currentRowHeight*this._lastRecordedBufferLength)+(this._lastRecordedViewportHeight-this._renderService.dimensions.canvasHeight);this._lastRecordedBufferHeight!==e&&(this._lastRecordedBufferHeight=e,this._scrollArea.style.height=this._lastRecordedBufferHeight+"px")}var t=this._bufferService.buffer.ydisp*this._currentRowHeight;this._viewportElement.scrollTop!==t&&(this._ignoreNextScrollEvent=!0,this._viewportElement.scrollTop=t),this._refreshAnimationFrame=null},t.prototype.syncScrollArea=function(e){if(void 0===e&&(e=!1),this._lastRecordedBufferLength!==this._bufferService.buffer.lines.length)return this._lastRecordedBufferLength=this._bufferService.buffer.lines.length,void this._refresh(e);if(this._lastRecordedViewportHeight===this._renderService.dimensions.canvasHeight){var t=this._bufferService.buffer.ydisp*this._currentRowHeight;this._lastScrollTop===t&&this._lastScrollTop===this._viewportElement.scrollTop&&this._renderService.dimensions.scaledCellHeight/window.devicePixelRatio===this._currentRowHeight||this._refresh(e)}else this._refresh(e)},t.prototype._onScroll=function(){if(this._lastScrollTop=this._viewportElement.scrollTop,this._viewportElement.offsetParent)if(this._ignoreNextScrollEvent)this._ignoreNextScrollEvent=!1;else{var e=o(this._lastScrollTop/this._currentRowHeight)-this._bufferService.buffer.ydisp;this._scrollLines(e,!0)}},t.prototype._bubbleScroll=function(e,t){var r=this._viewportElement.scrollTop+this._lastRecordedViewportHeight;return!(0>t&&0!==this._viewportElement.scrollTop||0<t&&r<this._lastRecordedBufferHeight)||(e.cancelable&&e.preventDefault(),!1)},t.prototype.onWheel=function(e){var t=this._getPixelsScrolled(e);return 0!==t&&(this._viewportElement.scrollTop+=t,this._bubbleScroll(e,t))},t.prototype._getPixelsScrolled=function(e){if(0===e.deltaY)return 0;var t=this._applyScrollModifier(e.deltaY,e);return e.deltaMode===WheelEvent.DOM_DELTA_LINE?t*=this._currentRowHeight:e.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(t*=this._currentRowHeight*this._bufferService.rows),t},t.prototype.getLinesScrolled=function(e){if(0===e.deltaY)return 0;var t=this._applyScrollModifier(e.deltaY,e);return e.deltaMode===WheelEvent.DOM_DELTA_PIXEL?(t/=this._currentRowHeight+0,this._wheelPartialScroll+=t,t=s(i(this._wheelPartialScroll))*(0<this._wheelPartialScroll?1:-1),this._wheelPartialScroll%=1):e.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(t*=this._bufferService.rows),t},t.prototype._applyScrollModifier=function(e,t){var r=this._optionsService.options.fastScrollModifier;return"alt"===r&&t.altKey||"ctrl"===r&&t.ctrlKey||"shift"===r&&t.shiftKey?e*this._optionsService.options.fastScrollSensitivity*this._optionsService.options.scrollSensitivity:e*this._optionsService.options.scrollSensitivity},t.prototype.onTouchStart=function(e){this._lastTouchY=e.touches[0].pageY},t.prototype.onTouchMove=function(e){var t=this._lastTouchY-e.touches[0].pageY;return this._lastTouchY=e.touches[0].pageY,0!=t&&(this._viewportElement.scrollTop+=t,this._bubbleScroll(e,t))},c([l(3,d.IBufferService),l(4,d.IOptionsService),l(5,f.ICharSizeService),l(6,f.IRenderService)],t)}(u.Disposable);t.Viewport=p},function(e,t){"use strict";function r(e){return e.replace(/\r?\n/g,"\r")}function i(e,t){return t?"[200~"+e+"[201~":e}function n(e,t,n){e=i(e=r(e),n.decPrivateModes.bracketedPasteMode),n.triggerDataEvent(e,!0),t.value=""}function o(e,t,r){var i=r.getBoundingClientRect(),n=e.clientX-i.left-10,o=e.clientY-i.top-10;t.style.width="20px",t.style.height="20px",t.style.left=n+"px",t.style.top=o+"px",t.style.zIndex="1000",t.focus()}Object.defineProperty(t,"__esModule",{value:!0}),t.rightClickHandler=t.moveTextAreaUnderMouseCursor=t.paste=t.handlePasteEvent=t.copyHandler=t.bracketTextForPaste=t.prepareTextForTerminal=void 0,t.prepareTextForTerminal=r,t.bracketTextForPaste=i,t.copyHandler=function(e,t){e.clipboardData&&e.clipboardData.setData("text/plain",t.selectionText),e.preventDefault()},t.handlePasteEvent=function(e,t,r){e.stopPropagation(),e.clipboardData&&n(e.clipboardData.getData("text/plain"),t,r)},t.paste=n,t.moveTextAreaUnderMouseCursor=o,t.rightClickHandler=function(e,t,r,i,n){o(e,t,r),n&&!i.isClickInSelection(e)&&i.selectWordAtCursor(e),t.value=i.selectionText,t.select()}},function(e,r,i){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0}),r.EscapeSequenceParser=r.VT500_TRANSITION_TABLE=r.TransitionTable=void 0;var s=i(2),a=i(15),c=i(21),l=i(22),u=i(24),h=function(){function e(e){this.table=new Uint8Array(e)}return e.prototype.setDefault=function(e,t){a.fill(this.table,e<<4|t)},e.prototype.add=function(e,t,r,i){this.table[t<<8|e]=r<<4|i},e.prototype.addMany=function(e,t,r,i){for(var n=0;n<e.length;n++)this.table[t<<8|e[n]]=r<<4|i},e}();r.TransitionTable=h,r.VT500_TRANSITION_TABLE=function(){var e=new h(4095),t=Array.apply(null,Array(256)).map((function(e,t){return t})),r=function(e,r){return t.slice(e,r)},i=r(32,127),n=r(0,24);n.push(25),n.push.apply(n,r(28,32));var o,s=r(0,14);for(o in e.setDefault(1,0),e.addMany(i,0,2,0),s)e.addMany([24,26,153,154],o,3,0),e.addMany(r(128,144),o,3,0),e.addMany(r(144,152),o,3,0),e.add(156,o,0,0),e.add(27,o,11,1),e.add(157,o,4,8),e.addMany([152,158,159],o,0,7),e.add(155,o,11,3),e.add(144,o,11,9);return e.addMany(n,0,3,0),e.addMany(n,1,3,1),e.add(127,1,0,1),e.addMany(n,8,0,8),e.addMany(n,3,3,3),e.add(127,3,0,3),e.addMany(n,4,3,4),e.add(127,4,0,4),e.addMany(n,6,3,6),e.addMany(n,5,3,5),e.add(127,5,0,5),e.addMany(n,2,3,2),e.add(127,2,0,2),e.add(93,1,4,8),e.addMany(i,8,5,8),e.add(127,8,5,8),e.addMany([156,27,24,26,7],8,6,0),e.addMany(r(28,32),8,0,8),e.addMany([88,94,95],1,0,7),e.addMany(i,7,0,7),e.addMany(n,7,0,7),e.add(156,7,0,0),e.add(127,7,0,7),e.add(91,1,11,3),e.addMany(r(64,127),3,7,0),e.addMany(r(48,60),3,8,4),e.addMany([60,61,62,63],3,9,4),e.addMany(r(48,60),4,8,4),e.addMany(r(64,127),4,7,0),e.addMany([60,61,62,63],4,0,6),e.addMany(r(32,64),6,0,6),e.add(127,6,0,6),e.addMany(r(64,127),6,0,0),e.addMany(r(32,48),3,9,5),e.addMany(r(32,48),5,9,5),e.addMany(r(48,64),5,0,6),e.addMany(r(64,127),5,7,0),e.addMany(r(32,48),4,9,5),e.addMany(r(32,48),1,9,2),e.addMany(r(32,48),2,9,2),e.addMany(r(48,127),2,10,0),e.addMany(r(48,80),1,10,0),e.addMany(r(81,88),1,10,0),e.addMany([89,90,92],1,10,0),e.addMany(r(96,127),1,10,0),e.add(80,1,11,9),e.addMany(n,9,0,9),e.add(127,9,0,9),e.addMany(r(28,32),9,0,9),e.addMany(r(32,48),9,9,12),e.addMany(r(48,60),9,8,10),e.addMany([60,61,62,63],9,9,10),e.addMany(n,11,0,11),e.addMany(r(32,128),11,0,11),e.addMany(r(28,32),11,0,11),e.addMany(n,10,0,10),e.add(127,10,0,10),e.addMany(r(28,32),10,0,10),e.addMany(r(48,60),10,8,10),e.addMany([60,61,62,63],10,0,11),e.addMany(r(32,48),10,9,12),e.addMany(n,12,0,12),e.add(127,12,0,12),e.addMany(r(28,32),12,0,12),e.addMany(r(32,48),12,9,12),e.addMany(r(48,64),12,0,11),e.addMany(r(64,127),12,12,13),e.addMany(r(64,127),10,12,13),e.addMany(r(64,127),9,12,13),e.addMany(n,13,13,13),e.addMany(i,13,13,13),e.add(127,13,0,13),e.addMany([27,156,24,26],13,14,0),e.add(160,0,2,0),e.add(160,8,5,8),e.add(160,6,0,6),e.add(160,11,0,11),e.add(160,13,13,13),e}();var f=function(e){function i(t){void 0===t&&(t=r.VT500_TRANSITION_TABLE);var i=e.call(this)||this;return i._transitions=t,i.initialState=0,i.currentState=i.initialState,i._params=new c.Params,i._params.addParam(0),i._collect=0,i.precedingCodepoint=0,i._printHandlerFb=function(){},i._executeHandlerFb=function(){},i._csiHandlerFb=function(){},i._escHandlerFb=function(){},i._errorHandlerFb=function(e){return e},i._printHandler=i._printHandlerFb,i._executeHandlers=Object.create(null),i._csiHandlers=Object.create(null),i._escHandlers=Object.create(null),i._oscParser=new l.OscParser,i._dcsParser=new u.DcsParser,i._errorHandler=i._errorHandlerFb,i.setEscHandler({final:"\\"},(function(){})),i}return o(i,e),i.prototype._identifier=function(e,t){void 0===t&&(t=[64,126]);var r=0;if(e.prefix){if(1<e.prefix.length)throw new Error("only one byte as prefix supported");if((r=e.prefix.charCodeAt(0))&&60>r||63<r)throw new Error("prefix must be in range 0x3c .. 0x3f")}if(e.intermediates){if(2<e.intermediates.length)throw new Error("only two bytes as intermediates are supported");for(var i,n=0;n<e.intermediates.length;++n){if(32>(i=e.intermediates.charCodeAt(n))||47<i)throw new Error("intermediate must be in range 0x20 .. 0x2f");r<<=8,r|=i}}if(1!==e.final.length)throw new Error("final must be a single byte");var o=e.final.charCodeAt(0);if(t[0]>o||o>t[1])throw new Error("final must be in range "+t[0]+" .. "+t[1]);return(r<<=8)|o},i.prototype.identToString=function(e){for(var r=[];e;)r.push(t(255&e)),e>>=8;return r.reverse().join("")},i.prototype.dispose=function(){this._csiHandlers=Object.create(null),this._executeHandlers=Object.create(null),this._escHandlers=Object.create(null),this._oscParser.dispose(),this._dcsParser.dispose()},i.prototype.setPrintHandler=function(e){this._printHandler=e},i.prototype.clearPrintHandler=function(){this._printHandler=this._printHandlerFb},i.prototype.addEscHandler=function(e,t){var r=this._identifier(e,[48,126]);void 0===this._escHandlers[r]&&(this._escHandlers[r]=[]);var i=this._escHandlers[r];return i.push(t),{dispose:function(){var e=i.indexOf(t);-1!==e&&i.splice(e,1)}}},i.prototype.setEscHandler=function(e,t){this._escHandlers[this._identifier(e,[48,126])]=[t]},i.prototype.clearEscHandler=function(e){this._escHandlers[this._identifier(e,[48,126])]&&delete this._escHandlers[this._identifier(e,[48,126])]},i.prototype.setEscHandlerFallback=function(e){this._escHandlerFb=e},i.prototype.setExecuteHandler=function(e,t){this._executeHandlers[e.charCodeAt(0)]=t},i.prototype.clearExecuteHandler=function(e){this._executeHandlers[e.charCodeAt(0)]&&delete this._executeHandlers[e.charCodeAt(0)]},i.prototype.setExecuteHandlerFallback=function(e){this._executeHandlerFb=e},i.prototype.addCsiHandler=function(e,t){var r=this._identifier(e);void 0===this._csiHandlers[r]&&(this._csiHandlers[r]=[]);var i=this._csiHandlers[r];return i.push(t),{dispose:function(){var e=i.indexOf(t);-1!==e&&i.splice(e,1)}}},i.prototype.setCsiHandler=function(e,t){this._csiHandlers[this._identifier(e)]=[t]},i.prototype.clearCsiHandler=function(e){this._csiHandlers[this._identifier(e)]&&delete this._csiHandlers[this._identifier(e)]},i.prototype.setCsiHandlerFallback=function(e){this._csiHandlerFb=e},i.prototype.addDcsHandler=function(e,t){return this._dcsParser.addHandler(this._identifier(e),t)},i.prototype.setDcsHandler=function(e,t){this._dcsParser.setHandler(this._identifier(e),t)},i.prototype.clearDcsHandler=function(e){this._dcsParser.clearHandler(this._identifier(e))},i.prototype.setDcsHandlerFallback=function(e){this._dcsParser.setHandlerFallback(e)},i.prototype.addOscHandler=function(e,t){return this._oscParser.addHandler(e,t)},i.prototype.setOscHandler=function(e,t){this._oscParser.setHandler(e,t)},i.prototype.clearOscHandler=function(e){this._oscParser.clearHandler(e)},i.prototype.setOscHandlerFallback=function(e){this._oscParser.setHandlerFallback(e)},i.prototype.setErrorHandler=function(e){this._errorHandler=e},i.prototype.clearErrorHandler=function(){this._errorHandler=this._errorHandlerFb},i.prototype.reset=function(){this.currentState=this.initialState,this._oscParser.reset(),this._dcsParser.reset(),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingCodepoint=0},i.prototype.parse=function(e,t){for(var r=0,i=0,n=this.currentState,o=this._oscParser,s=this._dcsParser,a=this._collect,c=this._params,l=this._transitions.table,u=0;u<t;++u){switch((i=l[n<<8|(160>(r=e[u])?r:160)])>>4){case 2:for(var h=u+1;;++h){if(h>=t||32>(r=e[h])||126<r&&160>r){this._printHandler(e,u,h),u=h-1;break}if(++h>=t||32>(r=e[h])||126<r&&160>r){this._printHandler(e,u,h),u=h-1;break}if(++h>=t||32>(r=e[h])||126<r&&160>r){this._printHandler(e,u,h),u=h-1;break}if(++h>=t||32>(r=e[h])||126<r&&160>r){this._printHandler(e,u,h),u=h-1;break}}break;case 3:this._executeHandlers[r]?this._executeHandlers[r]():this._executeHandlerFb(r),this.precedingCodepoint=0;break;case 0:break;case 1:if(this._errorHandler({position:u,code:r,currentState:n,collect:a,params:c,abort:!1}).abort)return;break;case 7:for(var f=this._csiHandlers[a<<8|r],d=f?f.length-1:-1;0<=d&&!1===f[d](c);d--);0>d&&this._csiHandlerFb(a<<8|r,c),this.precedingCodepoint=0;break;case 8:do{59===r?c.addParam(0):58===r?c.addSubParam(-1):c.addDigit(r-48)}while(++u<t&&47<(r=e[u])&&60>r);u--;break;case 9:a<<=8,a|=r;break;case 10:for(var p=this._escHandlers[a<<8|r],_=p?p.length-1:-1;0<=_&&!1===p[_]();_--);0>_&&this._escHandlerFb(a<<8|r),this.precedingCodepoint=0;break;case 11:c.reset(),c.addParam(0),a=0;break;case 12:s.hook(a<<8|r,c);break;case 13:for(var v=u+1;;++v)if(v>=t||24===(r=e[v])||26===r||27===r||127<r&&160>r){s.put(e,u,v),u=v-1;break}break;case 14:s.unhook(24!==r&&26!==r),27===r&&(i|=1),c.reset(),c.addParam(0),a=0,this.precedingCodepoint=0;break;case 4:o.start();break;case 5:for(var g=u+1;;g++)if(g>=t||32>(r=e[g])||127<r&&159>=r){o.put(e,u,g),u=g-1;break}break;case 6:o.end(24!==r&&26!==r),27===r&&(i|=1),c.reset(),c.addParam(0),a=0,this.precedingCodepoint=0}n=15&i}this._collect=a,this.currentState=n},i}(s.Disposable);r.EscapeSequenceParser=f},function(e,t,r){"use strict";var i,n=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),c=this&&this.__decorate||function(e,t,r,i){var n,o=arguments.length,s=3>o?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,i);else for(var a=e.length-1;0<=a;a--)(n=e[a])&&(s=(3>o?n(s):3<o?n(t,r,s):n(t,r))||s);return 3<o&&s&&Object.defineProperty(t,r,s),s},l=this&&this.__param||function(e,t){return function(r,i){t(r,i,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.Renderer=void 0;var u=r(41),h=r(47),f=r(48),d=r(49),p=r(29),_=r(2),v=r(5),g=r(1),y=r(25),b=r(0),S=1,m=function(e){function t(t,r,i,n,o,s,a,c,l){var _=e.call(this)||this;_._colors=t,_._screenElement=r,_._bufferService=o,_._charSizeService=s,_._optionsService=a,_._id=S++,_._onRequestRedraw=new b.EventEmitter;var v=_._optionsService.options.allowTransparency;return _._characterJoinerRegistry=new p.CharacterJoinerRegistry(_._bufferService),_._renderLayers=[new u.TextRenderLayer(_._screenElement,0,_._colors,_._characterJoinerRegistry,v,_._id,_._bufferService,a),new h.SelectionRenderLayer(_._screenElement,1,_._colors,_._id,_._bufferService,a),new d.LinkRenderLayer(_._screenElement,2,_._colors,_._id,i,n,_._bufferService,a),new f.CursorRenderLayer(_._screenElement,3,_._colors,_._id,_._onRequestRedraw,_._bufferService,a,c,l)],_.dimensions={scaledCharWidth:0,scaledCharHeight:0,scaledCellWidth:0,scaledCellHeight:0,scaledCharLeft:0,scaledCharTop:0,scaledCanvasWidth:0,scaledCanvasHeight:0,canvasWidth:0,canvasHeight:0,actualCellWidth:0,actualCellHeight:0},_._devicePixelRatio=window.devicePixelRatio,_._updateDimensions(),_.onOptionsChanged(),_}return n(t,e),Object.defineProperty(t.prototype,"onRequestRedraw",{get:function(){return this._onRequestRedraw.event},enumerable:!1,configurable:!0}),t.prototype.dispose=function(){for(var t=0,r=this._renderLayers;t<r.length;t++)r[t].dispose();e.prototype.dispose.call(this),y.removeTerminalFromCache(this._id)},t.prototype.onDevicePixelRatioChange=function(){this._devicePixelRatio!==window.devicePixelRatio&&(this._devicePixelRatio=window.devicePixelRatio,this.onResize(this._bufferService.cols,this._bufferService.rows))},t.prototype.setColors=function(e){this._colors=e;for(var t,r=0,i=this._renderLayers;r<i.length;r++)(t=i[r]).setColors(this._colors),t.reset()},t.prototype.onResize=function(){this._updateDimensions();for(var e=0,t=this._renderLayers;e<t.length;e++)t[e].resize(this.dimensions);this._screenElement.style.width=this.dimensions.canvasWidth+"px",this._screenElement.style.height=this.dimensions.canvasHeight+"px"},t.prototype.onCharSizeChanged=function(){this.onResize(this._bufferService.cols,this._bufferService.rows)},t.prototype.onBlur=function(){this._runOperation((function(e){return e.onBlur()}))},t.prototype.onFocus=function(){this._runOperation((function(e){return e.onFocus()}))},t.prototype.onSelectionChanged=function(e,t,r){void 0===r&&(r=!1),this._runOperation((function(i){return i.onSelectionChanged(e,t,r)}))},t.prototype.onCursorMove=function(){this._runOperation((function(e){return e.onCursorMove()}))},t.prototype.onOptionsChanged=function(){this._runOperation((function(e){return e.onOptionsChanged()}))},t.prototype.clear=function(){this._runOperation((function(e){return e.reset()}))},t.prototype._runOperation=function(e){for(var t=0,r=this._renderLayers;t<r.length;t++)e(r[t])},t.prototype.renderRows=function(e,t){for(var r=0,i=this._renderLayers;r<i.length;r++)i[r].onGridChanged(e,t)},t.prototype._updateDimensions=function(){this._charSizeService.hasValidSize&&(this.dimensions.scaledCharWidth=s(this._charSizeService.width*window.devicePixelRatio),this.dimensions.scaledCharHeight=a(this._charSizeService.height*window.devicePixelRatio),this.dimensions.scaledCellHeight=s(this.dimensions.scaledCharHeight*this._optionsService.options.lineHeight),this.dimensions.scaledCharTop=1===this._optionsService.options.lineHeight?0:o((this.dimensions.scaledCellHeight-this.dimensions.scaledCharHeight)/2),this.dimensions.scaledCellWidth=this.dimensions.scaledCharWidth+o(this._optionsService.options.letterSpacing),this.dimensions.scaledCharLeft=s(this._optionsService.options.letterSpacing/2),this.dimensions.scaledCanvasHeight=this._bufferService.rows*this.dimensions.scaledCellHeight,this.dimensions.scaledCanvasWidth=this._bufferService.cols*this.dimensions.scaledCellWidth,this.dimensions.canvasHeight=o(this.dimensions.scaledCanvasHeight/window.devicePixelRatio),this.dimensions.canvasWidth=o(this.dimensions.scaledCanvasWidth/window.devicePixelRatio),this.dimensions.actualCellHeight=this.dimensions.canvasHeight/this._bufferService.rows,this.dimensions.actualCellWidth=this.dimensions.canvasWidth/this._bufferService.cols)},t.prototype.registerCharacterJoiner=function(e){return this._characterJoinerRegistry.registerCharacterJoiner(e)},t.prototype.deregisterCharacterJoiner=function(e){return this._characterJoinerRegistry.deregisterCharacterJoiner(e)},c([l(4,g.IBufferService),l(5,v.ICharSizeService),l(6,g.IOptionsService),l(7,g.ICoreService),l(8,v.ICoreBrowserService)],t)}(_.Disposable);t.Renderer=m},function(e,t,r){"use strict";var i,n=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0}),t.TextRenderLayer=void 0;var o=r(42),a=r(13),c=r(6),l=r(3),u=r(29),h=r(4),f=function(e){function t(t,r,i,n,s,a,c,l){var u=e.call(this,t,"text",r,s,i,a,c,l)||this;return u._characterWidth=0,u._characterFont="",u._characterOverlapCache={},u._workCell=new h.CellData,u._state=new o.GridCache,u._characterJoinerRegistry=n,u}return n(t,e),t.prototype.resize=function(t){e.prototype.resize.call(this,t);var r=this._getFont(!1,!1);this._characterWidth===t.scaledCharWidth&&this._characterFont===r||(this._characterWidth=t.scaledCharWidth,this._characterFont=r,this._characterOverlapCache={}),this._state.clear(),this._state.resize(this._bufferService.cols,this._bufferService.rows)},t.prototype.reset=function(){this._state.clear(),this._clearAll()},t.prototype._forEachCell=function(e,t,r,i){for(var n=e;n<=t;n++)for(var o=n+this._bufferService.buffer.ydisp,s=this._bufferService.buffer.lines.get(o),a=r?r.getJoinedCharacters(o):[],c=0;c<this._bufferService.cols;c++){s.loadCell(c,this._workCell);var h=this._workCell,f=!1,d=c;if(0!==h.getWidth()){if(0<a.length&&c===a[0][0]){f=!0;var p=a.shift();h=new u.JoinedCellData(this._workCell,s.translateToString(!0,p[0],p[1]),p[1]-p[0]),d=p[1]-1}!f&&this._isOverlapping(h)&&d<s.length-1&&s.getCodePoint(d+1)===l.NULL_CELL_CODE&&(h.content&=-12582913,h.content|=8388608),i(h,c,n),c=d}}},t.prototype._drawBackground=function(e,t){var r=this,i=this._ctx,n=this._bufferService.cols,o=0,s=0,a=null;i.save(),this._forEachCell(e,t,null,(function(e,t,l){var u=null;e.isInverse()?u=e.isFgDefault()?r._colors.foreground.css:e.isFgRGB()?"rgb("+c.AttributeData.toColorRGB(e.getFgColor()).join(",")+")":r._colors.ansi[e.getFgColor()].css:e.isBgRGB()?u="rgb("+c.AttributeData.toColorRGB(e.getBgColor()).join(",")+")":e.isBgPalette()&&(u=r._colors.ansi[e.getBgColor()].css),null===a&&(o=t,s=l),l===s?a!==u&&(i.fillStyle=a||"",r._fillCells(o,s,t-o,1),o=t,s=l):(i.fillStyle=a||"",r._fillCells(o,s,n-o,1),o=t,s=l),a=u})),null!==a&&(i.fillStyle=a,this._fillCells(o,s,n-o,1)),i.restore()},t.prototype._drawForeground=function(e,t){var r=this;this._forEachCell(e,t,this._characterJoinerRegistry,(function(e,t,i){if(!e.isInvisible()&&(r._drawChars(e,t,i),e.isUnderline())){if(r._ctx.save(),e.isInverse())if(e.isBgDefault())r._ctx.fillStyle=r._colors.background.css;else if(e.isBgRGB())r._ctx.fillStyle="rgb("+c.AttributeData.toColorRGB(e.getBgColor()).join(",")+")";else{var n=e.getBgColor();r._optionsService.options.drawBoldTextInBrightColors&&e.isBold()&&8>n&&(n+=8),r._ctx.fillStyle=r._colors.ansi[n].css}else if(e.isFgDefault())r._ctx.fillStyle=r._colors.foreground.css;else if(e.isFgRGB())r._ctx.fillStyle="rgb("+c.AttributeData.toColorRGB(e.getFgColor()).join(",")+")";else{var o=e.getFgColor();r._optionsService.options.drawBoldTextInBrightColors&&e.isBold()&&8>o&&(o+=8),r._ctx.fillStyle=r._colors.ansi[o].css}r._fillBottomLineAtCells(t,i,e.getWidth()),r._ctx.restore()}}))},t.prototype.onGridChanged=function(e,t){0!==this._state.cache.length&&(this._charAtlas&&this._charAtlas.beginFrame(),this._clearCells(0,e,this._bufferService.cols,t-e+1),this._drawBackground(e,t),this._drawForeground(e,t))},t.prototype.onOptionsChanged=function(){this._setTransparency(this._optionsService.options.allowTransparency)},t.prototype._isOverlapping=function(e){if(1!==e.getWidth())return!1;if(256>e.getCode())return!1;var t=e.getChars();if(this._characterOverlapCache.hasOwnProperty(t))return this._characterOverlapCache[t];this._ctx.save(),this._ctx.font=this._characterFont;var r=s(this._ctx.measureText(t).width)>this._characterWidth;return this._ctx.restore(),this._characterOverlapCache[t]=r,r},t}(a.BaseRenderLayer);t.TextRenderLayer=f},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GridCache=void 0;var r=function(){function e(){this.cache=[]}return e.prototype.resize=function(e,t){for(var r=0;r<e;r++){this.cache.length<=r&&this.cache.push([]);for(var i=this.cache[r].length;i<t;i++)this.cache[r].push(void 0);this.cache[r].length=t}this.cache.length=e},e.prototype.clear=function(){for(var e=0;e<this.cache.length;e++)for(var t=0;t<this.cache[e].length;t++)this.cache[e][t]=void 0},e}();t.GridCache=r},function(e,t,r){"use strict";function i(e){return e.code<<21|e.bg<<12|e.fg<<3|(e.bold?0:4)+(e.dim?0:2)+(e.italic?0:1)}var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0}),t.NoneCharAtlas=t.DynamicCharAtlas=t.getGlyphCacheKey=void 0;var a=r(9),c=r(44),l=r(27),u=r(46),h=r(11),f=r(28),d=r(10),p={css:"rgba(0, 0, 0, 0)",rgba:0};t.getGlyphCacheKey=i;var _=function(e){function t(t,r){var i=e.call(this)||this;i._config=r,i._drawToCacheCount=0,i._glyphsWaitingOnBitmap=[],i._bitmapCommitTimeout=null,i._bitmap=null,i._cacheCanvas=t.createElement("canvas"),i._cacheCanvas.width=1024,i._cacheCanvas.height=1024,i._cacheCtx=f.throwIfFalsy(i._cacheCanvas.getContext("2d",{alpha:!0}));var n=t.createElement("canvas");n.width=i._config.scaledCharWidth,n.height=i._config.scaledCharHeight,i._tmpCtx=f.throwIfFalsy(n.getContext("2d",{alpha:i._config.allowTransparency})),i._width=s(1024/i._config.scaledCharWidth),i._height=s(1024/i._config.scaledCharHeight);var o=i._width*i._height;return i._cacheMap=new u.LRUMap(o),i._cacheMap.prealloc(o),i}return o(t,e),t.prototype.dispose=function(){null!==this._bitmapCommitTimeout&&(window.clearTimeout(this._bitmapCommitTimeout),this._bitmapCommitTimeout=null)},t.prototype.beginFrame=function(){this._drawToCacheCount=0},t.prototype.draw=function(e,t,r,n){if(32===t.code)return!0;if(!this._canCache(t))return!1;var o=i(t),s=this._cacheMap.get(o);if(null!=s)return this._drawFromCache(e,s,r,n),!0;if(100>this._drawToCacheCount){var a=this._cacheMap.size<this._cacheMap.capacity?this._cacheMap.size:this._cacheMap.peek().index,c=this._drawToCache(t,a);return this._cacheMap.set(o,c),this._drawFromCache(e,c,r,n),!0}return!1},t.prototype._canCache=function(e){return 256>e.code},t.prototype._toCoordinateX=function(e){return e%this._width*this._config.scaledCharWidth},t.prototype._toCoordinateY=function(e){return s(e/this._width)*this._config.scaledCharHeight},t.prototype._drawFromCache=function(e,t,r,i){if(!t.isEmpty){var n=this._toCoordinateX(t.index),o=this._toCoordinateY(t.index);e.drawImage(t.inBitmap?this._bitmap:this._cacheCanvas,n,o,this._config.scaledCharWidth,this._config.scaledCharHeight,r,i,this._config.scaledCharWidth,this._config.scaledCharHeight)}},t.prototype._getColorFromAnsiIndex=function(e){return e<this._config.colors.ansi.length?this._config.colors.ansi[e]:l.DEFAULT_ANSI_COLORS[e]},t.prototype._getBackgroundColor=function(e){return this._config.allowTransparency?p:e.bg===a.INVERTED_DEFAULT_COLOR?this._config.colors.foreground:256>e.bg?this._getColorFromAnsiIndex(e.bg):this._config.colors.background},t.prototype._getForegroundColor=function(e){return e.fg===a.INVERTED_DEFAULT_COLOR?d.color.opaque(this._config.colors.background):256>e.fg?this._getColorFromAnsiIndex(e.fg):this._config.colors.foreground},t.prototype._drawToCache=function(e,t){this._drawToCacheCount++,this._tmpCtx.save();var r=this._getBackgroundColor(e);this._tmpCtx.globalCompositeOperation="copy",this._tmpCtx.fillStyle=r.css,this._tmpCtx.fillRect(0,0,this._config.scaledCharWidth,this._config.scaledCharHeight),this._tmpCtx.globalCompositeOperation="source-over";var i=e.bold?this._config.fontWeightBold:this._config.fontWeight,n=e.italic?"italic":"";this._tmpCtx.font=n+" "+i+" "+this._config.fontSize*this._config.devicePixelRatio+"px "+this._config.fontFamily,this._tmpCtx.textBaseline="middle",this._tmpCtx.fillStyle=this._getForegroundColor(e).css,e.dim&&(this._tmpCtx.globalAlpha=a.DIM_OPACITY),this._tmpCtx.fillText(e.chars,0,this._config.scaledCharHeight/2),this._tmpCtx.restore();var o=this._tmpCtx.getImageData(0,0,this._config.scaledCharWidth,this._config.scaledCharHeight),s=!1;this._config.allowTransparency||(s=function(e,t){for(var r=!0,i=t.rgba>>>24,n=255&t.rgba>>>16,o=255&t.rgba>>>8,s=0;s<e.data.length;s+=4)e.data[s]===i&&e.data[s+1]===n&&e.data[s+2]===o?e.data[s+3]=0:r=!1;return r}(o,r));var c=this._toCoordinateX(t),l=this._toCoordinateY(t);this._cacheCtx.putImageData(o,c,l);var u={index:t,isEmpty:s,inBitmap:!1};return this._addGlyphToBitmap(u),u},t.prototype._addGlyphToBitmap=function(e){var t=this;!("createImageBitmap"in window)||h.isFirefox||h.isSafari||(this._glyphsWaitingOnBitmap.push(e),null===this._bitmapCommitTimeout&&(this._bitmapCommitTimeout=window.setTimeout((function(){return t._generateBitmap()}),100)))},t.prototype._generateBitmap=function(){var e=this,t=this._glyphsWaitingOnBitmap;this._glyphsWaitingOnBitmap=[],window.createImageBitmap(this._cacheCanvas).then((function(r){e._bitmap=r;for(var i=0;i<t.length;i++)t[i].inBitmap=!0})),this._bitmapCommitTimeout=null},t}(c.BaseCharAtlas);t.DynamicCharAtlas=_;var v=function(e){function t(){return e.call(this)||this}return o(t,e),t.prototype.draw=function(){return!1},t}(c.BaseCharAtlas);t.NoneCharAtlas=v},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BaseCharAtlas=void 0;var r=function(){function e(){this._didWarmUp=!1}return e.prototype.dispose=function(){},e.prototype.warmUp=function(){this._didWarmUp||(this._doWarmUp(),this._didWarmUp=!0)},e.prototype._doWarmUp=function(){},e.prototype.beginFrame=function(){},e}();t.BaseCharAtlas=r},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ColorContrastCache=void 0;var r=function(){function e(){this._color={},this._rgba={}}return e.prototype.clear=function(){this._color={},this._rgba={}},e.prototype.setCss=function(e,t,r){this._rgba[e]||(this._rgba[e]={}),this._rgba[e][t]=r},e.prototype.getCss=function(e,t){return this._rgba[e]?this._rgba[e][t]:void 0},e.prototype.setColor=function(e,t,r){this._color[e]||(this._color[e]={}),this._color[e][t]=r},e.prototype.getColor=function(e,t){return this._color[e]?this._color[e][t]:void 0},e}();t.ColorContrastCache=r},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LRUMap=void 0;var r=function(){function e(e){this.capacity=e,this._map={},this._head=null,this._tail=null,this._nodePool=[],this.size=0}return e.prototype._unlinkNode=function(e){var t=e.prev,r=e.next;e===this._head&&(this._head=r),e===this._tail&&(this._tail=t),null!==t&&(t.next=r),null!==r&&(r.prev=t)},e.prototype._appendNode=function(e){var t=this._tail;null!==t&&(t.next=e),e.prev=t,e.next=null,this._tail=e,null===this._head&&(this._head=e)},e.prototype.prealloc=function(e){for(var t=this._nodePool,r=0;r<e;r++)t.push({prev:null,next:null,key:null,value:null})},e.prototype.get=function(e){var t=this._map[e];return void 0===t?null:(this._unlinkNode(t),this._appendNode(t),t.value)},e.prototype.peekValue=function(e){var t=this._map[e];return void 0===t?null:t.value},e.prototype.peek=function(){var e=this._head;return null===e?null:e.value},e.prototype.set=function(e,t){var r=this._map[e];if(void 0!==r)r=this._map[e],this._unlinkNode(r),r.value=t;else if(this.size>=this.capacity)r=this._head,this._unlinkNode(r),delete this._map[r.key],r.key=e,r.value=t,this._map[e]=r;else{var i=this._nodePool;0<i.length?((r=i.pop()).key=e,r.value=t):r={prev:null,next:null,key:e,value:t},this._map[e]=r,this.size++}this._appendNode(r)},e}();t.LRUMap=r},function(e,t,r){"use strict";var i,o=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0}),t.SelectionRenderLayer=void 0;var s=function(e){function t(t,r,i,n,o,s){var a=e.call(this,t,"selection",r,!0,i,n,o,s)||this;return a._clearState(),a}return o(t,e),t.prototype._clearState=function(){this._state={start:void 0,end:void 0,columnSelectMode:void 0,ydisp:void 0}},t.prototype.resize=function(t){e.prototype.resize.call(this,t),this._clearState()},t.prototype.reset=function(){this._state.start&&this._state.end&&(this._clearState(),this._clearAll())},t.prototype.onSelectionChanged=function(e,t,r){if(this._didStateChange(e,t,r,this._bufferService.buffer.ydisp))if(this._clearAll(),e&&t){var i=e[1]-this._bufferService.buffer.ydisp,o=t[1]-this._bufferService.buffer.ydisp,s=n(i,0),a=c(o,this._bufferService.rows-1);if(s>=this._bufferService.rows||0>a)this._state.ydisp=this._bufferService.buffer.ydisp;else{if(this._ctx.fillStyle=this._colors.selectionTransparent.css,r){var l=e[0],u=t[0]-l;this._fillCells(l,s,u,a-s+1)}else{l=i===s?e[0]:0;var h=s===o?t[0]:this._bufferService.cols;this._fillCells(l,s,h-l,1);var f=n(a-s-1,0);if(this._fillCells(0,s+1,this._bufferService.cols,f),s!==a){var d=o===a?t[0]:this._bufferService.cols;this._fillCells(0,a,d,1)}}this._state.start=[e[0],e[1]],this._state.end=[t[0],t[1]],this._state.columnSelectMode=r,this._state.ydisp=this._bufferService.buffer.ydisp}}else this._clearState()},t.prototype._didStateChange=function(e,t,r,i){return!this._areCoordinatesEqual(e,this._state.start)||!this._areCoordinatesEqual(t,this._state.end)||r!==this._state.columnSelectMode||i!==this._state.ydisp},t.prototype._areCoordinatesEqual=function(e,t){return e&&t&&e[0]===t[0]&&e[1]===t[1]},t}(r(13).BaseRenderLayer);t.SelectionRenderLayer=s},function(e,t,r){"use strict";var i,n=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0}),t.CursorRenderLayer=void 0;var o=r(13),s=r(4),a=function(e){function t(t,r,i,n,o,a,c,l,u){var h=e.call(this,t,"cursor",r,!0,i,n,a,c)||this;return h._onRequestRedraw=o,h._coreService=l,h._coreBrowserService=u,h._cell=new s.CellData,h._state={x:0,y:0,isFocused:!1,style:"",width:0},h._cursorRenderers={bar:h._renderBarCursor.bind(h),block:h._renderBlockCursor.bind(h),underline:h._renderUnderlineCursor.bind(h)},h}return n(t,e),t.prototype.resize=function(t){e.prototype.resize.call(this,t),this._state={x:0,y:0,isFocused:!1,style:"",width:0}},t.prototype.reset=function(){this._clearCursor(),this._cursorBlinkStateManager&&(this._cursorBlinkStateManager.dispose(),this._cursorBlinkStateManager=void 0,this.onOptionsChanged())},t.prototype.onBlur=function(){this._cursorBlinkStateManager&&this._cursorBlinkStateManager.pause(),this._onRequestRedraw.fire({start:this._bufferService.buffer.y,end:this._bufferService.buffer.y})},t.prototype.onFocus=function(){this._cursorBlinkStateManager?this._cursorBlinkStateManager.resume():this._onRequestRedraw.fire({start:this._bufferService.buffer.y,end:this._bufferService.buffer.y})},t.prototype.onOptionsChanged=function(){var e,t=this;this._optionsService.options.cursorBlink?this._cursorBlinkStateManager||(this._cursorBlinkStateManager=new l(this._coreBrowserService.isFocused,(function(){t._render(!0)}))):(null===(e=this._cursorBlinkStateManager)||void 0===e||e.dispose(),this._cursorBlinkStateManager=void 0),this._onRequestRedraw.fire({start:this._bufferService.buffer.y,end:this._bufferService.buffer.y})},t.prototype.onCursorMove=function(){this._cursorBlinkStateManager&&this._cursorBlinkStateManager.restartBlinkAnimation()},t.prototype.onGridChanged=function(){!this._cursorBlinkStateManager||this._cursorBlinkStateManager.isPaused?this._render(!1):this._cursorBlinkStateManager.restartBlinkAnimation()},t.prototype._render=function(){if(this._coreService.isCursorInitialized&&!this._coreService.isCursorHidden){var e=this._bufferService.buffer.ybase+this._bufferService.buffer.y,t=e-this._bufferService.buffer.ydisp;if(0>t||t>=this._bufferService.rows)this._clearCursor();else{var r=c(this._bufferService.buffer.x,this._bufferService.cols-1);if(this._bufferService.buffer.lines.get(e).loadCell(r,this._cell),void 0!==this._cell.content){if(!this._coreBrowserService.isFocused){this._clearCursor(),this._ctx.save(),this._ctx.fillStyle=this._colors.cursor.css;var i=this._optionsService.options.cursorStyle;return i&&"block"!==i?this._cursorRenderers[i](r,t,this._cell):this._renderBlurCursor(r,t,this._cell),this._ctx.restore(),this._state.x=r,this._state.y=t,this._state.isFocused=!1,this._state.style=i,void(this._state.width=this._cell.getWidth())}if(!this._cursorBlinkStateManager||this._cursorBlinkStateManager.isCursorVisible){if(this._state){if(this._state.x===r&&this._state.y===t&&this._state.isFocused===this._coreBrowserService.isFocused&&this._state.style===this._optionsService.options.cursorStyle&&this._state.width===this._cell.getWidth())return;this._clearCursor()}this._ctx.save(),this._cursorRenderers[this._optionsService.options.cursorStyle||"block"](r,t,this._cell),this._ctx.restore(),this._state.x=r,this._state.y=t,this._state.isFocused=!1,this._state.style=this._optionsService.options.cursorStyle,this._state.width=this._cell.getWidth()}else this._clearCursor()}}}else this._clearCursor()},t.prototype._clearCursor=function(){this._state&&(this._clearCells(this._state.x,this._state.y,this._state.width,1),this._state={x:0,y:0,isFocused:!1,style:"",width:0})},t.prototype._renderBarCursor=function(e,t){this._ctx.save(),this._ctx.fillStyle=this._colors.cursor.css,this._fillLeftLineAtCell(e,t,this._optionsService.options.cursorWidth),this._ctx.restore()},t.prototype._renderBlockCursor=function(e,t,r){this._ctx.save(),this._ctx.fillStyle=this._colors.cursor.css,this._fillCells(e,t,r.getWidth(),1),this._ctx.fillStyle=this._colors.cursorAccent.css,this._fillCharTrueColor(r,e,t),this._ctx.restore()},t.prototype._renderUnderlineCursor=function(e,t){this._ctx.save(),this._ctx.fillStyle=this._colors.cursor.css,this._fillBottomLineAtCells(e,t),this._ctx.restore()},t.prototype._renderBlurCursor=function(e,t,r){this._ctx.save(),this._ctx.strokeStyle=this._colors.cursor.css,this._strokeRectAtCell(e,t,r.getWidth(),1),this._ctx.restore()},t}(o.BaseRenderLayer);t.CursorRenderLayer=a;var l=function(){function e(e,t){this._renderCallback=t,this.isCursorVisible=!0,e&&this._restartInterval()}return Object.defineProperty(e.prototype,"isPaused",{get:function(){return!(this._blinkStartTimeout||this._blinkInterval)},enumerable:!1,configurable:!0}),e.prototype.dispose=function(){this._blinkInterval&&(window.clearInterval(this._blinkInterval),this._blinkInterval=void 0),this._blinkStartTimeout&&(window.clearTimeout(this._blinkStartTimeout),this._blinkStartTimeout=void 0),this._animationFrame&&(window.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)},e.prototype.restartBlinkAnimation=function(){var e=this;this.isPaused||(this._animationTimeRestarted=Date.now(),this.isCursorVisible=!0,this._animationFrame||(this._animationFrame=window.requestAnimationFrame((function(){e._renderCallback(),e._animationFrame=void 0}))))},e.prototype._restartInterval=function(e){var t=this;void 0===e&&(e=600),this._blinkInterval&&window.clearInterval(this._blinkInterval),this._blinkStartTimeout=window.setTimeout((function(){if(t._animationTimeRestarted){var e=600-(Date.now()-t._animationTimeRestarted);if(t._animationTimeRestarted=void 0,0<e)return void t._restartInterval(e)}t.isCursorVisible=!1,t._animationFrame=window.requestAnimationFrame((function(){t._renderCallback(),t._animationFrame=void 0})),t._blinkInterval=window.setInterval((function(){if(t._animationTimeRestarted){var e=600-(Date.now()-t._animationTimeRestarted);return t._animationTimeRestarted=void 0,void t._restartInterval(e)}t.isCursorVisible=!t.isCursorVisible,t._animationFrame=window.requestAnimationFrame((function(){t._renderCallback(),t._animationFrame=void 0}))}),600)}),e)},e.prototype.pause=function(){this.isCursorVisible=!0,this._blinkInterval&&(window.clearInterval(this._blinkInterval),this._blinkInterval=void 0),this._blinkStartTimeout&&(window.clearTimeout(this._blinkStartTimeout),this._blinkStartTimeout=void 0),this._animationFrame&&(window.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)},e.prototype.resume=function(){this.pause(),this._animationTimeRestarted=void 0,this._restartInterval(),this.restartBlinkAnimation()},e}()},function(e,t,r){"use strict";var i,n=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0}),t.LinkRenderLayer=void 0;var o=r(13),s=r(9),a=r(26),c=function(e){function t(t,r,i,n,o,s,a,c){var l=e.call(this,t,"link",r,!0,i,n,a,c)||this;return o.onShowLinkUnderline((function(e){return l._onShowLinkUnderline(e)})),o.onHideLinkUnderline((function(e){return l._onHideLinkUnderline(e)})),s.onShowLinkUnderline((function(e){return l._onShowLinkUnderline(e)})),s.onHideLinkUnderline((function(e){return l._onHideLinkUnderline(e)})),l}return n(t,e),t.prototype.resize=function(t){e.prototype.resize.call(this,t),this._state=void 0},t.prototype.reset=function(){this._clearCurrentLink()},t.prototype._clearCurrentLink=function(){if(this._state){this._clearCells(this._state.x1,this._state.y1,this._state.cols-this._state.x1,1);var e=this._state.y2-this._state.y1-1;0<e&&this._clearCells(0,this._state.y1+1,this._state.cols,e),this._clearCells(0,this._state.y2,this._state.x2,1),this._state=void 0}},t.prototype._onShowLinkUnderline=function(e){if(this._ctx.fillStyle=e.fg===s.INVERTED_DEFAULT_COLOR?this._colors.background.css:e.fg&&a.is256Color(e.fg)?this._colors.ansi[e.fg].css:this._colors.foreground.css,e.y1===e.y2)this._fillBottomLineAtCells(e.x1,e.y1,e.x2-e.x1);else{this._fillBottomLineAtCells(e.x1,e.y1,e.cols-e.x1);for(var t=e.y1+1;t<e.y2;t++)this._fillBottomLineAtCells(0,t,e.cols);this._fillBottomLineAtCells(0,e.y2,e.x2)}this._state=e},t.prototype._onHideLinkUnderline=function(){this._clearCurrentLink()},t}(o.BaseRenderLayer);t.LinkRenderLayer=c},function(e,t,r){"use strict";var i=this&&this.__decorate||function(e,t,r,i){var n,o=arguments.length,s=3>o?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,i);else for(var a=e.length-1;0<=a;a--)(n=e[a])&&(s=(3>o?n(s):3<o?n(t,r,s):n(t,r))||s);return 3<o&&s&&Object.defineProperty(t,r,s),s},o=this&&this.__param||function(e,t){return function(r,i){t(r,i,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.MouseZone=t.Linkifier=void 0;var l=r(0),u=r(1),h=function(){function e(e,t,r){this._bufferService=e,this._logService=t,this._unicodeService=r,this._linkMatchers=[],this._nextLinkMatcherId=0,this._onShowLinkUnderline=new l.EventEmitter,this._onHideLinkUnderline=new l.EventEmitter,this._onLinkTooltip=new l.EventEmitter,this._rowsToLinkify={start:void 0,end:void 0}}return Object.defineProperty(e.prototype,"onShowLinkUnderline",{get:function(){return this._onShowLinkUnderline.event},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"onHideLinkUnderline",{get:function(){return this._onHideLinkUnderline.event},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"onLinkTooltip",{get:function(){return this._onLinkTooltip.event},enumerable:!1,configurable:!0}),e.prototype.attachToDom=function(e,t){this._element=e,this._mouseZoneManager=t},e.prototype.linkifyRows=function(t,r){var i=this;this._mouseZoneManager&&(void 0===this._rowsToLinkify.start||void 0===this._rowsToLinkify.end?(this._rowsToLinkify.start=t,this._rowsToLinkify.end=r):(this._rowsToLinkify.start=c(this._rowsToLinkify.start,t),this._rowsToLinkify.end=n(this._rowsToLinkify.end,r)),this._mouseZoneManager.clearAll(t,r),this._rowsTimeoutId&&clearTimeout(this._rowsTimeoutId),this._rowsTimeoutId=setTimeout((function(){return i._linkifyRows()}),e._timeBeforeLatency))},e.prototype._linkifyRows=function(){this._rowsTimeoutId=void 0;var e=this._bufferService.buffer;if(void 0!==this._rowsToLinkify.start&&void 0!==this._rowsToLinkify.end){var t=e.ydisp+this._rowsToLinkify.start;if(!(t>=e.lines.length)){for(var r=e.ydisp+c(this._rowsToLinkify.end,this._bufferService.rows)+1,i=a(2e3/this._bufferService.cols),n=this._bufferService.buffer.iterator(!1,t,r,i,i);n.hasNext();)for(var o=n.next(),s=0;s<this._linkMatchers.length;s++)this._doLinkifyRow(o.range.first,o.content,this._linkMatchers[s]);this._rowsToLinkify.start=void 0,this._rowsToLinkify.end=void 0}}else this._logService.debug("_rowToLinkify was unset before _linkifyRows was called")},e.prototype.registerLinkMatcher=function(e,t,r){if(void 0===r&&(r={}),!t)throw new Error("handler must be defined");var i={id:this._nextLinkMatcherId++,regex:e,handler:t,matchIndex:r.matchIndex,validationCallback:r.validationCallback,hoverTooltipCallback:r.tooltipCallback,hoverLeaveCallback:r.leaveCallback,willLinkActivate:r.willLinkActivate,priority:r.priority||0};return this._addLinkMatcherToList(i),i.id},e.prototype._addLinkMatcherToList=function(e){if(0!==this._linkMatchers.length){for(var t=this._linkMatchers.length-1;0<=t;t--)if(e.priority<=this._linkMatchers[t].priority)return void this._linkMatchers.splice(t+1,0,e);this._linkMatchers.splice(0,0,e)}else this._linkMatchers.push(e)},e.prototype.deregisterLinkMatcher=function(e){for(var t=0;t<this._linkMatchers.length;t++)if(this._linkMatchers[t].id===e)return this._linkMatchers.splice(t,1),!0;return!1},e.prototype._doLinkifyRow=function(e,t,r){for(var i,n=this,o=new RegExp(r.regex.source,(r.regex.flags||"")+"g"),s=-1,a=function(){var a=i["number"==typeof r.matchIndex?r.matchIndex:0];if(!a)return c._logService.debug("match found without corresponding matchIndex",i,r),"break";if(s=t.indexOf(a,s+1),o.lastIndex=s+a.length,0>s)return"break";var l=c._bufferService.buffer.stringIndexToBufferIndex(e,s);if(0>l[0])return"break";var u=c._bufferService.buffer.lines.get(l[0]);if(!u)return"break";var h=u.getFg(l[1]),f=h?511&h>>9:void 0;r.validationCallback?r.validationCallback(a,(function(e){n._rowsTimeoutId||e&&n._addLink(l[1],l[0]-n._bufferService.buffer.ydisp,a,r,f)})):c._addLink(l[1],l[0]-c._bufferService.buffer.ydisp,a,r,f)},c=this;null!==(i=o.exec(t))&&"break"!==a(););},e.prototype._addLink=function(e,t,r,i,n){var o=this;if(this._mouseZoneManager&&this._element){var a=this._unicodeService.getStringCellWidth(r),c=e%this._bufferService.cols,l=t+s(e/this._bufferService.cols),u=(c+a)%this._bufferService.cols,h=l+s((c+a)/this._bufferService.cols);0===u&&(u=this._bufferService.cols,h--),this._mouseZoneManager.add(new f(c+1,l+1,u+1,h+1,(function(e){if(i.handler)return i.handler(e,r);var t=window.open();t?(t.opener=null,t.location.href=r):console.warn("Opening link blocked as opener could not be cleared")}),(function(){o._onShowLinkUnderline.fire(o._createLinkHoverEvent(c,l,u,h,n)),o._element.classList.add("xterm-cursor-pointer")}),(function(e){o._onLinkTooltip.fire(o._createLinkHoverEvent(c,l,u,h,n)),i.hoverTooltipCallback&&i.hoverTooltipCallback(e,r,{start:{x:c,y:l},end:{x:u,y:h}})}),(function(){o._onHideLinkUnderline.fire(o._createLinkHoverEvent(c,l,u,h,n)),o._element.classList.remove("xterm-cursor-pointer"),i.hoverLeaveCallback&&i.hoverLeaveCallback()}),(function(e){return!i.willLinkActivate||i.willLinkActivate(e,r)})))}},e.prototype._createLinkHoverEvent=function(e,t,r,i,n){return{x1:e,y1:t,x2:r,y2:i,cols:this._bufferService.cols,fg:n}},e._timeBeforeLatency=200,e=i([o(0,u.IBufferService),o(1,u.ILogService),o(2,u.IUnicodeService)],e)}();t.Linkifier=h;var f=function(e,t,r,i,n,o,s,a,c){this.x1=e,this.y1=t,this.x2=r,this.y2=i,this.clickCallback=n,this.hoverCallback=o,this.tooltipCallback=s,this.leaveCallback=a,this.willLinkActivate=c};t.MouseZone=f},function(e,t,r){"use strict";var s,a=this&&this.__extends||(s=function(e,t){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}s(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),l=this&&this.__decorate||function(e,t,r,i){var n,o=arguments.length,s=3>o?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,i);else for(var a=e.length-1;0<=a;a--)(n=e[a])&&(s=(3>o?n(s):3<o?n(t,r,s):n(t,r))||s);return 3<o&&s&&Object.defineProperty(t,r,s),s},u=this&&this.__param||function(e,t){return function(r,i){t(r,i,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.SelectionService=void 0;var h=r(11),f=r(52),d=r(4),p=r(0),_=r(5),v=r(1),g=r(30),y=r(53),b=r(2),S=/ /g,m=function(e){function t(t,r,i,n,o,s,a){var c=e.call(this)||this;return c._element=t,c._screenElement=r,c._bufferService=i,c._coreService=n,c._mouseService=o,c._optionsService=s,c._renderService=a,c._dragScrollAmount=0,c._enabled=!0,c._workCell=new d.CellData,c._mouseDownTimeStamp=0,c._onLinuxMouseSelection=c.register(new p.EventEmitter),c._onRedrawRequest=c.register(new p.EventEmitter),c._onSelectionChange=c.register(new p.EventEmitter),c._onRequestScrollLines=c.register(new p.EventEmitter),c._mouseMoveListener=function(e){return c._onMouseMove(e)},c._mouseUpListener=function(e){return c._onMouseUp(e)},c._coreService.onUserInput((function(){c.hasSelection&&c.clearSelection()})),c._trimListener=c._bufferService.buffer.lines.onTrim((function(e){return c._onTrim(e)})),c.register(c._bufferService.buffers.onBufferActivate((function(e){return c._onBufferActivate(e)}))),c.enable(),c._model=new f.SelectionModel(c._bufferService),c._activeSelectionMode=0,c}return a(t,e),Object.defineProperty(t.prototype,"onLinuxMouseSelection",{get:function(){return this._onLinuxMouseSelection.event},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onRequestRedraw",{get:function(){return this._onRedrawRequest.event},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onSelectionChange",{get:function(){return this._onSelectionChange.event},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onRequestScrollLines",{get:function(){return this._onRequestScrollLines.event},enumerable:!1,configurable:!0}),t.prototype.dispose=function(){this._removeMouseDownListeners()},t.prototype.reset=function(){this.clearSelection()},t.prototype.disable=function(){this.clearSelection(),this._enabled=!1},t.prototype.enable=function(){this._enabled=!0},Object.defineProperty(t.prototype,"selectionStart",{get:function(){return this._model.finalSelectionStart},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"selectionEnd",{get:function(){return this._model.finalSelectionEnd},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasSelection",{get:function(){var e=this._model.finalSelectionStart,t=this._model.finalSelectionEnd;return e&&t&&(e[0]!==t[0]||e[1]!==t[1])},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"selectionText",{get:function(){var e=this._model.finalSelectionStart,t=this._model.finalSelectionEnd;if(!e||!t)return"";var r=this._bufferService.buffer,i=[];if(3===this._activeSelectionMode){if(e[0]===t[0])return"";for(var n,o=e[1];o<=t[1];o++)n=r.translateBufferLineToString(o,!0,e[0],t[0]),i.push(n)}else{var s=e[1]===t[1]?t[0]:void 0;for(i.push(r.translateBufferLineToString(e[1],!0,e[0],s)),o=e[1]+1;o<=t[1]-1;o++){var a=r.lines.get(o);n=r.translateBufferLineToString(o,!0),a&&a.isWrapped?i[i.length-1]+=n:i.push(n)}e[1]!==t[1]&&(a=r.lines.get(t[1]),n=r.translateBufferLineToString(t[1],!0,0,t[0]),a&&a.isWrapped?i[i.length-1]+=n:i.push(n))}return i.map((function(e){return e.replace(S," ")})).join(h.isWindows?"\r\n":"\n")},enumerable:!1,configurable:!0}),t.prototype.clearSelection=function(){this._model.clearSelection(),this._removeMouseDownListeners(),this.refresh(),this._onSelectionChange.fire()},t.prototype.refresh=function(e){var t=this;this._refreshAnimationFrame||(this._refreshAnimationFrame=window.requestAnimationFrame((function(){return t._refresh()}))),h.isLinux&&e&&this.selectionText.length&&this._onLinuxMouseSelection.fire(this.selectionText)},t.prototype._refresh=function(){this._refreshAnimationFrame=void 0,this._onRedrawRequest.fire({start:this._model.finalSelectionStart,end:this._model.finalSelectionEnd,columnSelectMode:3===this._activeSelectionMode})},t.prototype.isClickInSelection=function(e){var t=this._getMouseBufferCoords(e),r=this._model.finalSelectionStart,i=this._model.finalSelectionEnd;return!!(r&&i&&t)&&this._areCoordsInSelection(t,r,i)},t.prototype._areCoordsInSelection=function(e,t,r){return e[1]>t[1]&&e[1]<r[1]||t[1]===r[1]&&e[1]===t[1]&&e[0]>=t[0]&&e[0]<r[0]||t[1]<r[1]&&e[1]===r[1]&&e[0]<r[0]||t[1]<r[1]&&e[1]===t[1]&&e[0]>=t[0]},t.prototype.selectWordAtCursor=function(e){var t=this._getMouseBufferCoords(e);t&&(this._selectWordAt(t,!1),this._model.selectionEnd=void 0,this.refresh(!0))},t.prototype.selectAll=function(){this._model.isSelectAllActive=!0,this.refresh(),this._onSelectionChange.fire()},t.prototype.selectLines=function(e,t){this._model.clearSelection(),e=n(e,0),t=c(t,this._bufferService.buffer.lines.length-1),this._model.selectionStart=[0,e],this._model.selectionEnd=[this._bufferService.cols,t],this.refresh(),this._onSelectionChange.fire()},t.prototype._onTrim=function(e){this._model.onTrim(e)&&this.refresh()},t.prototype._getMouseBufferCoords=function(e){var t=this._mouseService.getCoords(e,this._screenElement,this._bufferService.cols,this._bufferService.rows,!0);if(t)return t[0]--,t[1]--,t[1]+=this._bufferService.buffer.ydisp,t},t.prototype._getMouseEventScrollAmount=function(e){var t=g.getCoordsRelativeToElement(e,this._screenElement)[1],r=this._renderService.dimensions.canvasHeight;return 0<=t&&t<=r?0:(t>r&&(t-=r),t=c(n(t,-50),50),(t/=50)/i(t)+o(14*t))},t.prototype.shouldForceSelection=function(e){return h.isMac?e.altKey&&this._optionsService.options.macOptionClickForcesSelection:e.shiftKey},t.prototype.onMouseDown=function(e){if(this._mouseDownTimeStamp=e.timeStamp,(2!==e.button||!this.hasSelection)&&0===e.button){if(!this._enabled){if(!this.shouldForceSelection(e))return;e.stopPropagation()}e.preventDefault(),this._dragScrollAmount=0,this._enabled&&e.shiftKey?this._onIncrementalClick(e):1===e.detail?this._onSingleClick(e):2===e.detail?this._onDoubleClick(e):3===e.detail&&this._onTripleClick(e),this._addMouseDownListeners(),this.refresh(!0)}},t.prototype._addMouseDownListeners=function(){var e=this;this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.addEventListener("mousemove",this._mouseMoveListener),this._screenElement.ownerDocument.addEventListener("mouseup",this._mouseUpListener)),this._dragScrollIntervalTimer=window.setInterval((function(){return e._dragScroll()}),50)},t.prototype._removeMouseDownListeners=function(){this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.removeEventListener("mousemove",this._mouseMoveListener),this._screenElement.ownerDocument.removeEventListener("mouseup",this._mouseUpListener)),clearInterval(this._dragScrollIntervalTimer),this._dragScrollIntervalTimer=void 0},t.prototype._onIncrementalClick=function(e){this._model.selectionStart&&(this._model.selectionEnd=this._getMouseBufferCoords(e))},t.prototype._onSingleClick=function(e){if(this._model.selectionStartLength=0,this._model.isSelectAllActive=!1,this._activeSelectionMode=this.shouldColumnSelect(e)?3:0,this._model.selectionStart=this._getMouseBufferCoords(e),this._model.selectionStart){this._model.selectionEnd=void 0;var t=this._bufferService.buffer.lines.get(this._model.selectionStart[1]);t&&t.length!==this._model.selectionStart[0]&&0===t.hasWidth(this._model.selectionStart[0])&&this._model.selectionStart[0]++}},t.prototype._onDoubleClick=function(e){var t=this._getMouseBufferCoords(e);t&&(this._activeSelectionMode=1,this._selectWordAt(t,!0))},t.prototype._onTripleClick=function(e){var t=this._getMouseBufferCoords(e);t&&(this._activeSelectionMode=2,this._selectLineAt(t[1]))},t.prototype.shouldColumnSelect=function(e){return e.altKey&&!(h.isMac&&this._optionsService.options.macOptionClickForcesSelection)},t.prototype._onMouseMove=function(e){if(e.stopImmediatePropagation(),this._model.selectionStart){var t=this._model.selectionEnd?[this._model.selectionEnd[0],this._model.selectionEnd[1]]:null;if(this._model.selectionEnd=this._getMouseBufferCoords(e),this._model.selectionEnd){2===this._activeSelectionMode?this._model.selectionEnd[1]<this._model.selectionStart[1]?this._model.selectionEnd[0]=0:this._model.selectionEnd[0]=this._bufferService.cols:1===this._activeSelectionMode&&this._selectToWordAt(this._model.selectionEnd),this._dragScrollAmount=this._getMouseEventScrollAmount(e),3!==this._activeSelectionMode&&(0<this._dragScrollAmount?this._model.selectionEnd[0]=this._bufferService.cols:0>this._dragScrollAmount&&(this._model.selectionEnd[0]=0));var r=this._bufferService.buffer;if(this._model.selectionEnd[1]<r.lines.length){var i=r.lines.get(this._model.selectionEnd[1]);i&&0===i.hasWidth(this._model.selectionEnd[0])&&this._model.selectionEnd[0]++}t&&t[0]===this._model.selectionEnd[0]&&t[1]===this._model.selectionEnd[1]||this.refresh(!0)}else this.refresh(!0)}},t.prototype._dragScroll=function(){if(this._model.selectionEnd&&this._model.selectionStart&&this._dragScrollAmount){this._onRequestScrollLines.fire({amount:this._dragScrollAmount,suppressScrollEvent:!1});var e=this._bufferService.buffer;0<this._dragScrollAmount?(3!==this._activeSelectionMode&&(this._model.selectionEnd[0]=this._bufferService.cols),this._model.selectionEnd[1]=c(e.ydisp+this._bufferService.rows,e.lines.length-1)):(3!==this._activeSelectionMode&&(this._model.selectionEnd[0]=0),this._model.selectionEnd[1]=e.ydisp),this.refresh()}},t.prototype._onMouseUp=function(e){var t=e.timeStamp-this._mouseDownTimeStamp;if(this._removeMouseDownListeners(),1>=this.selectionText.length&&500>t&&e.altKey){if(this._bufferService.buffer.ybase===this._bufferService.buffer.ydisp){var r=this._mouseService.getCoords(e,this._element,this._bufferService.cols,this._bufferService.rows,!1);if(r&&void 0!==r[0]&&void 0!==r[1]){var i=y.moveToCellSequence(r[0]-1,r[1]-1,this._bufferService,this._coreService.decPrivateModes.applicationCursorKeys);this._coreService.triggerDataEvent(i,!0)}}}else this.hasSelection&&this._onSelectionChange.fire()},t.prototype._onBufferActivate=function(e){var t=this;this.clearSelection(),this._trimListener.dispose(),this._trimListener=e.activeBuffer.lines.onTrim((function(e){return t._onTrim(e)}))},t.prototype._convertViewportColToCharacterIndex=function(e,t){for(var r,i=t[0],n=0;t[0]>=n;n++)r=e.loadCell(n,this._workCell).getChars().length,0===this._workCell.getWidth()?i--:1<r&&t[0]!==n&&(i+=r-1);return i},t.prototype.setSelection=function(e,t,r){this._model.clearSelection(),this._removeMouseDownListeners(),this._model.selectionStart=[e,t],this._model.selectionStartLength=r,this.refresh()},t.prototype._getWordAt=function(e,t,r,i){if(void 0===r&&(r=!0),void 0===i&&(i=!0),!(e[0]>=this._bufferService.cols)){var n=this._bufferService.buffer,o=n.lines.get(e[1]);if(o){var s=n.translateBufferLineToString(e[1],!1),a=this._convertViewportColToCharacterIndex(o,e),l=a,u=e[0]-a,h=0,f=0,d=0,p=0;if(" "===s.charAt(a)){for(;0<a&&" "===s.charAt(a-1);)a--;for(;l<s.length&&" "===s.charAt(l+1);)l++}else{var _=e[0],v=e[0];0===o.getWidth(_)&&(h++,_--),2===o.getWidth(v)&&(f++,v++);var g=o.getString(v).length;for(1<g&&(p+=g-1,l+=g-1);0<_&&0<a&&!this._isCharWordSeparator(o.loadCell(_-1,this._workCell));){o.loadCell(_-1,this._workCell);var y=this._workCell.getChars().length;0===this._workCell.getWidth()?(h++,_--):1<y&&(d+=y-1,a-=y-1),a--,_--}for(;v<o.length&&l+1<s.length&&!this._isCharWordSeparator(o.loadCell(v+1,this._workCell));){o.loadCell(v+1,this._workCell);var b=this._workCell.getChars().length;2===this._workCell.getWidth()?(f++,v++):1<b&&(p+=b-1,l+=b-1),l++,v++}}l++;var S=a+u-h+d,m=c(this._bufferService.cols,l-a+h+f-d-p);if(t||""!==s.slice(a,l).trim()){if(r&&0==S&&32!==o.getCodePoint(0)){var C=n.lines.get(e[1]-1);if(C&&o.isWrapped&&32!==C.getCodePoint(this._bufferService.cols-1)){var w=this._getWordAt([this._bufferService.cols-1,e[1]-1],!1,!0,!1);if(w){var E=this._bufferService.cols-w.start;S-=E,m+=E}}}if(i&&S+m===this._bufferService.cols&&32!==o.getCodePoint(this._bufferService.cols-1)){var x=n.lines.get(e[1]+1);if(x&&x.isWrapped&&32!==x.getCodePoint(0)){var L=this._getWordAt([0,e[1]+1],!1,!1,!0);L&&(m+=L.length)}}return{start:S,length:m}}}}},t.prototype._selectWordAt=function(e,t){var r=this._getWordAt(e,t);if(r){for(;0>r.start;)r.start+=this._bufferService.cols,e[1]--;this._model.selectionStart=[r.start,e[1]],this._model.selectionStartLength=r.length}},t.prototype._selectToWordAt=function(e){var t=this._getWordAt(e,!0);if(t){for(var r=e[1];0>t.start;)t.start+=this._bufferService.cols,r--;if(!this._model.areSelectionValuesReversed())for(;t.start+t.length>this._bufferService.cols;)t.length-=this._bufferService.cols,r++;this._model.selectionEnd=[this._model.areSelectionValuesReversed()?t.start:t.start+t.length,r]}},t.prototype._isCharWordSeparator=function(e){return 0!==e.getWidth()&&0<=this._optionsService.options.wordSeparator.indexOf(e.getChars())},t.prototype._selectLineAt=function(e){var t=this._bufferService.buffer.getWrappedRangeForLine(e);this._model.selectionStart=[0,t.first],this._model.selectionEnd=[this._bufferService.cols,t.last],this._model.selectionStartLength=0},l([u(2,v.IBufferService),u(3,v.ICoreService),u(4,_.IMouseService),u(5,v.IOptionsService),u(6,_.IRenderService)],t)}(b.Disposable);t.SelectionService=m},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SelectionModel=void 0;var r=function(){function e(e){this._bufferService=e,this.isSelectAllActive=!1,this.selectionStartLength=0}return e.prototype.clearSelection=function(){this.selectionStart=void 0,this.selectionEnd=void 0,this.isSelectAllActive=!1,this.selectionStartLength=0},Object.defineProperty(e.prototype,"finalSelectionStart",{get:function(){return this.isSelectAllActive?[0,0]:this.selectionEnd&&this.selectionStart&&this.areSelectionValuesReversed()?this.selectionEnd:this.selectionStart},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"finalSelectionEnd",{get:function(){if(this.isSelectAllActive)return[this._bufferService.cols,this._bufferService.buffer.ybase+this._bufferService.rows-1];if(this.selectionStart){if(!this.selectionEnd||this.areSelectionValuesReversed()){var e=this.selectionStart[0]+this.selectionStartLength;return e>this._bufferService.cols?[e%this._bufferService.cols,this.selectionStart[1]+s(e/this._bufferService.cols)]:[e,this.selectionStart[1]]}return this.selectionStartLength&&this.selectionEnd[1]===this.selectionStart[1]?[n(this.selectionStart[0]+this.selectionStartLength,this.selectionEnd[0]),this.selectionEnd[1]]:this.selectionEnd}},enumerable:!1,configurable:!0}),e.prototype.areSelectionValuesReversed=function(){var e=this.selectionStart,t=this.selectionEnd;return e&&t&&(e[1]>t[1]||e[1]===t[1]&&e[0]>t[0])},e.prototype.onTrim=function(e){return this.selectionStart&&(this.selectionStart[1]-=e),this.selectionEnd&&(this.selectionEnd[1]-=e),this.selectionEnd&&0>this.selectionEnd[1]?(this.clearSelection(),!0):(this.selectionStart&&0>this.selectionStart[1]&&(this.selectionStart[1]=0),!1)},e}();t.SelectionModel=r},function(e,t,r){"use strict";function n(e,t,r,n){var s=e-o(r,e),c=t-o(r,t);return u(i(s-c)-function(e,t,r){for(var n=0,s=e-o(r,e),c=t-o(r,t),l=0;l<i(s-c);l++){var u="A"===a(e,t)?-1:1,h=r.buffer.lines.get(s+u*l);h&&h.isWrapped&&n++}return n}(e,t,r),l(a(e,t),n))}function o(e,t){for(var r=0,i=e.buffer.lines.get(t),n=i&&i.isWrapped;n&&0<=t&&t<e.rows;)r++,n=(i=e.buffer.lines.get(--t))&&i.isWrapped;return r}function a(e,t){return e>t?"A":"B"}function c(e,t,r,i,n,o){for(var s=e,a=t,c="";s!==r||a!==i;)s+=n?1:-1,n&&s>o.cols-1?(c+=o.buffer.translateBufferLineToString(a,!1,e,s),s=0,e=0,a++):!n&&0>s&&(c+=o.buffer.translateBufferLineToString(a,!1,0,e+1),e=s=o.cols-1,a--);return c+o.buffer.translateBufferLineToString(a,!1,e,s)}function l(e,t){var r=t?"O":"[";return h.C0.ESC+r+e}function u(e,t){e=s(e);for(var r="",i=0;i<e;i++)r+=t;return r}Object.defineProperty(t,"__esModule",{value:!0}),t.moveToCellSequence=void 0;var h=r(12);t.moveToCellSequence=function(e,t,r,s){var a,h=r.buffer.x,f=r.buffer.y;if(!r.buffer.hasScrollback)return function(e,t,r,i,s,a){return 0===n(t,i,s,a).length?"":u(c(e,t,e,t-o(s,t),!1,s).length,l("D",a))}(h,f,0,t,r,s)+n(f,t,r,s)+function(e,t,r,i,s,a){var h=0<n(t,i,s,a).length?i-o(s,i):t,f=function(e,t,r,i,s,a){var c;return c=0<n(r,i,s,a).length?i-o(s,i):t,e<r&&c<=i||e>=r&&c<i?"C":"D"}(e,t,r,i,s,a);return u(c(e,h,r,i,"C"===f,s).length,l(f,a))}(h,f,e,t,r,s);if(f===t)return a=h>e?"D":"C",u(i(h-e),l(a,s));a=f>t?"D":"C";var d=i(f-t);return u(function(e,t){return t.cols-e}(f>t?e:h,r)+(d-1)*r.cols+1+((f>t?h:e)-1),l(a,s))}},function(e,t,r){"use strict";var i=this&&this.__decorate||function(e,t,r,i){var n,o=arguments.length,s=3>o?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,i);else for(var a=e.length-1;0<=a;a--)(n=e[a])&&(s=(3>o?n(s):3<o?n(t,r,s):n(t,r))||s);return 3<o&&s&&Object.defineProperty(t,r,s),s},n=this&&this.__param||function(e,t){return function(r,i){t(r,i,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.SoundService=void 0;var o=r(1),s=function(){function e(e){this._optionsService=e}return Object.defineProperty(e,"audioContext",{get:function(){if(!e._audioContext){var t=window.AudioContext||window.webkitAudioContext;if(!t)return console.warn("Web Audio API is not supported by this browser. Consider upgrading to the latest version"),null;e._audioContext=new t}return e._audioContext},enumerable:!1,configurable:!0}),e.prototype.playBellSound=function(){var t=e.audioContext;if(t){var r=t.createBufferSource();t.decodeAudioData(this._base64ToArrayBuffer(this._removeMimeType(this._optionsService.options.bellSound)),(function(e){r.buffer=e,r.connect(t.destination),r.start(0)}))}},e.prototype._base64ToArrayBuffer=function(e){for(var t=window.atob(e),r=t.length,i=new Uint8Array(r),n=0;n<r;n++)i[n]=t.charCodeAt(n);return i.buffer},e.prototype._removeMimeType=function(e){return e.split(",")[1]},e=i([n(0,o.IOptionsService)],e)}();t.SoundService=s},function(e,t,r){"use strict";var i,n=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),o=this&&this.__decorate||function(e,t,r,i){var n,o=arguments.length,s=3>o?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,i);else for(var a=e.length-1;0<=a;a--)(n=e[a])&&(s=(3>o?n(s):3<o?n(t,r,s):n(t,r))||s);return 3<o&&s&&Object.defineProperty(t,r,s),s},s=this&&this.__param||function(e,t){return function(r,i){t(r,i,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.MouseZoneManager=void 0;var a=r(2),c=r(7),l=r(5),u=r(1),h=function(e){function t(t,r,i,n,o,s){var a=e.call(this)||this;return a._element=t,a._screenElement=r,a._bufferService=i,a._mouseService=n,a._selectionService=o,a._optionsService=s,a._zones=[],a._areZonesActive=!1,a._lastHoverCoords=[void 0,void 0],a._initialSelectionLength=0,a.register(c.addDisposableDomListener(a._element,"mousedown",(function(e){return a._onMouseDown(e)}))),a._mouseMoveListener=function(e){return a._onMouseMove(e)},a._mouseLeaveListener=function(e){return a._onMouseLeave(e)},a._clickListener=function(e){return a._onClick(e)},a}return n(t,e),t.prototype.dispose=function(){e.prototype.dispose.call(this),this._deactivate()},t.prototype.add=function(e){this._zones.push(e),1===this._zones.length&&this._activate()},t.prototype.clearAll=function(e,t){if(0!==this._zones.length){e&&t||(e=0,t=this._bufferService.rows-1);for(var r,i=0;i<this._zones.length;i++)((r=this._zones[i]).y1>e&&r.y1<=t+1||r.y2>e&&r.y2<=t+1||r.y1<e&&r.y2>t+1)&&(this._currentZone&&this._currentZone===r&&(this._currentZone.leaveCallback(),this._currentZone=void 0),this._zones.splice(i--,1));0===this._zones.length&&this._deactivate()}},t.prototype._activate=function(){this._areZonesActive||(this._areZonesActive=!0,this._element.addEventListener("mousemove",this._mouseMoveListener),this._element.addEventListener("mouseleave",this._mouseLeaveListener),this._element.addEventListener("click",this._clickListener))},t.prototype._deactivate=function(){this._areZonesActive&&(this._areZonesActive=!1,this._element.removeEventListener("mousemove",this._mouseMoveListener),this._element.removeEventListener("mouseleave",this._mouseLeaveListener),this._element.removeEventListener("click",this._clickListener))},t.prototype._onMouseMove=function(e){this._lastHoverCoords[0]===e.pageX&&this._lastHoverCoords[1]===e.pageY||(this._onHover(e),this._lastHoverCoords=[e.pageX,e.pageY])},t.prototype._onHover=function(e){var t=this,r=this._findZoneEventAt(e);r!==this._currentZone&&(this._currentZone&&(this._currentZone.leaveCallback(),this._currentZone=void 0,this._tooltipTimeout&&clearTimeout(this._tooltipTimeout)),r&&(this._currentZone=r,r.hoverCallback&&r.hoverCallback(e),this._tooltipTimeout=window.setTimeout((function(){return t._onTooltip(e)}),this._optionsService.options.linkTooltipHoverDuration)))},t.prototype._onTooltip=function(e){this._tooltipTimeout=void 0;var t=this._findZoneEventAt(e);t&&t.tooltipCallback&&t.tooltipCallback(e)},t.prototype._onMouseDown=function(e){if(this._initialSelectionLength=this._getSelectionLength(),this._areZonesActive){var t=this._findZoneEventAt(e);(null==t?void 0:t.willLinkActivate(e))&&(e.preventDefault(),e.stopImmediatePropagation())}},t.prototype._onMouseLeave=function(){this._currentZone&&(this._currentZone.leaveCallback(),this._currentZone=void 0,this._tooltipTimeout&&clearTimeout(this._tooltipTimeout))},t.prototype._onClick=function(e){var t=this._findZoneEventAt(e),r=this._getSelectionLength();t&&r===this._initialSelectionLength&&(t.clickCallback(e),e.preventDefault(),e.stopImmediatePropagation())},t.prototype._getSelectionLength=function(){var e=this._selectionService.selectionText;return e?e.length:0},t.prototype._findZoneEventAt=function(e){var t=this._mouseService.getCoords(e,this._screenElement,this._bufferService.cols,this._bufferService.rows);if(t)for(var r,i=t[0],n=t[1],o=0;o<this._zones.length;o++)if((r=this._zones[o]).y1===r.y2){if(n===r.y1&&i>=r.x1&&i<r.x2)return r}else if(n===r.y1&&i>=r.x1||n===r.y2&&i<r.x2||n>r.y1&&n<r.y2)return r},o([s(2,u.IBufferService),s(3,l.IMouseService),s(4,l.ISelectionService),s(5,u.IOptionsService)],t)}(a.Disposable);t.MouseZoneManager=h},function(e,t,r){"use strict";var i,n=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0}),t.AccessibilityManager=void 0;var o=r(18),s=r(11),a=r(31),c=r(7),l=r(2),u=r(32),h=r(17),f=function(e){function t(t,r){var i=e.call(this)||this;i._terminal=t,i._renderService=r,i._liveRegionLineCount=0,i._charsToConsume=[],i._charsToAnnounce="",i._accessibilityTreeRoot=document.createElement("div"),i._accessibilityTreeRoot.classList.add("xterm-accessibility"),i._rowContainer=document.createElement("div"),i._rowContainer.classList.add("xterm-accessibility-tree"),i._rowContainer.setAttribute("role","document"),i._rowElements=[];for(var n=0;n<i._terminal.rows;n++)i._rowElements[n]=i._createAccessibilityTreeNode(),i._rowContainer.appendChild(i._rowElements[n]);if(i._topBoundaryFocusListener=function(e){return i._onBoundaryFocus(e,0)},i._bottomBoundaryFocusListener=function(e){return i._onBoundaryFocus(e,1)},i._rowElements[0].addEventListener("focus",i._topBoundaryFocusListener),i._rowElements[i._rowElements.length-1].addEventListener("focus",i._bottomBoundaryFocusListener),i._refreshRowsDimensions(),i._accessibilityTreeRoot.appendChild(i._rowContainer),i._renderRowsDebouncer=new a.RenderDebouncer(i._renderRows.bind(i)),i._refreshRows(),i._liveRegion=document.createElement("div"),i._liveRegion.classList.add("live-region"),i._liveRegion.setAttribute("aria-live","assertive"),i._accessibilityTreeRoot.appendChild(i._liveRegion),!i._terminal.element)throw new Error("Cannot enable accessibility before Terminal.open");return i._terminal.element.insertAdjacentElement("afterbegin",i._accessibilityTreeRoot),i.register(i._renderRowsDebouncer),i.register(i._terminal.onResize((function(e){return i._onResize(e.rows)}))),i.register(i._terminal.onRender((function(e){return i._refreshRows(e.start,e.end)}))),i.register(i._terminal.onScroll((function(){return i._refreshRows()}))),i.register(i._terminal.onA11yChar((function(e){return i._onChar(e)}))),i.register(i._terminal.onLineFeed((function(){return i._onChar("\n")}))),i.register(i._terminal.onA11yTab((function(e){return i._onTab(e)}))),i.register(i._terminal.onKey((function(e){return i._onKey(e.key)}))),i.register(i._terminal.onBlur((function(){return i._clearLiveRegion()}))),i.register(i._renderService.onDimensionsChange((function(){return i._refreshRowsDimensions()}))),i._screenDprMonitor=new u.ScreenDprMonitor,i.register(i._screenDprMonitor),i._screenDprMonitor.setListener((function(){return i._refreshRowsDimensions()})),i.register(c.addDisposableDomListener(window,"resize",(function(){return i._refreshRowsDimensions()}))),i}return n(t,e),t.prototype.dispose=function(){e.prototype.dispose.call(this),h.removeElementFromParent(this._accessibilityTreeRoot),this._rowElements.length=0},t.prototype._onBoundaryFocus=function(e,t){var r=e.target,i=this._rowElements[0===t?1:this._rowElements.length-2];if(r.getAttribute("aria-posinset")!==(0===t?"1":""+this._terminal.buffer.lines.length)&&e.relatedTarget===i){var n,o;if(0===t?(n=r,o=this._rowElements.pop(),this._rowContainer.removeChild(o)):(n=this._rowElements.shift(),o=r,this._rowContainer.removeChild(n)),n.removeEventListener("focus",this._topBoundaryFocusListener),o.removeEventListener("focus",this._bottomBoundaryFocusListener),0===t){var s=this._createAccessibilityTreeNode();this._rowElements.unshift(s),this._rowContainer.insertAdjacentElement("afterbegin",s)}else s=this._createAccessibilityTreeNode(),this._rowElements.push(s),this._rowContainer.appendChild(s);this._rowElements[0].addEventListener("focus",this._topBoundaryFocusListener),this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._terminal.scrollLines(0===t?-1:1),this._rowElements[0===t?1:this._rowElements.length-2].focus(),e.preventDefault(),e.stopImmediatePropagation()}},t.prototype._onResize=function(e){this._rowElements[this._rowElements.length-1].removeEventListener("focus",this._bottomBoundaryFocusListener);for(var t=this._rowContainer.children.length;t<this._terminal.rows;t++)this._rowElements[t]=this._createAccessibilityTreeNode(),this._rowContainer.appendChild(this._rowElements[t]);for(;this._rowElements.length>e;)this._rowContainer.removeChild(this._rowElements.pop());this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._refreshRowsDimensions()},t.prototype._createAccessibilityTreeNode=function(){var e=document.createElement("div");return e.setAttribute("role","listitem"),e.tabIndex=-1,this._refreshRowDimensions(e),e},t.prototype._onTab=function(e){for(var t=0;t<e;t++)this._onChar(" ")},t.prototype._onChar=function(e){var t=this;21>this._liveRegionLineCount&&(0<this._charsToConsume.length?this._charsToConsume.shift()!==e&&(this._charsToAnnounce+=e):this._charsToAnnounce+=e,"\n"===e&&(this._liveRegionLineCount++,21===this._liveRegionLineCount&&(this._liveRegion.textContent+=o.tooMuchOutput)),s.isMac&&this._liveRegion.textContent&&0<this._liveRegion.textContent.length&&!this._liveRegion.parentNode&&setTimeout((function(){t._accessibilityTreeRoot.appendChild(t._liveRegion)}),0))},t.prototype._clearLiveRegion=function(){this._liveRegion.textContent="",this._liveRegionLineCount=0,s.isMac&&h.removeElementFromParent(this._liveRegion)},t.prototype._onKey=function(e){this._clearLiveRegion(),this._charsToConsume.push(e)},t.prototype._refreshRows=function(e,t){this._renderRowsDebouncer.refresh(e,t,this._terminal.rows)},t.prototype._renderRows=function(e,t){for(var r=this._terminal.buffer,i=r.lines.length.toString(),n=e;n<=t;n++){var o=r.translateBufferLineToString(r.ydisp+n,!0),s=(r.ydisp+n+1).toString(),a=this._rowElements[n];a&&(0===o.length?a.innerHTML="&nbsp;":a.textContent=o,a.setAttribute("aria-posinset",s),a.setAttribute("aria-setsize",i))}this._announceCharacters()},t.prototype._refreshRowsDimensions=function(){if(this._renderService.dimensions.actualCellHeight){this._rowElements.length!==this._terminal.rows&&this._onResize(this._terminal.rows);for(var e=0;e<this._terminal.rows;e++)this._refreshRowDimensions(this._rowElements[e])}},t.prototype._refreshRowDimensions=function(e){e.style.height=this._renderService.dimensions.actualCellHeight+"px"},t.prototype._announceCharacters=function(){0!==this._charsToAnnounce.length&&(this._liveRegion.textContent+=this._charsToAnnounce,this._charsToAnnounce="")},t}(l.Disposable);t.AccessibilityManager=f},function(e,t,r){"use strict";var i,l=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),u=this&&this.__decorate||function(e,t,r,i){var n,o=arguments.length,s=3>o?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,i);else for(var a=e.length-1;0<=a;a--)(n=e[a])&&(s=(3>o?n(s):3<o?n(t,r,s):n(t,r))||s);return 3<o&&s&&Object.defineProperty(t,r,s),s},h=this&&this.__param||function(e,t){return function(r,i){t(r,i,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.DomRenderer=void 0;var f=r(58),d=r(9),p=r(2),_=r(5),v=r(1),g=r(0),y=r(10),b=r(17),S=1,m=function(e){function t(t,r,i,n,o,s,a,c,l){var u=e.call(this)||this;return u._colors=t,u._element=r,u._screenElement=i,u._viewportElement=n,u._linkifier=o,u._linkifier2=s,u._charSizeService=a,u._optionsService=c,u._bufferService=l,u._terminalClass=S++,u._rowElements=[],u._rowContainer=document.createElement("div"),u._rowContainer.classList.add("xterm-rows"),u._rowContainer.style.lineHeight="normal",u._rowContainer.setAttribute("aria-hidden","true"),u._refreshRowElements(u._bufferService.cols,u._bufferService.rows),u._selectionContainer=document.createElement("div"),u._selectionContainer.classList.add("xterm-selection"),u._selectionContainer.setAttribute("aria-hidden","true"),u.dimensions={scaledCharWidth:0,scaledCharHeight:0,scaledCellWidth:0,scaledCellHeight:0,scaledCharLeft:0,scaledCharTop:0,scaledCanvasWidth:0,scaledCanvasHeight:0,canvasWidth:0,canvasHeight:0,actualCellWidth:0,actualCellHeight:0},u._updateDimensions(),u._injectCss(),u._rowFactory=new f.DomRendererRowFactory(document,u._optionsService,u._colors),u._element.classList.add("xterm-dom-renderer-owner-"+u._terminalClass),u._screenElement.appendChild(u._rowContainer),u._screenElement.appendChild(u._selectionContainer),u._linkifier.onShowLinkUnderline((function(e){return u._onLinkHover(e)})),u._linkifier.onHideLinkUnderline((function(e){return u._onLinkLeave(e)})),u._linkifier2.onShowLinkUnderline((function(e){return u._onLinkHover(e)})),u._linkifier2.onHideLinkUnderline((function(e){return u._onLinkLeave(e)})),u}return l(t,e),Object.defineProperty(t.prototype,"onRequestRedraw",{get:function(){return(new g.EventEmitter).event},enumerable:!1,configurable:!0}),t.prototype.dispose=function(){this._element.classList.remove("xterm-dom-renderer-owner-"+this._terminalClass),b.removeElementFromParent(this._rowContainer,this._selectionContainer,this._themeStyleElement,this._dimensionsStyleElement),e.prototype.dispose.call(this)},t.prototype._updateDimensions=function(){this.dimensions.scaledCharWidth=this._charSizeService.width*window.devicePixelRatio,this.dimensions.scaledCharHeight=a(this._charSizeService.height*window.devicePixelRatio),this.dimensions.scaledCellWidth=this.dimensions.scaledCharWidth+o(this._optionsService.options.letterSpacing),this.dimensions.scaledCellHeight=s(this.dimensions.scaledCharHeight*this._optionsService.options.lineHeight),this.dimensions.scaledCharLeft=0,this.dimensions.scaledCharTop=0,this.dimensions.scaledCanvasWidth=this.dimensions.scaledCellWidth*this._bufferService.cols,this.dimensions.scaledCanvasHeight=this.dimensions.scaledCellHeight*this._bufferService.rows,this.dimensions.canvasWidth=o(this.dimensions.scaledCanvasWidth/window.devicePixelRatio),this.dimensions.canvasHeight=o(this.dimensions.scaledCanvasHeight/window.devicePixelRatio),this.dimensions.actualCellWidth=this.dimensions.canvasWidth/this._bufferService.cols,this.dimensions.actualCellHeight=this.dimensions.canvasHeight/this._bufferService.rows;for(var e,t=0,r=this._rowElements;t<r.length;t++)(e=r[t]).style.width=this.dimensions.canvasWidth+"px",e.style.height=this.dimensions.actualCellHeight+"px",e.style.lineHeight=this.dimensions.actualCellHeight+"px",e.style.overflow="hidden";this._dimensionsStyleElement||(this._dimensionsStyleElement=document.createElement("style"),this._screenElement.appendChild(this._dimensionsStyleElement));var i=this._terminalSelector+" .xterm-rows span { display: inline-block; height: 100%; vertical-align: top; width: "+this.dimensions.actualCellWidth+"px}";this._dimensionsStyleElement.innerHTML=i,this._selectionContainer.style.height=this._viewportElement.style.height,this._screenElement.style.width=this.dimensions.canvasWidth+"px",this._screenElement.style.height=this.dimensions.canvasHeight+"px"},t.prototype.setColors=function(e){this._colors=e,this._injectCss()},t.prototype._injectCss=function(){var e=this;this._themeStyleElement||(this._themeStyleElement=document.createElement("style"),this._screenElement.appendChild(this._themeStyleElement));var t=this._terminalSelector+" .xterm-rows { color: "+this._colors.foreground.css+"; font-family: "+this._optionsService.options.fontFamily+"; font-size: "+this._optionsService.options.fontSize+"px;}";t+=this._terminalSelector+" span:not(."+f.BOLD_CLASS+") { font-weight: "+this._optionsService.options.fontWeight+";}"+this._terminalSelector+" span."+f.BOLD_CLASS+" { font-weight: "+this._optionsService.options.fontWeightBold+";}"+this._terminalSelector+" span."+f.ITALIC_CLASS+" { font-style: italic;}",t+="@keyframes blink_box_shadow_"+this._terminalClass+" { 50% {  box-shadow: none; }}",t+="@keyframes blink_block_"+this._terminalClass+" { 0% {  background-color: "+this._colors.cursor.css+";  color: "+this._colors.cursorAccent.css+"; } 50% {  background-color: "+this._colors.cursorAccent.css+";  color: "+this._colors.cursor.css+"; }}",t+=this._terminalSelector+" .xterm-rows:not(.xterm-focus) ."+f.CURSOR_CLASS+"."+f.CURSOR_STYLE_BLOCK_CLASS+" { outline: 1px solid "+this._colors.cursor.css+"; outline-offset: -1px;}"+this._terminalSelector+" .xterm-rows.xterm-focus ."+f.CURSOR_CLASS+"."+f.CURSOR_BLINK_CLASS+":not(."+f.CURSOR_STYLE_BLOCK_CLASS+") { animation: blink_box_shadow_"+this._terminalClass+" 1s step-end infinite;}"+this._terminalSelector+" .xterm-rows.xterm-focus ."+f.CURSOR_CLASS+"."+f.CURSOR_BLINK_CLASS+"."+f.CURSOR_STYLE_BLOCK_CLASS+" { animation: blink_block_"+this._terminalClass+" 1s step-end infinite;}"+this._terminalSelector+" .xterm-rows.xterm-focus ."+f.CURSOR_CLASS+"."+f.CURSOR_STYLE_BLOCK_CLASS+" { background-color: "+this._colors.cursor.css+"; color: "+this._colors.cursorAccent.css+";}"+this._terminalSelector+" .xterm-rows ."+f.CURSOR_CLASS+"."+f.CURSOR_STYLE_BAR_CLASS+" { box-shadow: "+this._optionsService.options.cursorWidth+"px 0 0 "+this._colors.cursor.css+" inset;}"+this._terminalSelector+" .xterm-rows ."+f.CURSOR_CLASS+"."+f.CURSOR_STYLE_UNDERLINE_CLASS+" { box-shadow: 0 -1px 0 "+this._colors.cursor.css+" inset;}",t+=this._terminalSelector+" .xterm-selection { position: absolute; top: 0; left: 0; z-index: 1; pointer-events: none;}"+this._terminalSelector+" .xterm-selection div { position: absolute; background-color: "+this._colors.selectionTransparent.css+";}",this._colors.ansi.forEach((function(r,i){t+=e._terminalSelector+" .xterm-fg-"+i+" { color: "+r.css+"; }"+e._terminalSelector+" .xterm-bg-"+i+" { background-color: "+r.css+"; }"})),t+=this._terminalSelector+" .xterm-fg-"+d.INVERTED_DEFAULT_COLOR+" { color: "+y.color.opaque(this._colors.background).css+"; }"+this._terminalSelector+" .xterm-bg-"+d.INVERTED_DEFAULT_COLOR+" { background-color: "+this._colors.foreground.css+"; }",this._themeStyleElement.innerHTML=t},t.prototype.onDevicePixelRatioChange=function(){this._updateDimensions()},t.prototype._refreshRowElements=function(e,t){for(var r,i=this._rowElements.length;i<=t;i++)r=document.createElement("div"),this._rowContainer.appendChild(r),this._rowElements.push(r);for(;this._rowElements.length>t;)this._rowContainer.removeChild(this._rowElements.pop())},t.prototype.onResize=function(e,t){this._refreshRowElements(e,t),this._updateDimensions()},t.prototype.onCharSizeChanged=function(){this._updateDimensions()},t.prototype.onBlur=function(){this._rowContainer.classList.remove("xterm-focus")},t.prototype.onFocus=function(){this._rowContainer.classList.add("xterm-focus")},t.prototype.onSelectionChanged=function(e,t,r){for(;this._selectionContainer.children.length;)this._selectionContainer.removeChild(this._selectionContainer.children[0]);if(e&&t){var i=e[1]-this._bufferService.buffer.ydisp,o=t[1]-this._bufferService.buffer.ydisp,s=n(i,0),a=c(o,this._bufferService.rows-1);if(!(s>=this._bufferService.rows||0>a)){var l=document.createDocumentFragment();if(r)l.appendChild(this._createSelectionElement(s,e[0],t[0],a-s+1));else{var u=i===s?e[0]:0,h=s===o?t[0]:this._bufferService.cols;if(l.appendChild(this._createSelectionElement(s,u,h)),l.appendChild(this._createSelectionElement(s+1,0,this._bufferService.cols,a-s-1)),s!==a){var f=o===a?t[0]:this._bufferService.cols;l.appendChild(this._createSelectionElement(a,0,f))}}this._selectionContainer.appendChild(l)}}},t.prototype._createSelectionElement=function(e,t,r,i){void 0===i&&(i=1);var n=document.createElement("div");return n.style.height=i*this.dimensions.actualCellHeight+"px",n.style.top=e*this.dimensions.actualCellHeight+"px",n.style.left=t*this.dimensions.actualCellWidth+"px",n.style.width=this.dimensions.actualCellWidth*(r-t)+"px",n},t.prototype.onCursorMove=function(){},t.prototype.onOptionsChanged=function(){this._updateDimensions(),this._injectCss()},t.prototype.clear=function(){for(var e=0,t=this._rowElements;e<t.length;e++)t[e].innerHTML=""},t.prototype.renderRows=function(e,t){for(var r,i=this._bufferService.buffer.ybase+this._bufferService.buffer.y,n=c(this._bufferService.buffer.x,this._bufferService.cols-1),o=this._optionsService.options.cursorBlink,s=e;s<=t;s++){(r=this._rowElements[s]).innerHTML="";var a=s+this._bufferService.buffer.ydisp,l=this._bufferService.buffer.lines.get(a),u=this._optionsService.options.cursorStyle;r.appendChild(this._rowFactory.createRow(l,a===i,u,n,o,this.dimensions.actualCellWidth,this._bufferService.cols))}},Object.defineProperty(t.prototype,"_terminalSelector",{get:function(){return".xterm-dom-renderer-owner-"+this._terminalClass},enumerable:!1,configurable:!0}),t.prototype.registerCharacterJoiner=function(){return-1},t.prototype.deregisterCharacterJoiner=function(){return!1},t.prototype._onLinkHover=function(e){this._setCellUnderline(e.x1,e.x2,e.y1,e.y2,e.cols,!0)},t.prototype._onLinkLeave=function(e){this._setCellUnderline(e.x1,e.x2,e.y1,e.y2,e.cols,!1)},t.prototype._setCellUnderline=function(e,t,r,i,n,o){for(;e!==t||r!==i;){var s=this._rowElements[r];if(!s)return;var a=s.children[e];a&&(a.style.textDecoration=o?"underline":"none"),++e>=n&&(e=0,r++)}},u([h(6,_.ICharSizeService),h(7,v.IOptionsService),h(8,v.IBufferService)],t)}(p.Disposable);t.DomRenderer=m},function(e,t,r){"use strict";function i(e,t,r){for(;e.length<r;)e=t+e;return e}Object.defineProperty(t,"__esModule",{value:!0}),t.DomRendererRowFactory=t.CURSOR_STYLE_UNDERLINE_CLASS=t.CURSOR_STYLE_BAR_CLASS=t.CURSOR_STYLE_BLOCK_CLASS=t.CURSOR_BLINK_CLASS=t.CURSOR_CLASS=t.UNDERLINE_CLASS=t.ITALIC_CLASS=t.DIM_CLASS=t.BOLD_CLASS=void 0;var n=r(9),o=r(3),s=r(4),a=r(10);t.BOLD_CLASS="xterm-bold",t.DIM_CLASS="xterm-dim",t.ITALIC_CLASS="xterm-italic",t.UNDERLINE_CLASS="xterm-underline",t.CURSOR_CLASS="xterm-cursor",t.CURSOR_BLINK_CLASS="xterm-cursor-blink",t.CURSOR_STYLE_BLOCK_CLASS="xterm-cursor-block",t.CURSOR_STYLE_BAR_CLASS="xterm-cursor-bar",t.CURSOR_STYLE_UNDERLINE_CLASS="xterm-cursor-underline";var l=function(){function e(e,t,r){this._document=e,this._optionsService=t,this._colors=r,this._workCell=new s.CellData}return e.prototype.setColors=function(e){this._colors=e},e.prototype.createRow=function(e,r,s,l,u,h,f){for(var d=this._document.createDocumentFragment(),p=0,_=c(e.length,f)-1;0<=_;_--)if(e.loadCell(_,this._workCell).getCode()!==o.NULL_CELL_CODE||r&&_===l){p=_+1;break}for(_=0;_<p;_++){e.loadCell(_,this._workCell);var v=this._workCell.getWidth();if(0!==v){var g=this._document.createElement("span");if(1<v&&(g.style.width=h*v+"px"),r&&_===l)switch(g.classList.add(t.CURSOR_CLASS),u&&g.classList.add(t.CURSOR_BLINK_CLASS),s){case"bar":g.classList.add(t.CURSOR_STYLE_BAR_CLASS);break;case"underline":g.classList.add(t.CURSOR_STYLE_UNDERLINE_CLASS);break;default:g.classList.add(t.CURSOR_STYLE_BLOCK_CLASS)}this._workCell.isBold()&&g.classList.add(t.BOLD_CLASS),this._workCell.isItalic()&&g.classList.add(t.ITALIC_CLASS),this._workCell.isDim()&&g.classList.add(t.DIM_CLASS),this._workCell.isUnderline()&&g.classList.add(t.UNDERLINE_CLASS),g.textContent=this._workCell.isInvisible()?o.WHITESPACE_CELL_CHAR:this._workCell.getChars()||o.WHITESPACE_CELL_CHAR;var y=this._workCell.getFgColor(),b=this._workCell.getFgColorMode(),S=this._workCell.getBgColor(),m=this._workCell.getBgColorMode(),C=!!this._workCell.isInverse();if(C){var w=y;y=S,S=w;var E=b;b=m,m=E}switch(b){case 16777216:case 33554432:this._workCell.isBold()&&8>y&&this._optionsService.options.drawBoldTextInBrightColors&&(y+=8),this._applyMinimumContrast(g,this._colors.background,this._colors.ansi[y])||g.classList.add("xterm-fg-"+y);break;case 50331648:var x=a.rgba.toColor(255&y>>16,255&y>>8,255&y);this._applyMinimumContrast(g,this._colors.background,x)||this._addStyle(g,"color:#"+i(y.toString(16),"0",6));break;case 0:default:this._applyMinimumContrast(g,this._colors.background,this._colors.foreground)||C&&g.classList.add("xterm-fg-"+n.INVERTED_DEFAULT_COLOR)}switch(m){case 16777216:case 33554432:g.classList.add("xterm-bg-"+S);break;case 50331648:this._addStyle(g,"background-color:#"+i(S.toString(16),"0",6));break;case 0:default:C&&g.classList.add("xterm-bg-"+n.INVERTED_DEFAULT_COLOR)}d.appendChild(g)}}return d},e.prototype._applyMinimumContrast=function(e,t,r){if(1===this._optionsService.options.minimumContrastRatio)return!1;var i=this._colors.contrastCache.getColor(this._workCell.bg,this._workCell.fg);return void 0===i&&(i=a.color.ensureContrastRatio(t,r,this._optionsService.options.minimumContrastRatio),this._colors.contrastCache.setColor(this._workCell.bg,this._workCell.fg,null==i?null:i)),!!i&&(this._addStyle(e,"color:"+i.css),!0)},e.prototype._addStyle=function(e,t){e.setAttribute("style",""+(e.getAttribute("style")||"")+t+";")},e}();t.DomRendererRowFactory=l},function(e,r,i){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.evaluateKeyboardEvent=void 0;var n=i(12),o={48:["0",")"],49:["1","!"],50:["2","@"],51:["3","#"],52:["4","$"],53:["5","%"],54:["6","^"],55:["7","&"],56:["8","*"],57:["9","("],186:[";",":"],187:["=","+"],188:[",","<"],189:["-","_"],190:[".",">"],191:["/","?"],192:["`","~"],219:["[","{"],220:["\\","|"],221:["]","}"],222:["'",'"']};r.evaluateKeyboardEvent=function(e,r,i,s){var a={type:0,cancel:!1,key:void 0},c=(e.shiftKey?1:0)|(e.altKey?2:0)|(e.ctrlKey?4:0)|(e.metaKey?8:0);switch(e.keyCode){case 0:"UIKeyInputUpArrow"===e.key?a.key=r?n.C0.ESC+"OA":n.C0.ESC+"[A":"UIKeyInputLeftArrow"===e.key?a.key=r?n.C0.ESC+"OD":n.C0.ESC+"[D":"UIKeyInputRightArrow"===e.key?a.key=r?n.C0.ESC+"OC":n.C0.ESC+"[C":"UIKeyInputDownArrow"===e.key&&(a.key=r?n.C0.ESC+"OB":n.C0.ESC+"[B");break;case 8:if(e.shiftKey){a.key=n.C0.BS;break}if(e.altKey){a.key=n.C0.ESC+n.C0.DEL;break}a.key=n.C0.DEL;break;case 9:if(e.shiftKey){a.key=n.C0.ESC+"[Z";break}a.key=n.C0.HT,a.cancel=!0;break;case 13:a.key=e.altKey?n.C0.ESC+n.C0.CR:n.C0.CR,a.cancel=!0;break;case 27:a.key=n.C0.ESC,e.altKey&&(a.key=n.C0.ESC+n.C0.ESC),a.cancel=!0;break;case 37:if(e.metaKey)break;c?(a.key=n.C0.ESC+"[1;"+(c+1)+"D",a.key===n.C0.ESC+"[1;3D"&&(a.key=n.C0.ESC+(i?"b":"[1;5D"))):a.key=r?n.C0.ESC+"OD":n.C0.ESC+"[D";break;case 39:if(e.metaKey)break;c?(a.key=n.C0.ESC+"[1;"+(c+1)+"C",a.key===n.C0.ESC+"[1;3C"&&(a.key=n.C0.ESC+(i?"f":"[1;5C"))):a.key=r?n.C0.ESC+"OC":n.C0.ESC+"[C";break;case 38:if(e.metaKey)break;c?(a.key=n.C0.ESC+"[1;"+(c+1)+"A",i||a.key!==n.C0.ESC+"[1;3A"||(a.key=n.C0.ESC+"[1;5A")):a.key=r?n.C0.ESC+"OA":n.C0.ESC+"[A";break;case 40:if(e.metaKey)break;c?(a.key=n.C0.ESC+"[1;"+(c+1)+"B",i||a.key!==n.C0.ESC+"[1;3B"||(a.key=n.C0.ESC+"[1;5B")):a.key=r?n.C0.ESC+"OB":n.C0.ESC+"[B";break;case 45:e.shiftKey||e.ctrlKey||(a.key=n.C0.ESC+"[2~");break;case 46:a.key=c?n.C0.ESC+"[3;"+(c+1)+"~":n.C0.ESC+"[3~";break;case 36:a.key=c?n.C0.ESC+"[1;"+(c+1)+"H":r?n.C0.ESC+"OH":n.C0.ESC+"[H";break;case 35:a.key=c?n.C0.ESC+"[1;"+(c+1)+"F":r?n.C0.ESC+"OF":n.C0.ESC+"[F";break;case 33:e.shiftKey?a.type=2:a.key=n.C0.ESC+"[5~";break;case 34:e.shiftKey?a.type=3:a.key=n.C0.ESC+"[6~";break;case 112:a.key=c?n.C0.ESC+"[1;"+(c+1)+"P":n.C0.ESC+"OP";break;case 113:a.key=c?n.C0.ESC+"[1;"+(c+1)+"Q":n.C0.ESC+"OQ";break;case 114:a.key=c?n.C0.ESC+"[1;"+(c+1)+"R":n.C0.ESC+"OR";break;case 115:a.key=c?n.C0.ESC+"[1;"+(c+1)+"S":n.C0.ESC+"OS";break;case 116:a.key=c?n.C0.ESC+"[15;"+(c+1)+"~":n.C0.ESC+"[15~";break;case 117:a.key=c?n.C0.ESC+"[17;"+(c+1)+"~":n.C0.ESC+"[17~";break;case 118:a.key=c?n.C0.ESC+"[18;"+(c+1)+"~":n.C0.ESC+"[18~";break;case 119:a.key=c?n.C0.ESC+"[19;"+(c+1)+"~":n.C0.ESC+"[19~";break;case 120:a.key=c?n.C0.ESC+"[20;"+(c+1)+"~":n.C0.ESC+"[20~";break;case 121:a.key=c?n.C0.ESC+"[21;"+(c+1)+"~":n.C0.ESC+"[21~";break;case 122:a.key=c?n.C0.ESC+"[23;"+(c+1)+"~":n.C0.ESC+"[23~";break;case 123:a.key=c?n.C0.ESC+"[24;"+(c+1)+"~":n.C0.ESC+"[24~";break;default:if(!e.ctrlKey||e.shiftKey||e.altKey||e.metaKey)if(i&&!s||!e.altKey||e.metaKey)i&&!e.altKey&&!e.ctrlKey&&e.metaKey?65===e.keyCode&&(a.type=1):e.key&&!e.ctrlKey&&!e.altKey&&!e.metaKey&&48<=e.keyCode&&1===e.key.length?a.key=e.key:e.key&&e.ctrlKey&&"_"===e.key&&(a.key=n.C0.US);else{var l=o[e.keyCode],u=l&&l[e.shiftKey?1:0];if(u)a.key=n.C0.ESC+u;else if(65<=e.keyCode&&90>=e.keyCode){var h=e.ctrlKey?e.keyCode-64:e.keyCode+32;a.key=n.C0.ESC+t(h)}}else 65<=e.keyCode&&90>=e.keyCode?a.key=t(e.keyCode-64):32===e.keyCode?a.key=n.C0.NUL:51<=e.keyCode&&55>=e.keyCode?a.key=t(e.keyCode-51+27):56===e.keyCode?a.key=n.C0.DEL:219===e.keyCode?a.key=n.C0.ESC:220===e.keyCode?a.key=n.C0.FS:221===e.keyCode&&(a.key=n.C0.GS)}return a}},function(e,t,r){"use strict";var i,n=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),o=this&&this.__decorate||function(e,t,r,i){var n,o=arguments.length,s=3>o?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,i);else for(var a=e.length-1;0<=a;a--)(n=e[a])&&(s=(3>o?n(s):3<o?n(t,r,s):n(t,r))||s);return 3<o&&s&&Object.defineProperty(t,r,s),s},s=this&&this.__param||function(e,t){return function(r,i){t(r,i,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.RenderService=void 0;var a=r(31),c=r(0),l=r(2),u=r(32),h=r(7),f=r(1),d=r(5),p=function(e){function t(t,r,i,n,o,s){var l=e.call(this)||this;if(l._renderer=t,l._rowCount=r,l._isPaused=!1,l._needsFullRefresh=!1,l._isNextRenderRedrawOnly=!0,l._needsSelectionRefresh=!1,l._canvasWidth=0,l._canvasHeight=0,l._selectionState={start:void 0,end:void 0,columnSelectMode:!1},l._onDimensionsChange=new c.EventEmitter,l._onRender=new c.EventEmitter,l._onRefreshRequest=new c.EventEmitter,l.register({dispose:function(){return l._renderer.dispose()}}),l._renderDebouncer=new a.RenderDebouncer((function(e,t){return l._renderRows(e,t)})),l.register(l._renderDebouncer),l._screenDprMonitor=new u.ScreenDprMonitor,l._screenDprMonitor.setListener((function(){return l.onDevicePixelRatioChange()})),l.register(l._screenDprMonitor),l.register(s.onResize((function(){return l._fullRefresh()}))),l.register(n.onOptionChange((function(){return l._renderer.onOptionsChanged()}))),l.register(o.onCharSizeChange((function(){return l.onCharSizeChanged()}))),l._renderer.onRequestRedraw((function(e){return l.refreshRows(e.start,e.end,!0)})),l.register(h.addDisposableDomListener(window,"resize",(function(){return l.onDevicePixelRatioChange()}))),"IntersectionObserver"in window){var f=new IntersectionObserver((function(e){return l._onIntersectionChange(e[e.length-1])}),{threshold:0});f.observe(i),l.register({dispose:function(){return f.disconnect()}})}return l}return n(t,e),Object.defineProperty(t.prototype,"onDimensionsChange",{get:function(){return this._onDimensionsChange.event},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onRenderedBufferChange",{get:function(){return this._onRender.event},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onRefreshRequest",{get:function(){return this._onRefreshRequest.event},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"dimensions",{get:function(){return this._renderer.dimensions},enumerable:!1,configurable:!0}),t.prototype._onIntersectionChange=function(e){this._isPaused=void 0===e.isIntersecting?0===e.intersectionRatio:!e.isIntersecting,!this._isPaused&&this._needsFullRefresh&&(this.refreshRows(0,this._rowCount-1),this._needsFullRefresh=!1)},t.prototype.refreshRows=function(e,t,r){void 0===r&&(r=!1),this._isPaused?this._needsFullRefresh=!0:(r||(this._isNextRenderRedrawOnly=!1),this._renderDebouncer.refresh(e,t,this._rowCount))},t.prototype._renderRows=function(e,t){this._renderer.renderRows(e,t),this._needsSelectionRefresh&&(this._renderer.onSelectionChanged(this._selectionState.start,this._selectionState.end,this._selectionState.columnSelectMode),this._needsSelectionRefresh=!1),this._isNextRenderRedrawOnly||this._onRender.fire({start:e,end:t}),this._isNextRenderRedrawOnly=!0},t.prototype.resize=function(e,t){this._rowCount=t,this._fireOnCanvasResize()},t.prototype.changeOptions=function(){this._renderer.onOptionsChanged(),this.refreshRows(0,this._rowCount-1),this._fireOnCanvasResize()},t.prototype._fireOnCanvasResize=function(){this._renderer.dimensions.canvasWidth===this._canvasWidth&&this._renderer.dimensions.canvasHeight===this._canvasHeight||this._onDimensionsChange.fire(this._renderer.dimensions)},t.prototype.dispose=function(){e.prototype.dispose.call(this)},t.prototype.setRenderer=function(e){var t=this;this._renderer.dispose(),this._renderer=e,this._renderer.onRequestRedraw((function(e){return t.refreshRows(e.start,e.end,!0)})),this._needsSelectionRefresh=!0,this._fullRefresh()},t.prototype._fullRefresh=function(){this._isPaused?this._needsFullRefresh=!0:this.refreshRows(0,this._rowCount-1)},t.prototype.setColors=function(e){this._renderer.setColors(e),this._fullRefresh()},t.prototype.onDevicePixelRatioChange=function(){this._renderer.onDevicePixelRatioChange(),this.refreshRows(0,this._rowCount-1)},t.prototype.onResize=function(e,t){this._renderer.onResize(e,t),this._fullRefresh()},t.prototype.onCharSizeChanged=function(){this._renderer.onCharSizeChanged()},t.prototype.onBlur=function(){this._renderer.onBlur()},t.prototype.onFocus=function(){this._renderer.onFocus()},t.prototype.onSelectionChanged=function(e,t,r){this._selectionState.start=e,this._selectionState.end=t,this._selectionState.columnSelectMode=r,this._renderer.onSelectionChanged(e,t,r)},t.prototype.onCursorMove=function(){this._renderer.onCursorMove()},t.prototype.clear=function(){this._renderer.clear()},t.prototype.registerCharacterJoiner=function(e){return this._renderer.registerCharacterJoiner(e)},t.prototype.deregisterCharacterJoiner=function(e){return this._renderer.deregisterCharacterJoiner(e)},o([s(3,f.IOptionsService),s(4,d.ICharSizeService),s(5,f.IBufferService)],t)}(l.Disposable);t.RenderService=p},function(e,t,r){"use strict";var i=this&&this.__decorate||function(e,t,r,i){var n,o=arguments.length,s=3>o?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,i);else for(var a=e.length-1;0<=a;a--)(n=e[a])&&(s=(3>o?n(s):3<o?n(t,r,s):n(t,r))||s);return 3<o&&s&&Object.defineProperty(t,r,s),s},n=this&&this.__param||function(e,t){return function(r,i){t(r,i,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.CharSizeService=void 0;var o=r(1),s=r(0),c=function(){function e(e,t,r){this._optionsService=r,this.width=0,this.height=0,this._onCharSizeChange=new s.EventEmitter,this._measureStrategy=new l(e,t,this._optionsService)}return Object.defineProperty(e.prototype,"hasValidSize",{get:function(){return 0<this.width&&0<this.height},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"onCharSizeChange",{get:function(){return this._onCharSizeChange.event},enumerable:!1,configurable:!0}),e.prototype.measure=function(){var e=this._measureStrategy.measure();e.width===this.width&&e.height===this.height||(this.width=e.width,this.height=e.height,this._onCharSizeChange.fire())},i([n(2,o.IOptionsService)],e)}();t.CharSizeService=c;var l=function(){function e(e,t,r){this._document=e,this._parentElement=t,this._optionsService=r,this._result={width:0,height:0},this._measureElement=this._document.createElement("span"),this._measureElement.classList.add("xterm-char-measure-element"),this._measureElement.textContent="W",this._measureElement.setAttribute("aria-hidden","true"),this._parentElement.appendChild(this._measureElement)}return e.prototype.measure=function(){this._measureElement.style.fontFamily=this._optionsService.options.fontFamily,this._measureElement.style.fontSize=this._optionsService.options.fontSize+"px";var e=this._measureElement.getBoundingClientRect();return 0!==e.width&&0!==e.height&&(this._result.width=e.width,this._result.height=a(e.height)),this._result},e}()},function(e,t,r){"use strict";var i=this&&this.__decorate||function(e,t,r,i){var n,o=arguments.length,s=3>o?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,i);else for(var a=e.length-1;0<=a;a--)(n=e[a])&&(s=(3>o?n(s):3<o?n(t,r,s):n(t,r))||s);return 3<o&&s&&Object.defineProperty(t,r,s),s},n=this&&this.__param||function(e,t){return function(r,i){t(r,i,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.MouseService=void 0;var o=r(5),s=r(30),a=function(){function e(e,t){this._renderService=e,this._charSizeService=t}return e.prototype.getCoords=function(e,t,r,i,n){return s.getCoords(e,t,r,i,this._charSizeService.hasValidSize,this._renderService.dimensions.actualCellWidth,this._renderService.dimensions.actualCellHeight,n)},e.prototype.getRawByteCoords=function(e,t,r,i){var n=this.getCoords(e,t,r,i);return s.getRawByteCoords(n)},i([n(0,o.IRenderService),n(1,o.ICharSizeService)],e)}();t.MouseService=a},function(e,t,r){"use strict";var i,n=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),o=this&&this.__decorate||function(e,t,r,i){var n,o=arguments.length,s=3>o?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,i);else for(var a=e.length-1;0<=a;a--)(n=e[a])&&(s=(3>o?n(s):3<o?n(t,r,s):n(t,r))||s);return 3<o&&s&&Object.defineProperty(t,r,s),s},s=this&&this.__param||function(e,t){return function(r,i){t(r,i,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.Linkifier2=void 0;var a=r(1),c=r(0),l=r(2),u=r(7),h=function(e){function t(t){var r=e.call(this)||this;return r._bufferService=t,r._linkProviders=[],r._linkCacheDisposables=[],r._isMouseOut=!0,r._activeLine=-1,r._onShowLinkUnderline=r.register(new c.EventEmitter),r._onHideLinkUnderline=r.register(new c.EventEmitter),r.register(l.getDisposeArrayDisposable(r._linkCacheDisposables)),r}return n(t,e),Object.defineProperty(t.prototype,"onShowLinkUnderline",{get:function(){return this._onShowLinkUnderline.event},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onHideLinkUnderline",{get:function(){return this._onHideLinkUnderline.event},enumerable:!1,configurable:!0}),t.prototype.registerLinkProvider=function(e){var t=this;return this._linkProviders.push(e),{dispose:function(){var r=t._linkProviders.indexOf(e);-1!==r&&t._linkProviders.splice(r,1)}}},t.prototype.attachToDom=function(e,t,r){var i=this;this._element=e,this._mouseService=t,this._renderService=r,this.register(u.addDisposableDomListener(this._element,"mouseleave",(function(){i._isMouseOut=!0,i._clearCurrentLink()}))),this.register(u.addDisposableDomListener(this._element,"mousemove",this._onMouseMove.bind(this))),this.register(u.addDisposableDomListener(this._element,"click",this._onClick.bind(this)))},t.prototype._onMouseMove=function(e){if(this._lastMouseEvent=e,this._element&&this._mouseService){var t=this._positionFromMouseEvent(e,this._element,this._mouseService);if(t){this._isMouseOut=!1;for(var r,i=e.composedPath(),n=0;n<i.length&&!(r=i[n]).classList.contains("xterm");n++)if(r.classList.contains("xterm-hover"))return;this._lastBufferCell&&t.x===this._lastBufferCell.x&&t.y===this._lastBufferCell.y||(this._onHover(t),this._lastBufferCell=t)}}},t.prototype._onHover=function(e){return this._activeLine===e.y?void(this._currentLink&&this._linkAtPosition(this._currentLink.link,e)||(this._clearCurrentLink(),this._askForLink(e,!0))):(this._clearCurrentLink(),void this._askForLink(e,!1))},t.prototype._askForLink=function(e,t){var r,i=this;this._activeProviderReplies&&t||(null===(r=this._activeProviderReplies)||void 0===r||r.forEach((function(e){null==e||e.forEach((function(e){e.link.dispose&&e.link.dispose()}))})),this._activeProviderReplies=new Map,this._activeLine=e.y);var n=!1;this._linkProviders.forEach((function(r,o){var s;t?(null===(s=i._activeProviderReplies)||void 0===s?void 0:s.get(o))&&(n=i._checkLinkProviderResult(o,e,n)):r.provideLinks(e.y,(function(t){var r,s;if(!i._isMouseOut){var a=null==t?void 0:t.map((function(e){return{link:e}}));null===(r=i._activeProviderReplies)||void 0===r||r.set(o,a),n=i._checkLinkProviderResult(o,e,n),(null===(s=i._activeProviderReplies)||void 0===s?void 0:s.size)===i._linkProviders.length&&i._removeIntersectingLinks(e.y,i._activeProviderReplies)}}))}))},t.prototype._removeIntersectingLinks=function(e,t){for(var r,i=new Set,n=0;n<t.size;n++)if(r=t.get(n))for(var o=0;o<r.length;o++)for(var s=r[o],a=s.link.range.start.y<e?0:s.link.range.start.x,c=s.link.range.end.y>e?this._bufferService.cols:s.link.range.end.x,l=a;l<=c;l++){if(i.has(l)){r.splice(o--,1);break}i.add(l)}},t.prototype._checkLinkProviderResult=function(e,t,r){var i,n=this;if(!this._activeProviderReplies)return r;for(var o=this._activeProviderReplies.get(e),s=!1,a=0;a<e;a++)this._activeProviderReplies.has(a)&&!this._activeProviderReplies.get(a)||(s=!0);if(!s&&o){var c=o.find((function(e){return n._linkAtPosition(e.link,t)}));c&&(r=!0,this._handleNewLink(c))}if(this._activeProviderReplies.size===this._linkProviders.length&&!r)for(a=0;a<this._activeProviderReplies.size;a++){var l=null===(i=this._activeProviderReplies.get(a))||void 0===i?void 0:i.find((function(e){return n._linkAtPosition(e.link,t)}));if(l){r=!0,this._handleNewLink(l);break}}return r},t.prototype._onClick=function(e){if(this._element&&this._mouseService&&this._currentLink){var t=this._positionFromMouseEvent(e,this._element,this._mouseService);t&&this._linkAtPosition(this._currentLink.link,t)&&this._currentLink.link.activate(e,this._currentLink.link.text)}},t.prototype._clearCurrentLink=function(e,t){this._element&&this._currentLink&&this._lastMouseEvent&&(!e||!t||this._currentLink.link.range.start.y>=e&&this._currentLink.link.range.end.y<=t)&&(this._linkLeave(this._element,this._currentLink.link,this._lastMouseEvent),this._currentLink=void 0,l.disposeArray(this._linkCacheDisposables))},t.prototype._handleNewLink=function(e){var t=this;if(this._element&&this._lastMouseEvent&&this._mouseService){var r=this._positionFromMouseEvent(this._lastMouseEvent,this._element,this._mouseService);r&&this._linkAtPosition(e.link,r)&&(this._currentLink=e,this._currentLink.state={decorations:{underline:void 0===e.link.decorations||e.link.decorations.underline,pointerCursor:void 0===e.link.decorations||e.link.decorations.pointerCursor},isHovered:!0},this._linkHover(this._element,e.link,this._lastMouseEvent),e.link.decorations={},Object.defineProperties(e.link.decorations,{pointerCursor:{get:function(){var e,r;return null===(r=null===(e=t._currentLink)||void 0===e?void 0:e.state)||void 0===r?void 0:r.decorations.pointerCursor},set:function(e){var r,i;(null===(r=t._currentLink)||void 0===r?void 0:r.state)&&t._currentLink.state.decorations.pointerCursor!==e&&(t._currentLink.state.decorations.pointerCursor=e,t._currentLink.state.isHovered&&(null===(i=t._element)||void 0===i||i.classList.toggle("xterm-cursor-pointer",e)))}},underline:{get:function(){var e,r;return null===(r=null===(e=t._currentLink)||void 0===e?void 0:e.state)||void 0===r?void 0:r.decorations.underline},set:function(r){var i,n,o;(null===(i=t._currentLink)||void 0===i?void 0:i.state)&&(null===(o=null===(n=t._currentLink)||void 0===n?void 0:n.state)||void 0===o?void 0:o.decorations.underline)!==r&&(t._currentLink.state.decorations.underline=r,t._currentLink.state.isHovered&&t._fireUnderlineEvent(e.link,r))}}}),this._renderService&&this._linkCacheDisposables.push(this._renderService.onRenderedBufferChange((function(e){var r=0===e.start?0:e.start+1+t._bufferService.buffer.ydisp;t._clearCurrentLink(r,e.end+1+t._bufferService.buffer.ydisp)}))))}},t.prototype._linkHover=function(e,t,r){var i;(null===(i=this._currentLink)||void 0===i?void 0:i.state)&&(this._currentLink.state.isHovered=!0,this._currentLink.state.decorations.underline&&this._fireUnderlineEvent(t,!0),this._currentLink.state.decorations.pointerCursor&&e.classList.add("xterm-cursor-pointer")),t.hover&&t.hover(r,t.text)},t.prototype._fireUnderlineEvent=function(e,t){var r=e.range,i=this._bufferService.buffer.ydisp,n=this._createLinkUnderlineEvent(r.start.x-1,r.start.y-i-1,r.end.x,r.end.y-i-1,void 0);(t?this._onShowLinkUnderline:this._onHideLinkUnderline).fire(n)},t.prototype._linkLeave=function(e,t,r){var i;(null===(i=this._currentLink)||void 0===i?void 0:i.state)&&(this._currentLink.state.isHovered=!1,this._currentLink.state.decorations.underline&&this._fireUnderlineEvent(t,!1),this._currentLink.state.decorations.pointerCursor&&e.classList.remove("xterm-cursor-pointer")),t.leave&&t.leave(r,t.text)},t.prototype._linkAtPosition=function(e,t){var r=e.range.start.y===e.range.end.y,i=e.range.start.y<t.y,n=e.range.end.y>t.y;return(r&&e.range.start.x<=t.x&&e.range.end.x>=t.x||i&&e.range.end.x>=t.x||n&&e.range.start.x<=t.x||i&&n)&&e.range.start.y<=t.y&&e.range.end.y>=t.y},t.prototype._positionFromMouseEvent=function(e,t,r){var i=r.getCoords(e,t,this._bufferService.cols,this._bufferService.rows);if(i)return{x:i[0],y:i[1]+this._bufferService.buffer.ydisp}},t.prototype._createLinkUnderlineEvent=function(e,t,r,i,n){return{x1:e,y1:t,x2:r,y2:i,cols:this._bufferService.cols,fg:n}},o([s(0,a.IBufferService)],t)}(l.Disposable);t.Linkifier2=h},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CoreBrowserService=void 0;var r=function(){function e(e){this._textarea=e}return Object.defineProperty(e.prototype,"isFocused",{get:function(){return document.activeElement===this._textarea&&document.hasFocus()},enumerable:!1,configurable:!0}),e}();t.CoreBrowserService=r},function(e,t,r){"use strict";var i,o=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0}),t.CoreTerminal=void 0;var s=r(2),a=r(1),l=r(66),u=r(67),h=r(68),f=r(74),d=r(75),p=r(0),_=r(76),v=r(77),g=r(78),y=r(80),b=r(81),S=r(19),m=r(82),C=function(e){function t(t){var r=e.call(this)||this;return r._onBinary=new p.EventEmitter,r._onData=new p.EventEmitter,r._onLineFeed=new p.EventEmitter,r._onResize=new p.EventEmitter,r._onScroll=new p.EventEmitter,r._instantiationService=new l.InstantiationService,r.optionsService=new f.OptionsService(t),r._instantiationService.setService(a.IOptionsService,r.optionsService),r._bufferService=r.register(r._instantiationService.createInstance(h.BufferService)),r._instantiationService.setService(a.IBufferService,r._bufferService),r._logService=r._instantiationService.createInstance(u.LogService),r._instantiationService.setService(a.ILogService,r._logService),r._coreService=r.register(r._instantiationService.createInstance(d.CoreService,(function(){return r.scrollToBottom()}))),r._instantiationService.setService(a.ICoreService,r._coreService),r._coreMouseService=r._instantiationService.createInstance(_.CoreMouseService),r._instantiationService.setService(a.ICoreMouseService,r._coreMouseService),r._dirtyRowService=r._instantiationService.createInstance(v.DirtyRowService),r._instantiationService.setService(a.IDirtyRowService,r._dirtyRowService),r.unicodeService=r._instantiationService.createInstance(g.UnicodeService),r._instantiationService.setService(a.IUnicodeService,r.unicodeService),r._charsetService=r._instantiationService.createInstance(y.CharsetService),r._instantiationService.setService(a.ICharsetService,r._charsetService),r._inputHandler=new S.InputHandler(r._bufferService,r._charsetService,r._coreService,r._dirtyRowService,r._logService,r.optionsService,r._coreMouseService,r.unicodeService),r.register(p.forwardEvent(r._inputHandler.onLineFeed,r._onLineFeed)),r.register(r._inputHandler),r.register(p.forwardEvent(r._bufferService.onResize,r._onResize)),r.register(p.forwardEvent(r._coreService.onData,r._onData)),r.register(p.forwardEvent(r._coreService.onBinary,r._onBinary)),r.register(r.optionsService.onOptionChange((function(e){return r._updateOptions(e)}))),r._writeBuffer=new m.WriteBuffer((function(e){return r._inputHandler.parse(e)})),r}return o(t,e),Object.defineProperty(t.prototype,"onBinary",{get:function(){return this._onBinary.event},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onData",{get:function(){return this._onData.event},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onLineFeed",{get:function(){return this._onLineFeed.event},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onResize",{get:function(){return this._onResize.event},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onScroll",{get:function(){return this._onScroll.event},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cols",{get:function(){return this._bufferService.cols},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"rows",{get:function(){return this._bufferService.rows},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"buffers",{get:function(){return this._bufferService.buffers},enumerable:!1,configurable:!0}),t.prototype.dispose=function(){var t;this._isDisposed||(e.prototype.dispose.call(this),null===(t=this._windowsMode)||void 0===t||t.dispose(),this._windowsMode=void 0)},t.prototype.write=function(e,t){this._writeBuffer.write(e,t)},t.prototype.writeSync=function(e){this._writeBuffer.writeSync(e)},t.prototype.resize=function(e,t){isNaN(e)||isNaN(t)||(e=n(e,h.MINIMUM_COLS),t=n(t,h.MINIMUM_ROWS),this._bufferService.resize(e,t))},t.prototype.scroll=function(e,t){void 0===t&&(t=!1);var r,i=this._bufferService.buffer;(r=this._cachedBlankLine)&&r.length===this.cols&&r.getFg(0)===e.fg&&r.getBg(0)===e.bg||(r=i.getBlankLine(e,t),this._cachedBlankLine=r),r.isWrapped=t;var o=i.ybase+i.scrollTop,s=i.ybase+i.scrollBottom;if(0===i.scrollTop){var a=i.lines.isFull;s===i.lines.length-1?a?i.lines.recycle().copyFrom(r):i.lines.push(r.clone()):i.lines.splice(s+1,0,r.clone()),a?this._bufferService.isUserScrolling&&(i.ydisp=n(i.ydisp-1,0)):(i.ybase++,this._bufferService.isUserScrolling||i.ydisp++)}else i.lines.shiftElements(o+1,s-o+1-1,-1),i.lines.set(s,r.clone());this._bufferService.isUserScrolling||(i.ydisp=i.ybase),this._dirtyRowService.markRangeDirty(i.scrollTop,i.scrollBottom),this._onScroll.fire(i.ydisp)},t.prototype.scrollLines=function(e,t){var r=this._bufferService.buffer;if(0>e){if(0===r.ydisp)return;this._bufferService.isUserScrolling=!0}else e+r.ydisp>=r.ybase&&(this._bufferService.isUserScrolling=!1);var i=r.ydisp;r.ydisp=n(c(r.ydisp+e,r.ybase),0),i!==r.ydisp&&(t||this._onScroll.fire(r.ydisp))},t.prototype.scrollPages=function(e){this.scrollLines(e*(this.rows-1))},t.prototype.scrollToTop=function(){this.scrollLines(-this._bufferService.buffer.ydisp)},t.prototype.scrollToBottom=function(){this.scrollLines(this._bufferService.buffer.ybase-this._bufferService.buffer.ydisp)},t.prototype.scrollToLine=function(e){var t=e-this._bufferService.buffer.ydisp;0!=t&&this.scrollLines(t)},t.prototype.addEscHandler=function(e,t){return this._inputHandler.addEscHandler(e,t)},t.prototype.addDcsHandler=function(e,t){return this._inputHandler.addDcsHandler(e,t)},t.prototype.addCsiHandler=function(e,t){return this._inputHandler.addCsiHandler(e,t)},t.prototype.addOscHandler=function(e,t){return this._inputHandler.addOscHandler(e,t)},t.prototype._setup=function(){this.optionsService.options.windowsMode&&this._enableWindowsMode()},t.prototype.reset=function(){this._inputHandler.reset(),this._bufferService.reset(),this._charsetService.reset(),this._coreService.reset(),this._coreMouseService.reset()},t.prototype._updateOptions=function(e){var t;"scrollback"===e?this.buffers.resize(this.cols,this.rows):"windowsMode"===e&&(this.optionsService.options.windowsMode?this._enableWindowsMode():(null===(t=this._windowsMode)||void 0===t||t.dispose(),this._windowsMode=void 0))},t.prototype._enableWindowsMode=function(){var e=this;if(!this._windowsMode){var t=[];t.push(this.onLineFeed(b.updateWindowsModeWrappedState.bind(null,this._bufferService))),t.push(this.addCsiHandler({final:"H"},(function(){return b.updateWindowsModeWrappedState(e._bufferService),!1}))),this._windowsMode={dispose:function(){for(var e=0,r=t;e<r.length;e++)r[e].dispose()}}}},t}(s.Disposable);t.CoreTerminal=C},function(e,t,r){"use strict";var i=this&&this.__spreadArrays||function(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;var i=Array(e),n=0;for(t=0;t<r;t++)for(var o=arguments[t],s=0,a=o.length;s<a;s++,n++)i[n]=o[s];return i};Object.defineProperty(t,"__esModule",{value:!0}),t.InstantiationService=t.ServiceCollection=void 0;var n=r(1),o=r(14),s=function(){function e(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._entries=new Map;for(var r=0,i=e;r<i.length;r++){var n=i[r],o=n[0],s=n[1];this.set(o,s)}}return e.prototype.set=function(e,t){var r=this._entries.get(e);return this._entries.set(e,t),r},e.prototype.forEach=function(e){this._entries.forEach((function(t,r){return e(r,t)}))},e.prototype.has=function(e){return this._entries.has(e)},e.prototype.get=function(e){return this._entries.get(e)},e}();t.ServiceCollection=s;var a=function(){function e(){this._services=new s,this._services.set(n.IInstantiationService,this)}return e.prototype.setService=function(e,t){this._services.set(e,t)},e.prototype.getService=function(e){return this._services.get(e)},e.prototype.createInstance=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];for(var n=o.getServiceDependencies(e).sort((function(e,t){return e.index-t.index})),s=[],a=0,c=n;a<c.length;a++){var l=c[a],u=this._services.get(l.id);if(!u)throw new Error("[createInstance] "+e.name+" depends on UNKNOWN service "+l.id+".");s.push(u)}var h=0<n.length?n[0].index:t.length;if(t.length!==h)throw new Error("[createInstance] First service dependency of "+e.name+" at position "+(h+1)+" conflicts with "+t.length+" static arguments");return new(e.bind.apply(e,i([void 0],i(t,s))))},e}();t.InstantiationService=a},function(e,t,r){"use strict";var i=this&&this.__decorate||function(e,t,r,i){var n,o=arguments.length,s=3>o?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,i);else for(var a=e.length-1;0<=a;a--)(n=e[a])&&(s=(3>o?n(s):3<o?n(t,r,s):n(t,r))||s);return 3<o&&s&&Object.defineProperty(t,r,s),s},n=this&&this.__param||function(e,t){return function(r,i){t(r,i,e)}},o=this&&this.__spreadArrays||function(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;var i=Array(e),n=0;for(t=0;t<r;t++)for(var o=arguments[t],s=0,a=o.length;s<a;s++,n++)i[n]=o[s];return i};Object.defineProperty(t,"__esModule",{value:!0}),t.LogService=t.LogLevel=void 0;var s,a=r(1);!function(e){e[e.DEBUG=0]="DEBUG",e[e.INFO=1]="INFO",e[e.WARN=2]="WARN",e[e.ERROR=3]="ERROR",e[e.OFF=4]="OFF"}(s=t.LogLevel||(t.LogLevel={}));var c={debug:s.DEBUG,info:s.INFO,warn:s.WARN,error:s.ERROR,off:s.OFF},l=function(){function e(e){var t=this;this._optionsService=e,this._updateLogLevel(),this._optionsService.onOptionChange((function(e){"logLevel"===e&&t._updateLogLevel()}))}return e.prototype._updateLogLevel=function(){this._logLevel=c[this._optionsService.options.logLevel]},e.prototype._evalLazyOptionalParams=function(e){for(var t=0;t<e.length;t++)"function"==typeof e[t]&&(e[t]=e[t]())},e.prototype._log=function(e,t,r){this._evalLazyOptionalParams(r),e.call.apply(e,o([console,"xterm.js: "+t],r))},e.prototype.debug=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];this._logLevel<=s.DEBUG&&this._log(console.log,e,t)},e.prototype.info=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];this._logLevel<=s.INFO&&this._log(console.info,e,t)},e.prototype.warn=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];this._logLevel<=s.WARN&&this._log(console.warn,e,t)},e.prototype.error=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];this._logLevel<=s.ERROR&&this._log(console.error,e,t)},i([n(0,a.IOptionsService)],e)}();t.LogService=l},function(e,t,r){"use strict";var i,o=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),s=this&&this.__decorate||function(e,t,r,i){var n,o=arguments.length,s=3>o?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,i);else for(var a=e.length-1;0<=a;a--)(n=e[a])&&(s=(3>o?n(s):3<o?n(t,r,s):n(t,r))||s);return 3<o&&s&&Object.defineProperty(t,r,s),s},a=this&&this.__param||function(e,t){return function(r,i){t(r,i,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.BufferService=t.MINIMUM_ROWS=t.MINIMUM_COLS=void 0;var c=r(1),l=r(69),u=r(0),h=r(2);t.MINIMUM_COLS=2,t.MINIMUM_ROWS=1;var f=function(e){function r(r){var i=e.call(this)||this;return i._optionsService=r,i.isUserScrolling=!1,i._onResize=new u.EventEmitter,i.cols=n(r.options.cols,t.MINIMUM_COLS),i.rows=n(r.options.rows,t.MINIMUM_ROWS),i.buffers=new l.BufferSet(r,i),i}return o(r,e),Object.defineProperty(r.prototype,"onResize",{get:function(){return this._onResize.event},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"buffer",{get:function(){return this.buffers.active},enumerable:!1,configurable:!0}),r.prototype.dispose=function(){e.prototype.dispose.call(this),this.buffers.dispose()},r.prototype.resize=function(e,t){this.cols=e,this.rows=t,this.buffers.resize(e,t),this.buffers.setupTabStops(this.cols),this._onResize.fire({cols:e,rows:t})},r.prototype.reset=function(){this.buffers.dispose(),this.buffers=new l.BufferSet(this._optionsService,this),this.isUserScrolling=!1},s([a(0,c.IOptionsService)],r)}(h.Disposable);t.BufferService=f},function(e,t,r){"use strict";var i,n=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0}),t.BufferSet=void 0;var o=r(70),s=r(0),a=function(e){function t(t,r){var i=e.call(this)||this;return i._onBufferActivate=i.register(new s.EventEmitter),i._normal=new o.Buffer(!0,t,r),i._normal.fillViewportRows(),i._alt=new o.Buffer(!1,t,r),i._activeBuffer=i._normal,i.setupTabStops(),i}return n(t,e),Object.defineProperty(t.prototype,"onBufferActivate",{get:function(){return this._onBufferActivate.event},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"alt",{get:function(){return this._alt},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"active",{get:function(){return this._activeBuffer},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"normal",{get:function(){return this._normal},enumerable:!1,configurable:!0}),t.prototype.activateNormalBuffer=function(){this._activeBuffer!==this._normal&&(this._normal.x=this._alt.x,this._normal.y=this._alt.y,this._alt.clear(),this._activeBuffer=this._normal,this._onBufferActivate.fire({activeBuffer:this._normal,inactiveBuffer:this._alt}))},t.prototype.activateAltBuffer=function(e){this._activeBuffer!==this._alt&&(this._alt.fillViewportRows(e),this._alt.x=this._normal.x,this._alt.y=this._normal.y,this._activeBuffer=this._alt,this._onBufferActivate.fire({activeBuffer:this._alt,inactiveBuffer:this._normal}))},t.prototype.resize=function(e,t){this._normal.resize(e,t),this._alt.resize(e,t)},t.prototype.setupTabStops=function(e){this._normal.setupTabStops(e),this._alt.setupTabStops(e)},t}(r(2).Disposable);t.BufferSet=a},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BufferStringIterator=t.Buffer=t.MAX_BUFFER_SIZE=void 0;var i=r(71),o=r(16),s=r(4),a=r(3),l=r(72),u=r(73),h=r(20),f=r(6);t.MAX_BUFFER_SIZE=4294967295;var d=function(){function e(e,t,r){this._hasScrollback=e,this._optionsService=t,this._bufferService=r,this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.savedY=0,this.savedX=0,this.savedCurAttrData=o.DEFAULT_ATTR_DATA.clone(),this.savedCharset=h.DEFAULT_CHARSET,this.markers=[],this._nullCell=s.CellData.fromCharData([0,a.NULL_CELL_CHAR,a.NULL_CELL_WIDTH,a.NULL_CELL_CODE]),this._whitespaceCell=s.CellData.fromCharData([0,a.WHITESPACE_CELL_CHAR,a.WHITESPACE_CELL_WIDTH,a.WHITESPACE_CELL_CODE]),this._cols=this._bufferService.cols,this._rows=this._bufferService.rows,this.lines=new i.CircularList(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()}return e.prototype.getNullCell=function(e){return e?(this._nullCell.fg=e.fg,this._nullCell.bg=e.bg,this._nullCell.extended=e.extended):(this._nullCell.fg=0,this._nullCell.bg=0,this._nullCell.extended=new f.ExtendedAttrs),this._nullCell},e.prototype.getWhitespaceCell=function(e){return e?(this._whitespaceCell.fg=e.fg,this._whitespaceCell.bg=e.bg,this._whitespaceCell.extended=e.extended):(this._whitespaceCell.fg=0,this._whitespaceCell.bg=0,this._whitespaceCell.extended=new f.ExtendedAttrs),this._whitespaceCell},e.prototype.getBlankLine=function(e,t){return new o.BufferLine(this._bufferService.cols,this.getNullCell(e),t)},Object.defineProperty(e.prototype,"hasScrollback",{get:function(){return this._hasScrollback&&this.lines.maxLength>this._rows},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isCursorInViewport",{get:function(){var e=this.ybase+this.y-this.ydisp;return 0<=e&&e<this._rows},enumerable:!1,configurable:!0}),e.prototype._getCorrectBufferLength=function(e){if(!this._hasScrollback)return e;var r=e+this._optionsService.options.scrollback;return r>t.MAX_BUFFER_SIZE?t.MAX_BUFFER_SIZE:r},e.prototype.fillViewportRows=function(e){if(0===this.lines.length){void 0===e&&(e=o.DEFAULT_ATTR_DATA);for(var t=this._rows;t--;)this.lines.push(this.getBlankLine(e))}},e.prototype.clear=function(){this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.lines=new i.CircularList(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()},e.prototype.resize=function(e,t){var r=this.getNullCell(o.DEFAULT_ATTR_DATA),i=this._getCorrectBufferLength(t);if(i>this.lines.maxLength&&(this.lines.maxLength=i),0<this.lines.length){if(this._cols<e)for(var s=0;s<this.lines.length;s++)this.lines.get(s).resize(e,r);var a=0;if(this._rows<t)for(var l=this._rows;l<t;l++)this.lines.length<t+this.ybase&&(this._optionsService.options.windowsMode?this.lines.push(new o.BufferLine(e,r)):0<this.ybase&&this.lines.length<=this.ybase+this.y+a+1?(this.ybase--,a++,0<this.ydisp&&this.ydisp--):this.lines.push(new o.BufferLine(e,r)));else for(l=this._rows;l>t;l--)this.lines.length>t+this.ybase&&(this.lines.length>this.ybase+this.y+1?this.lines.pop():(this.ybase++,this.ydisp++));if(i<this.lines.maxLength){var u=this.lines.length-i;0<u&&(this.lines.trimStart(u),this.ybase=n(this.ybase-u,0),this.ydisp=n(this.ydisp-u,0),this.savedY=n(this.savedY-u,0)),this.lines.maxLength=i}this.x=c(this.x,e-1),this.y=c(this.y,t-1),a&&(this.y+=a),this.savedX=c(this.savedX,e-1),this.scrollTop=0}if(this.scrollBottom=t-1,this._isReflowEnabled&&(this._reflow(e,t),this._cols>e))for(s=0;s<this.lines.length;s++)this.lines.get(s).resize(e,r);this._cols=e,this._rows=t},Object.defineProperty(e.prototype,"_isReflowEnabled",{get:function(){return this._hasScrollback&&!this._optionsService.options.windowsMode},enumerable:!1,configurable:!0}),e.prototype._reflow=function(e,t){this._cols!==e&&(e>this._cols?this._reflowLarger(e,t):this._reflowSmaller(e,t))},e.prototype._reflowLarger=function(e,t){var r=l.reflowLargerGetLinesToRemove(this.lines,this._cols,e,this.ybase+this.y,this.getNullCell(o.DEFAULT_ATTR_DATA));if(0<r.length){var i=l.reflowLargerCreateNewLayout(this.lines,r);l.reflowLargerApplyNewLayout(this.lines,i.layout),this._reflowLargerAdjustViewport(e,t,i.countRemoved)}},e.prototype._reflowLargerAdjustViewport=function(e,t,r){for(var i=this.getNullCell(o.DEFAULT_ATTR_DATA),s=r;0<s--;)0===this.ybase?(0<this.y&&this.y--,this.lines.length<t&&this.lines.push(new o.BufferLine(e,i))):(this.ydisp===this.ybase&&this.ydisp--,this.ybase--);this.savedY=n(this.savedY-r,0)},e.prototype._reflowSmaller=function(e,t){for(var r,i=this.getNullCell(o.DEFAULT_ATTR_DATA),s=[],a=0,u=this.lines.length-1;0<=u;u--)if((r=this.lines.get(u))&&(r.isWrapped||!(r.getTrimmedLength()<=e))){for(var h=[r];r.isWrapped&&0<u;)r=this.lines.get(--u),h.unshift(r);var f=this.ybase+this.y;if(!(f>=u&&f<u+h.length)){var d,p=h[h.length-1].getTrimmedLength(),_=l.reflowSmallerGetNewLineLengths(h,this._cols,e),v=_.length-h.length;d=0===this.ybase&&this.y!==this.lines.length-1?n(0,this.y-this.lines.maxLength+v):n(0,this.lines.length-this.lines.maxLength+v);for(var g,y=[],b=0;b<v;b++)g=this.getBlankLine(o.DEFAULT_ATTR_DATA,!0),y.push(g);0<y.length&&(s.push({start:u+h.length+a,newLines:y}),a+=y.length),h.push.apply(h,y);var S=_.length-1,m=_[S];0===m&&(m=_[--S]);for(var C,w=h.length-v-1,E=p;0<=w;)if(C=c(E,m),h[S].copyCellsFrom(h[w],E-C,m-C,C,!0),0==(m-=C)&&(m=_[--S]),0==(E-=C)){w--;var x=n(w,0);E=l.getWrappedLineTrimmedLength(h,x,this._cols)}for(b=0;b<h.length;b++)_[b]<e&&h[b].setCell(_[b],i);for(var L=v-d;0<L--;)0===this.ybase?this.y<t-1?(this.y++,this.lines.pop()):(this.ybase++,this.ydisp++):this.ybase<c(this.lines.maxLength,this.lines.length+a)-t&&(this.ybase===this.ydisp&&this.ydisp++,this.ybase++);this.savedY=c(this.savedY+v,this.ybase+t-1)}}if(0<s.length){var A=[],R=[];for(b=0;b<this.lines.length;b++)R.push(this.lines.get(b));var O=this.lines.length,k=O-1,T=0,P=s[T];this.lines.length=c(this.lines.maxLength,this.lines.length+a);var D=0;for(b=c(this.lines.maxLength-1,O+a-1);0<=b;b--)if(P&&P.start>k+D){for(var M=P.newLines.length-1;0<=M;M--)this.lines.set(b--,P.newLines[M]);b++,A.push({index:k+1,amount:P.newLines.length}),D+=P.newLines.length,P=s[++T]}else this.lines.set(b,R[k--]);var I=0;for(b=A.length-1;0<=b;b--)A[b].index+=I,this.lines.onInsertEmitter.fire(A[b]),I+=A[b].amount;var H=n(0,O+a-this.lines.maxLength);0<H&&this.lines.onTrimEmitter.fire(H)}},e.prototype.stringIndexToBufferIndex=function(e,t,r){for(void 0===r&&(r=!1);t;){var i=this.lines.get(e);if(!i)return[-1,-1];for(var n=r?i.getTrimmedLength():i.length,o=0;o<n;++o)if(i.get(o)[a.CHAR_DATA_WIDTH_INDEX]&&(t-=i.get(o)[a.CHAR_DATA_CHAR_INDEX].length||1),0>t)return[e,o];e++}return[e,0]},e.prototype.translateBufferLineToString=function(e,t,r,i){void 0===r&&(r=0);var n=this.lines.get(e);return n?n.translateToString(t,r,i):""},e.prototype.getWrappedRangeForLine=function(e){for(var t=e,r=e;0<t&&this.lines.get(t).isWrapped;)t--;for(;r+1<this.lines.length&&this.lines.get(r+1).isWrapped;)r++;return{first:t,last:r}},e.prototype.setupTabStops=function(e){for(null==e?(this.tabs={},e=0):this.tabs[e]||(e=this.prevStop(e));e<this._cols;e+=this._optionsService.options.tabStopWidth)this.tabs[e]=!0},e.prototype.prevStop=function(e){for(null==e&&(e=this.x);!this.tabs[--e]&&0<e;);return e>=this._cols?this._cols-1:0>e?0:e},e.prototype.nextStop=function(e){for(null==e&&(e=this.x);!this.tabs[++e]&&e<this._cols;);return e>=this._cols?this._cols-1:0>e?0:e},e.prototype.addMarker=function(e){var t=this,r=new u.Marker(e);return this.markers.push(r),r.register(this.lines.onTrim((function(e){r.line-=e,0>r.line&&r.dispose()}))),r.register(this.lines.onInsert((function(e){r.line>=e.index&&(r.line+=e.amount)}))),r.register(this.lines.onDelete((function(e){r.line>=e.index&&r.line<e.index+e.amount&&r.dispose(),r.line>e.index&&(r.line-=e.amount)}))),r.register(r.onDispose((function(){return t._removeMarker(r)}))),r},e.prototype._removeMarker=function(e){this.markers.splice(this.markers.indexOf(e),1)},e.prototype.iterator=function(e,t,r,i,n){return new p(this,e,t,r,i,n)},e}();t.Buffer=d;var p=function(){function e(e,t,r,i,n,o){void 0===r&&(r=0),void 0===i&&(i=e.lines.length),void 0===n&&(n=0),void 0===o&&(o=0),this._buffer=e,this._trimRight=t,this._startIndex=r,this._endIndex=i,this._startOverscan=n,this._endOverscan=o,0>this._startIndex&&(this._startIndex=0),this._endIndex>this._buffer.lines.length&&(this._endIndex=this._buffer.lines.length),this._current=this._startIndex}return e.prototype.hasNext=function(){return this._current<this._endIndex},e.prototype.next=function(){var e=this._buffer.getWrappedRangeForLine(this._current);e.first<this._startIndex-this._startOverscan&&(e.first=this._startIndex-this._startOverscan),e.last>this._endIndex+this._endOverscan&&(e.last=this._endIndex+this._endOverscan),e.first=n(e.first,0),e.last=c(e.last,this._buffer.lines.length);for(var t="",r=e.first;r<=e.last;++r)t+=this._buffer.translateBufferLineToString(r,this._trimRight);return this._current=e.last+1,{range:e,content:t}},e}();t.BufferStringIterator=p},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CircularList=void 0;var i=r(0),n=function(){function e(e){this._maxLength=e,this.onDeleteEmitter=new i.EventEmitter,this.onInsertEmitter=new i.EventEmitter,this.onTrimEmitter=new i.EventEmitter,this._array=Array(this._maxLength),this._startIndex=0,this._length=0}return Object.defineProperty(e.prototype,"onDelete",{get:function(){return this.onDeleteEmitter.event},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"onInsert",{get:function(){return this.onInsertEmitter.event},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"onTrim",{get:function(){return this.onTrimEmitter.event},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"maxLength",{get:function(){return this._maxLength},set:function(e){if(this._maxLength!==e){for(var t=Array(e),r=0;r<c(e,this.length);r++)t[r]=this._array[this._getCyclicIndex(r)];this._array=t,this._maxLength=e,this._startIndex=0}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"length",{get:function(){return this._length},set:function(e){if(e>this._length)for(var t=this._length;t<e;t++)this._array[t]=void 0;this._length=e},enumerable:!1,configurable:!0}),e.prototype.get=function(e){return this._array[this._getCyclicIndex(e)]},e.prototype.set=function(e,t){this._array[this._getCyclicIndex(e)]=t},e.prototype.push=function(e){this._array[this._getCyclicIndex(this._length)]=e,this._length===this._maxLength?(this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1)):this._length++},e.prototype.recycle=function(){if(this._length!==this._maxLength)throw new Error("Can only recycle when the buffer is full");return this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1),this._array[this._getCyclicIndex(this._length-1)]},Object.defineProperty(e.prototype,"isFull",{get:function(){return this._length===this._maxLength},enumerable:!1,configurable:!0}),e.prototype.pop=function(){return this._array[this._getCyclicIndex(this._length---1)]},e.prototype.splice=function(e,t){for(var r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(t){for(var n=e;n<this._length-t;n++)this._array[this._getCyclicIndex(n)]=this._array[this._getCyclicIndex(n+t)];this._length-=t}for(n=this._length-1;n>=e;n--)this._array[this._getCyclicIndex(n+r.length)]=this._array[this._getCyclicIndex(n)];for(n=0;n<r.length;n++)this._array[this._getCyclicIndex(e+n)]=r[n];if(this._length+r.length>this._maxLength){var o=this._length+r.length-this._maxLength;this._startIndex+=o,this._length=this._maxLength,this.onTrimEmitter.fire(o)}else this._length+=r.length},e.prototype.trimStart=function(e){e>this._length&&(e=this._length),this._startIndex+=e,this._length-=e,this.onTrimEmitter.fire(e)},e.prototype.shiftElements=function(e,t,r){if(!(0>=t)){if(0>e||e>=this._length)throw new Error("start argument out of range");if(0>e+r)throw new Error("Cannot shift elements in list beyond index 0");if(0<r){for(var i=t-1;0<=i;i--)this.set(e+i+r,this.get(e+i));var n=e+t+r-this._length;if(0<n)for(this._length+=n;this._length>this._maxLength;)this._length--,this._startIndex++,this.onTrimEmitter.fire(1)}else for(i=0;i<t;i++)this.set(e+i+r,this.get(e+i))}},e.prototype._getCyclicIndex=function(e){return(this._startIndex+e)%this._maxLength},e}();t.CircularList=n},function(e,t){"use strict";function r(e,t,r){if(t===e.length-1)return e[t].getTrimmedLength();var i=!e[t].hasContent(r-1)&&1===e[t].getWidth(r-1),n=2===e[t+1].getWidth(0);return i&&n?r-1:r}Object.defineProperty(t,"__esModule",{value:!0}),t.getWrappedLineTrimmedLength=t.reflowSmallerGetNewLineLengths=t.reflowLargerApplyNewLayout=t.reflowLargerCreateNewLayout=t.reflowLargerGetLinesToRemove=void 0,t.reflowLargerGetLinesToRemove=function(e,t,i,n,o){for(var s=[],a=0;a<e.length-1;a++){var l=a,u=e.get(++l);if(u.isWrapped){for(var h=[e.get(a)];l<e.length&&u.isWrapped;)h.push(u),u=e.get(++l);if(n>=a&&n<l)a+=h.length-1;else{for(var f=0,d=r(h,f,t),p=1,_=0;p<h.length;){var v=r(h,p,t),g=c(v-_,i-d);h[f].copyCellsFrom(h[p],_,d,g,!1),(d+=g)===i&&(f++,d=0),(_+=g)===v&&(p++,_=0),0===d&&0!=f&&2===h[f-1].getWidth(i-1)&&(h[f].copyCellsFrom(h[f-1],i-1,d++,1,!1),h[f-1].setCell(i-1,o))}h[f].replaceCells(d,i,o);for(var y=0,b=h.length-1;0<b&&(b>f||0===h[b].getTrimmedLength());b--)y++;0<y&&(s.push(a+h.length-y),s.push(y)),a+=h.length-1}}}return s},t.reflowLargerCreateNewLayout=function(e,t){for(var r=[],i=0,n=t[i],o=0,s=0;s<e.length;s++)if(n===s){var a=t[++i];e.onDeleteEmitter.fire({index:s-o,amount:a}),s+=a-1,o+=a,n=t[++i]}else r.push(s);return{layout:r,countRemoved:o}},t.reflowLargerApplyNewLayout=function(e,t){for(var r=[],i=0;i<t.length;i++)r.push(e.get(t[i]));for(i=0;i<r.length;i++)e.set(i,r[i]);e.length=t.length},t.reflowSmallerGetNewLineLengths=function(e,t,i){for(var n=[],o=e.map((function(i,n){return r(e,n,t)})).reduce((function(e,t){return e+t})),s=0,a=0,c=0;c<o;){if(o-c<i){n.push(o-c);break}s+=i;var l=r(e,a,t);s>l&&(s-=l,a++);var u=2===e[a].getWidth(s-1);u&&s--;var h=u?i-1:i;n.push(h),c+=h}return n},t.getWrappedLineTrimmedLength=r},function(e,t,r){"use strict";var i,n=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0}),t.Marker=void 0;var o=r(0),s=function(e){function t(r){var i=e.call(this)||this;return i.line=r,i._id=t._nextId++,i.isDisposed=!1,i._onDispose=new o.EventEmitter,i}return n(t,e),Object.defineProperty(t.prototype,"id",{get:function(){return this._id},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onDispose",{get:function(){return this._onDispose.event},enumerable:!1,configurable:!0}),t.prototype.dispose=function(){this.isDisposed||(this.isDisposed=!0,this.line=-1,this._onDispose.fire())},t._nextId=1,t}(r(2).Disposable);t.Marker=s},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.OptionsService=t.DEFAULT_OPTIONS=t.DEFAULT_BELL_SOUND=void 0;var i=r(0),a=r(11),l=r(33);t.DEFAULT_BELL_SOUND="data:audio/mp3;base64,SUQzBAAAAAAAI1RTU0UAAAAPAAADTGF2ZjU4LjMyLjEwNAAAAAAAAAAAAAAA//tQxAADB8AhSmxhIIEVCSiJrDCQBTcu3UrAIwUdkRgQbFAZC1CQEwTJ9mjRvBA4UOLD8nKVOWfh+UlK3z/177OXrfOdKl7pyn3Xf//WreyTRUoAWgBgkOAGbZHBgG1OF6zM82DWbZaUmMBptgQhGjsyYqc9ae9XFz280948NMBWInljyzsNRFLPWdnZGWrddDsjK1unuSrVN9jJsK8KuQtQCtMBjCEtImISdNKJOopIpBFpNSMbIHCSRpRR5iakjTiyzLhchUUBwCgyKiweBv/7UsQbg8isVNoMPMjAAAA0gAAABEVFGmgqK////9bP/6XCykxBTUUzLjEwMKqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqq",t.DEFAULT_OPTIONS=Object.freeze({cols:80,rows:24,cursorBlink:!1,cursorStyle:"block",cursorWidth:1,bellSound:t.DEFAULT_BELL_SOUND,bellStyle:"none",drawBoldTextInBrightColors:!0,fastScrollModifier:"alt",fastScrollSensitivity:5,fontFamily:"courier-new, courier, monospace",fontSize:15,fontWeight:"normal",fontWeightBold:"bold",lineHeight:1,linkTooltipHoverDuration:500,letterSpacing:0,logLevel:"info",scrollback:1e3,scrollSensitivity:1,screenReaderMode:!1,macOptionIsMeta:!1,macOptionClickForcesSelection:!1,minimumContrastRatio:1,disableStdin:!1,allowProposedApi:!0,allowTransparency:!1,tabStopWidth:8,theme:{},rightClickSelectsWord:a.isMac,rendererType:"canvas",windowOptions:{},windowsMode:!1,wordSeparator:" ()[]{}',\"`",convertEol:!1,termName:"xterm",cancelEvents:!1});var u=["normal","bold","100","200","300","400","500","600","700","800","900"],h=["cols","rows"],f=function(){function e(e){this._onOptionChange=new i.EventEmitter,this.options=l.clone(t.DEFAULT_OPTIONS);for(var r,n=0,o=Object.keys(e);n<o.length;n++)if((r=o[n])in this.options)try{var s=e[r];this.options[r]=this._sanitizeAndValidateOption(r,s)}catch(e){console.error(e)}}return Object.defineProperty(e.prototype,"onOptionChange",{get:function(){return this._onOptionChange.event},enumerable:!1,configurable:!0}),e.prototype.setOption=function(e,r){if(!(e in t.DEFAULT_OPTIONS))throw new Error('No option with key "'+e+'"');if(-1!==h.indexOf(e))throw new Error('Option "'+e+'" can only be set in the constructor');this.options[e]!==r&&(r=this._sanitizeAndValidateOption(e,r),this.options[e]!==r&&(this.options[e]=r,this._onOptionChange.fire(e)))},e.prototype._sanitizeAndValidateOption=function(e,r){switch(e){case"bellStyle":case"cursorStyle":case"rendererType":case"wordSeparator":r||(r=t.DEFAULT_OPTIONS[e]);break;case"fontWeight":case"fontWeightBold":if("number"==typeof r&&1<=r&&1e3>=r)break;r=-1===u.indexOf(r)?t.DEFAULT_OPTIONS[e]:r;break;case"cursorWidth":r=s(r);case"lineHeight":case"tabStopWidth":if(1>r)throw new Error(e+" cannot be less than 1, value: "+r);break;case"minimumContrastRatio":r=n(1,c(21,o(10*r)/10));break;case"scrollback":if(0>(r=c(r,4294967295)))throw new Error(e+" cannot be less than 0, value: "+r);break;case"fastScrollSensitivity":case"scrollSensitivity":if(0>=r)throw new Error(e+" cannot be less than or equal to 0, value: "+r)}return r},e.prototype.getOption=function(e){if(!(e in t.DEFAULT_OPTIONS))throw new Error('No option with key "'+e+'"');return this.options[e]},e}();t.OptionsService=f},function(e,t,r){"use strict";var i,n=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),o=this&&this.__decorate||function(e,t,r,i){var n,o=arguments.length,s=3>o?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,i);else for(var a=e.length-1;0<=a;a--)(n=e[a])&&(s=(3>o?n(s):3<o?n(t,r,s):n(t,r))||s);return 3<o&&s&&Object.defineProperty(t,r,s),s},s=this&&this.__param||function(e,t){return function(r,i){t(r,i,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.CoreService=void 0;var a=r(1),c=r(0),l=r(33),u=r(2),h=Object.freeze({insertMode:!1}),f=Object.freeze({applicationCursorKeys:!1,applicationKeypad:!1,bracketedPasteMode:!1,origin:!1,reverseWraparound:!1,sendFocus:!1,wraparound:!0}),d=function(e){function t(t,r,i,n){var o=e.call(this)||this;return o._bufferService=r,o._logService=i,o._optionsService=n,o.isCursorInitialized=!1,o.isCursorHidden=!1,o._onData=o.register(new c.EventEmitter),o._onUserInput=o.register(new c.EventEmitter),o._onBinary=o.register(new c.EventEmitter),o._scrollToBottom=t,o.register({dispose:function(){return o._scrollToBottom=void 0}}),o.modes=l.clone(h),o.decPrivateModes=l.clone(f),o}return n(t,e),Object.defineProperty(t.prototype,"onData",{get:function(){return this._onData.event},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onUserInput",{get:function(){return this._onUserInput.event},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onBinary",{get:function(){return this._onBinary.event},enumerable:!1,configurable:!0}),t.prototype.reset=function(){this.modes=l.clone(h),this.decPrivateModes=l.clone(f)},t.prototype.triggerDataEvent=function(e,t){if(void 0===t&&(t=!1),!this._optionsService.options.disableStdin){var r=this._bufferService.buffer;r.ybase!==r.ydisp&&this._scrollToBottom(),t&&this._onUserInput.fire(),this._logService.debug('sending data "'+e+'"',(function(){return e.split("").map((function(e){return e.charCodeAt(0)}))})),this._onData.fire(e)}},t.prototype.triggerBinaryEvent=function(e){this._optionsService.options.disableStdin||(this._logService.debug('sending binary "'+e+'"',(function(){return e.split("").map((function(e){return e.charCodeAt(0)}))})),this._onBinary.fire(e))},o([s(1,a.IBufferService),s(2,a.ILogService),s(3,a.IOptionsService)],t)}(u.Disposable);t.CoreService=d},function(e,r,i){"use strict";function n(e,t){var r=(e.ctrl?16:0)|(e.shift?4:0)|(e.alt?8:0);return 4===e.button?(r|=64,r|=e.action):(r|=3&e.button,4&e.button&&(r|=64),8&e.button&&(r|=128),32===e.action?r|=32:0!==e.action||t||(r|=3)),r}var o=this&&this.__decorate||function(e,t,r,i){var n,o=arguments.length,s=3>o?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,i);else for(var a=e.length-1;0<=a;a--)(n=e[a])&&(s=(3>o?n(s):3<o?n(t,r,s):n(t,r))||s);return 3<o&&s&&Object.defineProperty(t,r,s),s},s=this&&this.__param||function(e,t){return function(r,i){t(r,i,e)}};Object.defineProperty(r,"__esModule",{value:!0}),r.CoreMouseService=void 0;var a=i(1),c=i(0),l={NONE:{events:0,restrict:function(){return!1}},X10:{events:1,restrict:function(e){return 4!==e.button&&1===e.action&&(e.ctrl=!1,e.alt=!1,e.shift=!1,!0)}},VT200:{events:19,restrict:function(e){return 32!==e.action}},DRAG:{events:23,restrict:function(e){return 32!==e.action||3!==e.button}},ANY:{events:31,restrict:function(){return!0}}},u=t,h={DEFAULT:function(e){var t=[n(e,!1)+32,e.col+32,e.row+32];return 255<t[0]||255<t[1]||255<t[2]?"":"[M"+u(t[0])+u(t[1])+u(t[2])},SGR:function(e){var t=0===e.action&&4!==e.button?"m":"M";return"[<"+n(e,!0)+";"+e.col+";"+e.row+t}},f=function(){function e(e,t){this._bufferService=e,this._coreService=t,this._protocols={},this._encodings={},this._activeProtocol="",this._activeEncoding="",this._onProtocolChange=new c.EventEmitter,this._lastEvent=null;for(var r,i=0,n=Object.keys(l);i<n.length;i++)r=n[i],this.addProtocol(r,l[r]);for(var o,s=0,a=Object.keys(h);s<a.length;s++)o=a[s],this.addEncoding(o,h[o]);this.reset()}return e.prototype.addProtocol=function(e,t){this._protocols[e]=t},e.prototype.addEncoding=function(e,t){this._encodings[e]=t},Object.defineProperty(e.prototype,"activeProtocol",{get:function(){return this._activeProtocol},set:function(e){if(!this._protocols[e])throw new Error('unknown protocol "'+e+'"');this._activeProtocol=e,this._onProtocolChange.fire(this._protocols[e].events)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"areMouseEventsActive",{get:function(){return 0!==this._protocols[this._activeProtocol].events},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"activeEncoding",{get:function(){return this._activeEncoding},set:function(e){if(!this._encodings[e])throw new Error('unknown encoding "'+e+'"');this._activeEncoding=e},enumerable:!1,configurable:!0}),e.prototype.reset=function(){this.activeProtocol="NONE",this.activeEncoding="DEFAULT",this._lastEvent=null},Object.defineProperty(e.prototype,"onProtocolChange",{get:function(){return this._onProtocolChange.event},enumerable:!1,configurable:!0}),e.prototype.triggerMouseEvent=function(e){if(0>e.col||e.col>=this._bufferService.cols||0>e.row||e.row>=this._bufferService.rows)return!1;if(4===e.button&&32===e.action)return!1;if(3===e.button&&32!==e.action)return!1;if(4!==e.button&&(2===e.action||3===e.action))return!1;if(e.col++,e.row++,32===e.action&&this._lastEvent&&this._compareEvents(this._lastEvent,e))return!1;if(!this._protocols[this._activeProtocol].restrict(e))return!1;var t=this._encodings[this._activeEncoding](e);return t&&("DEFAULT"===this._activeEncoding?this._coreService.triggerBinaryEvent(t):this._coreService.triggerDataEvent(t,!0)),this._lastEvent=e,!0},e.prototype.explainEvents=function(e){return{down:!!(1&e),up:!!(2&e),drag:!!(4&e),move:!!(8&e),wheel:!!(16&e)}},e.prototype._compareEvents=function(e,t){return e.col===t.col&&e.row===t.row&&e.button===t.button&&e.action===t.action&&e.ctrl===t.ctrl&&e.alt===t.alt&&e.shift===t.shift},o([s(0,a.IBufferService),s(1,a.ICoreService)],e)}();r.CoreMouseService=f},function(e,t,r){"use strict";var i=this&&this.__decorate||function(e,t,r,i){var n,o=arguments.length,s=3>o?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,i);else for(var a=e.length-1;0<=a;a--)(n=e[a])&&(s=(3>o?n(s):3<o?n(t,r,s):n(t,r))||s);return 3<o&&s&&Object.defineProperty(t,r,s),s},n=this&&this.__param||function(e,t){return function(r,i){t(r,i,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.DirtyRowService=void 0;var o=r(1),s=function(){function e(e){this._bufferService=e,this.clearRange()}return Object.defineProperty(e.prototype,"start",{get:function(){return this._start},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"end",{get:function(){return this._end},enumerable:!1,configurable:!0}),e.prototype.clearRange=function(){this._start=this._bufferService.buffer.y,this._end=this._bufferService.buffer.y},e.prototype.markDirty=function(e){e<this._start?this._start=e:e>this._end&&(this._end=e)},e.prototype.markRangeDirty=function(e,t){if(e>t){var r=e;e=t,t=r}e<this._start&&(this._start=e),t>this._end&&(this._end=t)},e.prototype.markAllDirty=function(){this.markRangeDirty(0,this._bufferService.rows-1)},i([n(0,o.IBufferService)],e)}();t.DirtyRowService=s},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.UnicodeService=void 0;var i=r(0),n=r(79),o=function(){function e(){this._providers=Object.create(null),this._active="",this._onChange=new i.EventEmitter;var e=new n.UnicodeV6;this.register(e),this._active=e.version,this._activeProvider=e}return Object.defineProperty(e.prototype,"onChange",{get:function(){return this._onChange.event},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"versions",{get:function(){return Object.keys(this._providers)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"activeVersion",{get:function(){return this._active},set:function(e){if(!this._providers[e])throw new Error('unknown Unicode version "'+e+'"');this._active=e,this._activeProvider=this._providers[e],this._onChange.fire(e)},enumerable:!1,configurable:!0}),e.prototype.register=function(e){this._providers[e.version]=e},e.prototype.wcwidth=function(e){return this._activeProvider.wcwidth(e)},e.prototype.getStringCellWidth=function(e){for(var t,r=0,i=e.length,n=0;n<i;++n){if(55296<=(t=e.charCodeAt(n))&&56319>=t){if(++n>=i)return r+this.wcwidth(t);var o=e.charCodeAt(n);56320<=o&&57343>=o?t=1024*(t-55296)+o-56320+65536:r+=this.wcwidth(o)}r+=this.wcwidth(t)}return r},e}();t.UnicodeService=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.UnicodeV6=void 0;var i,n=r(15),o=[[768,879],[1155,1158],[1160,1161],[1425,1469],[1471,1471],[1473,1474],[1476,1477],[1479,1479],[1536,1539],[1552,1557],[1611,1630],[1648,1648],[1750,1764],[1767,1768],[1770,1773],[1807,1807],[1809,1809],[1840,1866],[1958,1968],[2027,2035],[2305,2306],[2364,2364],[2369,2376],[2381,2381],[2385,2388],[2402,2403],[2433,2433],[2492,2492],[2497,2500],[2509,2509],[2530,2531],[2561,2562],[2620,2620],[2625,2626],[2631,2632],[2635,2637],[2672,2673],[2689,2690],[2748,2748],[2753,2757],[2759,2760],[2765,2765],[2786,2787],[2817,2817],[2876,2876],[2879,2879],[2881,2883],[2893,2893],[2902,2902],[2946,2946],[3008,3008],[3021,3021],[3134,3136],[3142,3144],[3146,3149],[3157,3158],[3260,3260],[3263,3263],[3270,3270],[3276,3277],[3298,3299],[3393,3395],[3405,3405],[3530,3530],[3538,3540],[3542,3542],[3633,3633],[3636,3642],[3655,3662],[3761,3761],[3764,3769],[3771,3772],[3784,3789],[3864,3865],[3893,3893],[3895,3895],[3897,3897],[3953,3966],[3968,3972],[3974,3975],[3984,3991],[3993,4028],[4038,4038],[4141,4144],[4146,4146],[4150,4151],[4153,4153],[4184,4185],[4448,4607],[4959,4959],[5906,5908],[5938,5940],[5970,5971],[6002,6003],[6068,6069],[6071,6077],[6086,6086],[6089,6099],[6109,6109],[6155,6157],[6313,6313],[6432,6434],[6439,6440],[6450,6450],[6457,6459],[6679,6680],[6912,6915],[6964,6964],[6966,6970],[6972,6972],[6978,6978],[7019,7027],[7616,7626],[7678,7679],[8203,8207],[8234,8238],[8288,8291],[8298,8303],[8400,8431],[12330,12335],[12441,12442],[43014,43014],[43019,43019],[43045,43046],[64286,64286],[65024,65039],[65056,65059],[65279,65279],[65529,65531]],s=[[68097,68099],[68101,68102],[68108,68111],[68152,68154],[68159,68159],[119143,119145],[119155,119170],[119173,119179],[119210,119213],[119362,119364],[917505,917505],[917536,917631],[917760,917999]],a=function(){function e(){if(this.version="6",!i){i=new Uint8Array(65536),n.fill(i,1),i[0]=0,n.fill(i,0,1,32),n.fill(i,0,127,160),n.fill(i,2,4352,4448),i[9001]=2,i[9002]=2,n.fill(i,2,11904,42192),i[12351]=1,n.fill(i,2,44032,55204),n.fill(i,2,63744,64256),n.fill(i,2,65040,65050),n.fill(i,2,65072,65136),n.fill(i,2,65280,65377),n.fill(i,2,65504,65511);for(var e=0;e<o.length;++e)n.fill(i,0,o[e][0],o[e][1]+1)}}return e.prototype.wcwidth=function(e){return 32>e?0:127>e?1:65536>e?i[e]:function(e,t){var r,i=0,n=t.length-1;if(e<t[0][0]||e>t[n][1])return!1;for(;n>=i;)if(e>t[r=i+n>>1][1])i=r+1;else{if(!(e<t[r][0]))return!0;n=r-1}return!1}(e,s)?0:131072<=e&&196605>=e||196608<=e&&262141>=e?2:1},e}();t.UnicodeV6=a},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CharsetService=void 0;var r=function(){function e(){this.glevel=0,this._charsets=[]}return e.prototype.reset=function(){this.charset=void 0,this._charsets=[],this.glevel=0},e.prototype.setgLevel=function(e){this.glevel=e,this.charset=this._charsets[e]},e.prototype.setgCharset=function(e,t){this._charsets[e]=t,this.glevel===e&&(this.charset=t)},e}();t.CharsetService=r},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.updateWindowsModeWrappedState=void 0;var i=r(3);t.updateWindowsModeWrappedState=function(e){var t=e.buffer.lines.get(e.buffer.ybase+e.buffer.y-1),r=null==t?void 0:t.get(e.cols-1),n=e.buffer.lines.get(e.buffer.ybase+e.buffer.y);n&&r&&(n.isWrapped=r[i.CHAR_DATA_CODE_INDEX]!==i.NULL_CELL_CODE&&r[i.CHAR_DATA_CODE_INDEX]!==i.WHITESPACE_CELL_CODE)}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WriteBuffer=void 0;var r=function(){function e(e){this._action=e,this._writeBuffer=[],this._callbacks=[],this._pendingData=0,this._bufferOffset=0}return e.prototype.writeSync=function(e){if(this._writeBuffer.length){for(var t=this._bufferOffset;t<this._writeBuffer.length;++t){var r=this._writeBuffer[t],i=this._callbacks[t];this._action(r),i&&i()}this._writeBuffer=[],this._callbacks=[],this._pendingData=0,this._bufferOffset=2147483647}this._action(e)},e.prototype.write=function(e,t){var r=this;if(5e7<this._pendingData)throw new Error("write data discarded, use flow control to avoid losing data");this._writeBuffer.length||(this._bufferOffset=0,setTimeout((function(){return r._innerWrite()}))),this._pendingData+=e.length,this._writeBuffer.push(e),this._callbacks.push(t)},e.prototype._innerWrite=function(){for(var e=this,t=Date.now();this._writeBuffer.length>this._bufferOffset;){var r=this._writeBuffer[this._bufferOffset],i=this._callbacks[this._bufferOffset];if(this._bufferOffset++,this._action(r),this._pendingData-=r.length,i&&i(),12<=Date.now()-t)break}this._writeBuffer.length>this._bufferOffset?(50<this._bufferOffset&&(this._writeBuffer=this._writeBuffer.slice(this._bufferOffset),this._callbacks=this._callbacks.slice(this._bufferOffset),this._bufferOffset=0),setTimeout((function(){return e._innerWrite()}),0)):(this._writeBuffer=[],this._callbacks=[],this._pendingData=0,this._bufferOffset=0)},e}();t.WriteBuffer=r},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AddonManager=void 0;var r=function(){function e(){this._addons=[]}return e.prototype.dispose=function(){for(var e=this._addons.length-1;0<=e;e--)this._addons[e].instance.dispose()},e.prototype.loadAddon=function(e,t){var r=this,i={instance:t,dispose:t.dispose,isDisposed:!1};this._addons.push(i),t.dispose=function(){return r._wrappedAddonDispose(i)},t.activate(e)},e.prototype._wrappedAddonDispose=function(e){if(!e.isDisposed){for(var t=-1,r=0;r<this._addons.length;r++)if(this._addons[r]===e){t=r;break}if(-1===t)throw new Error("Could not dispose an addon that has not been loaded");e.isDisposed=!0,e.dispose.apply(e.instance),this._addons.splice(t,1)}},e}();t.AddonManager=r}])},function(e){var t=Math.max,r=Math.floor;window,e.exports=function(e){function t(i){if(r[i])return r[i].exports;var n=r[i]={i:i,l:!1,exports:{}};return e[i].call(n.exports,n,n.exports,t),n.l=!0,n.exports}var r={};return t.m=e,t.c=r,t.d=function(e,r,i){t.o(e,r)||Object.defineProperty(e,r,{enumerable:!0,get:i})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,r){if(1&r&&(e=t(e)),8&r)return e;if(4&r&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(t.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&r&&"string"!=typeof e)for(var n in e)t.d(i,n,function(t){return e[t]}.bind(null,n));return i},t.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(r,"a",r),r},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=0)}([function(e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.FitAddon=void 0;var n=function(){function e(){}return e.prototype.activate=function(e){this._terminal=e},e.prototype.dispose=function(){},e.prototype.fit=function(){var e=this.proposeDimensions();if(e&&this._terminal){var t=this._terminal._core;this._terminal.rows===e.rows&&this._terminal.cols===e.cols||(t._renderService.clear(),this._terminal.resize(e.cols,e.rows))}},e.prototype.proposeDimensions=function(){if(this._terminal&&this._terminal.element&&this._terminal.element.parentElement){var e=this._terminal._core,i=window.getComputedStyle(this._terminal.element.parentElement),n=parseInt(i.getPropertyValue("height")),o=t(0,parseInt(i.getPropertyValue("width"))),s=window.getComputedStyle(this._terminal.element),a=n-(parseInt(s.getPropertyValue("padding-top"))+parseInt(s.getPropertyValue("padding-bottom"))),c=o-(parseInt(s.getPropertyValue("padding-right"))+parseInt(s.getPropertyValue("padding-left")))-e.viewport.scrollBarWidth;return{cols:t(2,r(c/e._renderService.dimensions.actualCellWidth)),rows:t(1,r(a/e._renderService.dimensions.actualCellHeight))}}},e}();i.FitAddon=n}])},function(e,t,r){"use strict";r.r(t);var i=r(124),n=(r.n(i),r(121)),o=(r.n(n),r(122));r.n(o);Swal.fire({title:"Please enter your WNAL host and port",input:"text",inputAttributes:{autocapitalize:"off"},showCancelButton:!0,confirmButtonText:"connect",showLoaderOnConfirm:!0,allowOutsideClick:!1}).then(e=>{if(e.value){let t=new n.Terminal;const r=new o.FitAddon;t.loadAddon(r),t.open(document.getElementById("terminal")),r.fit();let i="ws://"+e.value+"/status",s=new WebSocket(i);s.onerror=function(){t.writeln("WNAL: FAILED TO CONNECT TO "+i)},s.onclose=function(){t.writeln("WNAL: connection closed")},s.onmessage=function(e){let r=JSON.parse(e.data).message;if(/\n/.test(r)){let e=r.split("\n");for(let r=0;r<e.length;r++)r==e.length-1?(console.log("last"),t.write(e[r])):t.writeln(e[r])}else t.write(r)},t.onData(e=>{s.send(e)})}})},function(e,t,r){"use strict";r(125);var i=function(e){return e&&e.__esModule?e:{default:e}}(r(297));i.default._babelPolyfill&&"undefined"!=typeof console&&console.warn&&console.warn("@babel/polyfill is loaded more than once on this page. This is probably not desirable/intended and may have consequences if different versions of the polyfills are applied sequentially. If you do need to load the polyfill more than once, use @babel/polyfill/noConflict instead to bypass the warning."),i.default._babelPolyfill=!0},function(e,t,r){"use strict";r(126),r(269),r(271),r(274),r(276),r(278),r(280),r(282),r(284),r(286),r(288),r(290),r(292),r(296)},function(e,t,r){r(127),r(130),r(131),r(132),r(133),r(134),r(135),r(136),r(137),r(138),r(139),r(140),r(141),r(142),r(143),r(144),r(145),r(146),r(147),r(148),r(149),r(150),r(151),r(152),r(153),r(154),r(155),r(156),r(157),r(158),r(159),r(160),r(161),r(162),r(163),r(164),r(165),r(166),r(167),r(168),r(169),r(170),r(171),r(173),r(174),r(175),r(176),r(177),r(178),r(179),r(180),r(181),r(182),r(183),r(184),r(185),r(186),r(187),r(188),r(189),r(190),r(191),r(192),r(193),r(194),r(195),r(196),r(197),r(198),r(199),r(200),r(201),r(202),r(203),r(204),r(205),r(206),r(208),r(209),r(211),r(212),r(213),r(214),r(215),r(216),r(217),r(219),r(220),r(221),r(222),r(223),r(224),r(225),r(226),r(227),r(228),r(229),r(230),r(231),r(80),r(232),r(108),r(233),r(109),r(234),r(235),r(236),r(237),r(110),r(240),r(241),r(242),r(243),r(244),r(245),r(246),r(247),r(248),r(249),r(250),r(251),r(252),r(253),r(254),r(255),r(256),r(257),r(258),r(259),r(260),r(261),r(262),r(263),r(264),r(265),r(266),r(267),r(268),e.exports=r(7)},function(e,t,r){"use strict";var i=r(1),n=r(13),o=r(8),s=r(0),a=r(11),c=r(27).KEY,l=r(2),u=r(48),h=r(38),f=r(29),d=r(5),p=r(61),_=r(89),v=r(129),g=r(51),y=r(3),b=r(4),S=r(10),m=r(15),C=r(26),w=r(28),E=r(33),x=r(92),L=r(20),A=r(50),R=r(9),O=r(31),k=L.f,T=R.f,P=x.f,D=i.Symbol,M=i.JSON,I=M&&M.stringify,H="prototype",F=d("_hidden"),B=d("toPrimitive"),j={}.propertyIsEnumerable,W=u("symbol-registry"),U=u("symbols"),N=u("op-symbols"),q=Object[H],z="function"==typeof D&&!!A.f,K=i.QObject,V=!K||!K[H]||!K[H].findChild,G=o&&l((function(){return 7!=E(T({},"a",{get:function(){return T(this,"a",{value:7}).a}})).a}))?function(e,t,r){var i=k(q,t);i&&delete q[t],T(e,t,r),i&&e!==q&&T(q,t,i)}:T,Y=function(e){var t=U[e]=E(D[H]);return t._k=e,t},X=z&&"symbol"==typeof D.iterator?function(e){return"symbol"==typeof e}:function(e){return e instanceof D},J=function(e,t,r){return e===q&&J(N,t,r),y(e),t=C(t,!0),y(r),n(U,t)?(r.enumerable?(n(e,F)&&e[F][t]&&(e[F][t]=!1),r=E(r,{enumerable:w(0,!1)})):(!n(e,F)&&T(e,F,w(1,{})),e[F][t]=!0),G(e,t,r)):T(e,t,r)},Z=function(e,t){y(e);for(var r,i=v(t=m(t)),n=0,o=i.length;o>n;)J(e,r=i[n++],t[r]);return e},$=function(e){var t=j.call(this,e=C(e,!0));return(this!==q||!n(U,e)||n(N,e))&&(!(t||!n(this,e)||!n(U,e)||n(this,F)&&this[F][e])||t)},Q=function(e,t){if(e=m(e),t=C(t,!0),e!==q||!n(U,t)||n(N,t)){var r=k(e,t);return r&&n(U,t)&&!(n(e,F)&&e[F][t])&&(r.enumerable=!0),r}},ee=function(e){for(var t,r=P(m(e)),i=[],o=0;r.length>o;)n(U,t=r[o++])||t==F||t==c||i.push(t);return i},te=function(e){for(var t,r=e===q,i=P(r?N:m(e)),o=[],s=0;i.length>s;)n(U,t=i[s++])&&(!r||n(q,t))&&o.push(U[t]);return o};z||(a((D=function(){if(this instanceof D)throw TypeError("Symbol is not a constructor!");var e=f(0<arguments.length?arguments[0]:void 0),t=function(r){this===q&&t.call(N,r),n(this,F)&&n(this[F],e)&&(this[F][e]=!1),G(this,e,w(1,r))};return o&&V&&G(q,e,{configurable:!0,set:t}),Y(e)})[H],"toString",(function(){return this._k})),L.f=Q,R.f=J,r(34).f=x.f=ee,r(45).f=$,A.f=te,o&&!r(30)&&a(q,"propertyIsEnumerable",$,!0),p.f=function(e){return Y(d(e))}),s(s.G+s.W+s.F*!z,{Symbol:D});for(var re=["hasInstance","isConcatSpreadable","iterator","match","replace","search","species","split","toPrimitive","toStringTag","unscopables"],ie=0;re.length>ie;)d(re[ie++]);for(var ne=O(d.store),oe=0;ne.length>oe;)_(ne[oe++]);s(s.S+s.F*!z,"Symbol",{for:function(e){return n(W,e+="")?W[e]:W[e]=D(e)},keyFor:function(e){if(!X(e))throw TypeError(e+" is not a symbol!");for(var t in W)if(W[t]===e)return t},useSetter:function(){V=!0},useSimple:function(){V=!1}}),s(s.S+s.F*!z,"Object",{create:function(e,t){return void 0===t?E(e):Z(E(e),t)},defineProperty:J,defineProperties:Z,getOwnPropertyDescriptor:Q,getOwnPropertyNames:ee,getOwnPropertySymbols:te});var se=l((function(){A.f(1)}));s(s.S+s.F*se,"Object",{getOwnPropertySymbols:function(e){return A.f(S(e))}}),M&&s(s.S+s.F*(!z||l((function(){var e=D();return"[null]"!=I([e])||"{}"!=I({a:e})||"{}"!=I(Object(e))}))),"JSON",{stringify:function(e){for(var t,r,i=[e],n=1;arguments.length>n;)i.push(arguments[n++]);if(r=t=i[1],(b(t)||void 0!==e)&&!X(e))return g(t)||(t=function(e,t){if("function"==typeof r&&(t=r.call(this,e,t)),!X(t))return t}),i[1]=t,I.apply(M,i)}}),D[H][B]||r(14)(D[H],B,D[H].valueOf),h(D,"Symbol"),h(Math,"Math",!0),h(i.JSON,"JSON",!0)},function(e,t,r){e.exports=r(48)("native-function-to-string",Function.toString)},function(e,t,r){var i=r(31),n=r(50),o=r(45);e.exports=function(e){var t=i(e),r=n.f;if(r)for(var s,a=r(e),c=o.f,l=0;a.length>l;)c.call(e,s=a[l++])&&t.push(s);return t}},function(e,t,r){var i=r(0);i(i.S,"Object",{create:r(33)})},function(e,t,r){var i=r(0);i(i.S+i.F*!r(8),"Object",{defineProperty:r(9).f})},function(e,t,r){var i=r(0);i(i.S+i.F*!r(8),"Object",{defineProperties:r(91)})},function(e,t,r){var i=r(15),n=r(20).f;r(21)("getOwnPropertyDescriptor",(function(){return function(e,t){return n(i(e),t)}}))},function(e,t,r){var i=r(10),n=r(35);r(21)("getPrototypeOf",(function(){return function(e){return n(i(e))}}))},function(e,t,r){var i=r(10),n=r(31);r(21)("keys",(function(){return function(e){return n(i(e))}}))},function(e,t,r){r(21)("getOwnPropertyNames",(function(){return r(92).f}))},function(e,t,r){var i=r(4),n=r(27).onFreeze;r(21)("freeze",(function(e){return function(t){return e&&i(t)?e(n(t)):t}}))},function(e,t,r){var i=r(4),n=r(27).onFreeze;r(21)("seal",(function(e){return function(t){return e&&i(t)?e(n(t)):t}}))},function(e,t,r){var i=r(4),n=r(27).onFreeze;r(21)("preventExtensions",(function(e){return function(t){return e&&i(t)?e(n(t)):t}}))},function(e,t,r){var i=r(4);r(21)("isFrozen",(function(e){return function(t){return!i(t)||!!e&&e(t)}}))},function(e,t,r){var i=r(4);r(21)("isSealed",(function(e){return function(t){return!i(t)||!!e&&e(t)}}))},function(e,t,r){var i=r(4);r(21)("isExtensible",(function(e){return function(t){return!!i(t)&&(!e||e(t))}}))},function(e,t,r){var i=r(0);i(i.S+i.F,"Object",{assign:r(93)})},function(e,t,r){var i=r(0);i(i.S,"Object",{is:r(94)})},function(e,t,r){var i=r(0);i(i.S,"Object",{setPrototypeOf:r(65).set})},function(e,t,r){"use strict";var i=r(46);({})[r(5)("toStringTag")]="z",r(11)(Object.prototype,"toString",(function(){return"[object "+i(this)+"]"}),!0)},function(e,t,r){var i=r(0);i(i.P,"Function",{bind:r(95)})},function(e,t,r){var i=r(9).f,n=Function.prototype,o=/^\s*function ([^ (]*)/,s="name";s in n||r(8)&&i(n,s,{configurable:!0,get:function(){try{return(""+this).match(o)[1]}catch(e){return""}}})},function(e,t,r){"use strict";var i=r(4),n=r(35),o=r(5)("hasInstance"),s=Function.prototype;o in s||r(9).f(s,o,{value:function(e){if("function"!=typeof this||!i(e))return!1;if(!i(this.prototype))return e instanceof this;for(;e=n(e);)if(this.prototype===e)return!0;return!1}})},function(e,t,r){var i=r(0),n=r(97);i(i.G+i.F*(parseInt!=n),{parseInt:n})},function(e,t,r){var i=r(0),n=r(98);i(i.G+i.F*(parseFloat!=n),{parseFloat:n})},function(e,t,r){"use strict";var i=r(1),n=r(13),o=r(23),s=r(67),a=r(26),c=r(2),l=r(34).f,u=r(20).f,h=r(9).f,f=r(39).trim,d="Number",p=i[d],_=p,v=p.prototype,g=o(r(33)(v))==d,y="trim"in String.prototype,b=function(e){var t=a(e,!1);if("string"==typeof t&&2<t.length){var r,i,n,o=(t=y?t.trim():f(t,3)).charCodeAt(0);if(43===o||45===o){if(88===(r=t.charCodeAt(2))||120===r)return NaN}else if(48===o){switch(t.charCodeAt(1)){case 66:case 98:i=2,n=49;break;case 79:case 111:i=8,n=55;break;default:return+t}for(var s,c=t.slice(2),l=0,u=c.length;l<u;l++)if(48>(s=c.charCodeAt(l))||s>n)return NaN;return parseInt(c,i)}}return+t};if(!p(" 0o1")||!p("0b1")||p("+0x1")){p=function(e){var t=1>arguments.length?0:e,r=this;return r instanceof p&&(g?c((function(){v.valueOf.call(r)})):o(r)!=d)?s(new _(b(t)),r,p):b(t)};for(var S,m=r(8)?l(_):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),C=0;m.length>C;C++)n(_,S=m[C])&&!n(p,S)&&h(p,S,u(_,S));p.prototype=v,v.constructor=p,r(11)(i,d,p)}},function(e,t,r){"use strict";var i=r(0),n=r(19),o=r(99),s=r(68),a=1..toFixed,c=Math.floor,l=[0,0,0,0,0,0],u="Number.toFixed: incorrect invocation!",h="0",f=function(e,t){for(var r=-1,i=t;6>++r;)i+=e*l[r],l[r]=i%1e7,i=c(i/1e7)},d=function(e){for(var t=6,r=0;0<=--t;)r+=l[t],l[t]=c(r/e),r=r%e*1e7},p=function(){for(var e=6,t="";0<=--e;)if(""!==t||0==e||0!==l[e]){var r=l[e]+"";t=""===t?r:t+s.call(h,7-r.length)+r}return t},_=function(e,t,r){return 0===t?r:1==t%2?_(e,t-1,r*e):_(e*e,t/2,r)};i(i.P+i.F*("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==(0xde0b6b3a7640080).toFixed(0)||!r(2)((function(){a.call({})}))),"Number",{toFixed:function(e){var t,r,i,a,c=o(this,u),l=n(e),v="",g=h;if(0>l||20<l)throw RangeError(u);if(c!=c)return"NaN";if(-1e21>=c||1e21<=c)return c+"";if(0>c&&(v="-",c=-c),1e-21<c)if(r=0>(t=function(e){for(var t=0,r=e;4096<=r;)t+=12,r/=4096;for(;2<=r;)t+=1,r/=2;return t}(c*_(2,69,1))-69)?c*_(2,-t,1):c/_(2,t,1),r*=4503599627370496,0<(t=52-t)){for(f(0,r),i=l;7<=i;)f(1e7,0),i-=7;for(f(_(10,i,1),0),i=t-1;23<=i;)d(8388608),i-=23;d(1<<i),f(1,1),d(2),g=p()}else f(0,r),f(1<<-t,0),g=p()+s.call(h,l);return 0<l?g=v+((a=g.length)<=l?"0."+s.call(h,l-a)+g:g.slice(0,a-l)+"."+g.slice(a-l)):g=v+g,g}})},function(e,t,r){"use strict";var i=r(0),n=r(2),o=r(99),s=1..toPrecision;i(i.P+i.F*(n((function(){return"1"!==s.call(1,void 0)}))||!n((function(){s.call({})}))),"Number",{toPrecision:function(e){var t=o(this,"Number#toPrecision: incorrect invocation!");return void 0===e?s.call(t):s.call(t,e)}})},function(e,t,r){var i=r(0);i(i.S,"Number",{EPSILON:2220446049250313e-31})},function(e,t,r){var i=r(0),n=r(1).isFinite;i(i.S,"Number",{isFinite:function(e){return"number"==typeof e&&n(e)}})},function(e,t,r){var i=r(0);i(i.S,"Number",{isInteger:r(100)})},function(e,t,r){var i=r(0);i(i.S,"Number",{isNaN:function(e){return e!=e}})},function(e,t,r){var i=r(0),n=r(100),o=Math.abs;i(i.S,"Number",{isSafeInteger:function(e){return n(e)&&9007199254740991>=o(e)}})},function(e,t,r){var i=r(0);i(i.S,"Number",{MAX_SAFE_INTEGER:9007199254740991})},function(e,t,r){var i=r(0);i(i.S,"Number",{MIN_SAFE_INTEGER:-9007199254740991})},function(e,t,r){var i=r(0),n=r(98);i(i.S+i.F*(Number.parseFloat!=n),"Number",{parseFloat:n})},function(e,t,r){var i=r(0),n=r(97);i(i.S+i.F*(Number.parseInt!=n),"Number",{parseInt:n})},function(e,t,r){var i=r(0),n=r(101),o=Math.sqrt,s=Math.acosh;i(i.S+i.F*!(s&&710==Math.floor(s(Number.MAX_VALUE))&&s(1/0)==1/0),"Math",{acosh:function(e){return 1>(e=+e)?NaN:94906265.62425156<e?Math.log(e)+Math.LN2:n(e-1+o(e-1)*o(e+1))}})},function(e,t,r){var i=r(0),n=Math.asinh;i(i.S+i.F*!(n&&0<1/n(0)),"Math",{asinh:function e(t){return isFinite(t=+t)&&0!=t?0>t?-e(-t):Math.log(t+Math.sqrt(t*t+1)):t}})},function(e,t,r){var i=r(0),n=Math.atanh;i(i.S+i.F*!(n&&0>1/n(-0)),"Math",{atanh:function(e){return 0==(e=+e)?e:Math.log((1+e)/(1-e))/2}})},function(e,t,r){var i=r(0),n=r(69);i(i.S,"Math",{cbrt:function(e){return n(e=+e)*Math.pow(Math.abs(e),1/3)}})},function(e,t,r){var i=r(0);i(i.S,"Math",{clz32:function(e){return(e>>>=0)?31-Math.floor(Math.log(e+.5)*Math.LOG2E):32}})},function(e,t,r){var i=r(0),n=Math.exp;i(i.S,"Math",{cosh:function(e){return(n(e=+e)+n(-e))/2}})},function(e,t,r){var i=r(0),n=r(70);i(i.S+i.F*(n!=Math.expm1),"Math",{expm1:n})},function(e,t,r){var i=r(0);i(i.S,"Math",{fround:r(172)})},function(e,t,r){var i=r(69),n=Math.pow,o=n(2,-52),s=n(2,-23),a=n(2,127)*(2-s),c=n(2,-126);e.exports=Math.fround||function(e){var t,r,n=Math.abs(e),l=i(e);return n<c?l*function(e){return e+1/o-1/o}(n/c/s)*c*s:(r=(t=(1+s/o)*n)-(t-n))>a||r!=r?l*(1/0):l*r}},function(e,t,r){var i=r(0),n=Math.abs;i(i.S,"Math",{hypot:function(){for(var e,t,r=0,i=0,o=arguments.length,s=0;i<o;)s<(e=n(arguments[i++]))?(r=r*(t=s/e)*t+1,s=e):0<e?r+=(t=e/s)*t:r+=e;return s==1/0?1/0:s*Math.sqrt(r)}})},function(e,t,r){var i=r(0),n=Math.imul;i(i.S+i.F*r(2)((function(){return-5!=n(4294967295,5)||2!=n.length})),"Math",{imul:function(e,t){var r=65535,i=+e,n=+t,o=r&i,s=r&n;return 0|o*s+((r&i>>>16)*s+o*(r&n>>>16)<<16>>>0)}})},function(e,t,r){var i=r(0);i(i.S,"Math",{log10:function(e){return Math.log(e)*Math.LOG10E}})},function(e,t,r){var i=r(0);i(i.S,"Math",{log1p:r(101)})},function(e,t,r){var i=r(0);i(i.S,"Math",{log2:function(e){return Math.log(e)/Math.LN2}})},function(e,t,r){var i=r(0);i(i.S,"Math",{sign:r(69)})},function(e,t,r){var i=r(0),n=r(70),o=Math.exp;i(i.S+i.F*r(2)((function(){return!0})),"Math",{sinh:function(e){return 1>Math.abs(e=+e)?(n(e)-n(-e))/2:(o(e-1)-o(-e-1))*(Math.E/2)}})},function(e,t,r){var i=r(0),n=r(70),o=Math.exp;i(i.S,"Math",{tanh:function(e){var t=n(e=+e),r=n(-e);return t==1/0?1:r==1/0?-1:(t-r)/(o(e)+o(-e))}})},function(e,t,r){var i=r(0);i(i.S,"Math",{trunc:function(e){return(0<e?Math.floor:Math.ceil)(e)}})},function(e,t,r){var i=r(0),n=r(32),o=String.fromCharCode,s=String.fromCodePoint;i(i.S+i.F*(!!s&&1!=s.length),"String",{fromCodePoint:function(){for(var e,t=[],r=arguments.length,i=0;r>i;){if(e=+arguments[i++],n(e,1114111)!==e)throw RangeError(e+" is not a valid code point");t.push(65536>e?o(e):o(55296+((e-=65536)>>10),e%1024+56320))}return t.join("")}})},function(e,t,r){var i=r(0),n=r(15),o=r(6);i(i.S,"String",{raw:function(e){for(var t=n(e.raw),r=o(t.length),i=arguments.length,s=[],a=0;r>a;)s.push(t[a++]+""),a<i&&s.push(arguments[a]+"");return s.join("")}})},function(e,t,r){"use strict";r(39)("trim",(function(e){return function(){return e(this,3)}}))},function(e,t,r){"use strict";var i=r(71)(!0);r(72)(String,"String",(function(e){this._t=e+"",this._i=0}),(function(){var e,t=this._t,r=this._i;return r>=t.length?{value:void 0,done:!0}:(e=i(t,r),this._i+=e.length,{value:e,done:!1})}))},function(e,t,r){"use strict";var i=r(0),n=r(71)(!1);i(i.P,"String",{codePointAt:function(e){return n(this,e)}})},function(e,t,r){"use strict";var i=r(0),n=r(6),o=r(73),s="endsWith";i(i.P+i.F*r(75)(s),"String",{endsWith:function(e){var t=o(this,e,s),r=1<arguments.length?arguments[1]:void 0,i=n(t.length),a=void 0===r?i:Math.min(n(r),i),c=e+"";return t.slice(a-c.length,a)===c}})},function(e,t,r){"use strict";var i=r(0),n=r(73),o="includes";i(i.P+i.F*r(75)(o),"String",{includes:function(e){return!!~n(this,e,o).indexOf(e,1<arguments.length?arguments[1]:void 0)}})},function(e,t,r){var i=r(0);i(i.P,"String",{repeat:r(68)})},function(e,t,r){"use strict";var i=r(0),n=r(6),o=r(73),s="startsWith";i(i.P+i.F*r(75)(s),"String",{startsWith:function(e){var t=o(this,e,s),r=n(Math.min(1<arguments.length?arguments[1]:void 0,t.length)),i=e+"";return t.slice(r,r+i.length)===i}})},function(e,t,r){"use strict";r(12)("anchor",(function(e){return function(t){return e(this,"a","name",t)}}))},function(e,t,r){"use strict";r(12)("big",(function(e){return function(){return e(this,"big","","")}}))},function(e,t,r){"use strict";r(12)("blink",(function(e){return function(){return e(this,"blink","","")}}))},function(e,t,r){"use strict";r(12)("bold",(function(e){return function(){return e(this,"b","","")}}))},function(e,t,r){"use strict";r(12)("fixed",(function(e){return function(){return e(this,"tt","","")}}))},function(e,t,r){"use strict";r(12)("fontcolor",(function(e){return function(t){return e(this,"font","color",t)}}))},function(e,t,r){"use strict";r(12)("fontsize",(function(e){return function(t){return e(this,"font","size",t)}}))},function(e,t,r){"use strict";r(12)("italics",(function(e){return function(){return e(this,"i","","")}}))},function(e,t,r){"use strict";r(12)("link",(function(e){return function(t){return e(this,"a","href",t)}}))},function(e,t,r){"use strict";r(12)("small",(function(e){return function(){return e(this,"small","","")}}))},function(e,t,r){"use strict";r(12)("strike",(function(e){return function(){return e(this,"strike","","")}}))},function(e,t,r){"use strict";r(12)("sub",(function(e){return function(){return e(this,"sub","","")}}))},function(e,t,r){"use strict";r(12)("sup",(function(e){return function(){return e(this,"sup","","")}}))},function(e,t,r){var i=r(0);i(i.S,"Date",{now:function(){return(new Date).getTime()}})},function(e,t,r){"use strict";var i=r(0),n=r(10),o=r(26);i(i.P+i.F*r(2)((function(){return null!==new Date(NaN).toJSON()||1!==Date.prototype.toJSON.call({toISOString:function(){return 1}})})),"Date",{toJSON:function(){var e=n(this),t=o(e);return"number"!=typeof t||isFinite(t)?e.toISOString():null}})},function(e,t,r){var i=r(0),n=r(207);i(i.P+i.F*(Date.prototype.toISOString!==n),"Date",{toISOString:n})},function(e,t,r){"use strict";var i=r(2),n=Date.prototype.getTime,o=Date.prototype.toISOString,s=function(e){return 9<e?e:"0"+e};e.exports=i((function(){return"0385-07-25T07:06:39.999Z"!=o.call(new Date(-50000000000001))}))||!i((function(){o.call(new Date(NaN))}))?function(){if(!isFinite(n.call(this)))throw RangeError("Invalid time value");var e=this,t=e.getUTCFullYear(),r=e.getUTCMilliseconds(),i=0>t?"-":9999<t?"+":"";return i+("00000"+Math.abs(t)).slice(i?-6:-4)+"-"+s(e.getUTCMonth()+1)+"-"+s(e.getUTCDate())+"T"+s(e.getUTCHours())+":"+s(e.getUTCMinutes())+":"+s(e.getUTCSeconds())+"."+(99<r?r:"0"+s(r))+"Z"}:o},function(e,t,r){var i=Date.prototype,n="Invalid Date",o="toString",s=i[o],a=i.getTime;new Date(NaN)+""!=n&&r(11)(i,o,(function(){var e=a.call(this);return e==e?s.call(this):n}))},function(e,t,r){var i=r(5)("toPrimitive"),n=Date.prototype;i in n||r(14)(n,i,r(210))},function(e,t,r){"use strict";var i=r(3),n=r(26),o="number";e.exports=function(e){if("string"!==e&&e!==o&&"default"!==e)throw TypeError("Incorrect hint");return n(i(this),e!=o)}},function(e,t,r){var i=r(0);i(i.S,"Array",{isArray:r(51)})},function(e,t,r){"use strict";var i=r(17),n=r(0),o=r(10),s=r(103),a=r(76),c=r(6),l=r(77),u=r(78);n(n.S+n.F*!r(52)((function(e){Array.from(e)})),"Array",{from:function(e){var t,r,n,h,f=o(e),d="function"==typeof this?this:Array,p=arguments.length,_=1<p?arguments[1]:void 0,v=void 0!==_,g=0,y=u(f);if(v&&(_=i(_,2<p?arguments[2]:void 0,2)),null==y||d==Array&&a(y))for(r=new d(t=c(f.length));t>g;g++)l(r,g,v?_(f[g],g):f[g]);else for(h=y.call(f),r=new d;!(n=h.next()).done;g++)l(r,g,v?s(h,_,[n.value,g],!0):n.value);return r.length=g,r}})},function(e,t,r){"use strict";var i=r(0),n=r(77);i(i.S+i.F*r(2)((function(){function e(){}return!(Array.of.call(e)instanceof e)})),"Array",{of:function(){for(var e=0,t=arguments.length,r=new("function"==typeof this?this:Array)(t);t>e;)n(r,e,arguments[e++]);return r.length=t,r}})},function(e,t,r){"use strict";var i=r(0),n=r(15),o=[].join;i(i.P+i.F*(r(44)!=Object||!r(16)(o)),"Array",{join:function(e){return o.call(n(this),void 0===e?",":e)}})},function(e,t,r){"use strict";var i=r(0),n=r(64),o=r(23),s=r(32),a=r(6),c=[].slice;i(i.P+i.F*r(2)((function(){n&&c.call(n)})),"Array",{slice:function(e,t){var r=a(this.length),i=o(this);if(t=void 0===t?r:t,"Array"==i)return c.call(this,e,t);for(var n=s(e,r),l=s(t,r),u=a(l-n),h=Array(u),f=0;f<u;f++)h[f]="String"==i?this.charAt(n+f):this[n+f];return h}})},function(e,t,r){"use strict";var i=r(0),n=r(18),o=r(10),s=r(2),a=[].sort,c=[1,2,3];i(i.P+i.F*(s((function(){c.sort(void 0)}))||!s((function(){c.sort(null)}))||!r(16)(a)),"Array",{sort:function(e){return void 0===e?a.call(o(this)):a.call(o(this),n(e))}})},function(e,t,r){"use strict";var i=r(0),n=r(22)(0),o=r(16)([].forEach,!0);i(i.P+i.F*!o,"Array",{forEach:function(e){return n(this,e,arguments[1])}})},function(e,t,r){var i=r(4),n=r(51),o=r(5)("species");e.exports=function(e){var t;return n(e)&&("function"==typeof(t=e.constructor)&&(t===Array||n(t.prototype))&&(t=void 0),i(t)&&(null===(t=t[o])&&(t=void 0))),void 0===t?Array:t}},function(e,t,r){"use strict";var i=r(0),n=r(22)(1);i(i.P+i.F*!r(16)([].map,!0),"Array",{map:function(e){return n(this,e,arguments[1])}})},function(e,t,r){"use strict";var i=r(0),n=r(22)(2);i(i.P+i.F*!r(16)([].filter,!0),"Array",{filter:function(e){return n(this,e,arguments[1])}})},function(e,t,r){"use strict";var i=r(0),n=r(22)(3);i(i.P+i.F*!r(16)([].some,!0),"Array",{some:function(e){return n(this,e,arguments[1])}})},function(e,t,r){"use strict";var i=r(0),n=r(22)(4);i(i.P+i.F*!r(16)([].every,!0),"Array",{every:function(e){return n(this,e,arguments[1])}})},function(e,t,r){"use strict";var i=r(0),n=r(105);i(i.P+i.F*!r(16)([].reduce,!0),"Array",{reduce:function(e){return n(this,e,arguments.length,arguments[1],!1)}})},function(e,t,r){"use strict";var i=r(0),n=r(105);i(i.P+i.F*!r(16)([].reduceRight,!0),"Array",{reduceRight:function(e){return n(this,e,arguments.length,arguments[1],!0)}})},function(e,t,r){"use strict";var i=r(0),n=r(49)(!1),o=[].indexOf,s=!!o&&0>1/[1].indexOf(1,-0);i(i.P+i.F*(s||!r(16)(o)),"Array",{indexOf:function(e){return s?o.apply(this,arguments)||0:n(this,e,arguments[1])}})},function(e,t,r){"use strict";var i=r(0),n=r(15),o=r(19),s=r(6),a=[].lastIndexOf,c=!!a&&0>1/[1].lastIndexOf(1,-0);i(i.P+i.F*(c||!r(16)(a)),"Array",{lastIndexOf:function(e){if(c)return a.apply(this,arguments)||0;var t=n(this),r=s(t.length),i=r-1;for(1<arguments.length&&(i=Math.min(i,o(arguments[1]))),0>i&&(i=r+i);0<=i;i--)if(i in t&&t[i]===e)return i||0;return-1}})},function(e,t,r){var i=r(0);i(i.P,"Array",{copyWithin:r(106)}),r(36)("copyWithin")},function(e,t,r){var i=r(0);i(i.P,"Array",{fill:r(79)}),r(36)("fill")},function(e,t,r){"use strict";var i=r(0),n=r(22)(5),o="find",s=!0;o in[]&&[,][o]((function(){s=!1})),i(i.P+i.F*s,"Array",{find:function(e){return n(this,e,1<arguments.length?arguments[1]:void 0)}}),r(36)(o)},function(e,t,r){"use strict";var i=r(0),n=r(22)(6),o="findIndex",s=!0;o in[]&&[,][o]((function(){s=!1})),i(i.P+i.F*s,"Array",{findIndex:function(e){return n(this,e,1<arguments.length?arguments[1]:void 0)}}),r(36)(o)},function(e,t,r){r(41)("Array")},function(e,t,r){var i=r(1),n=r(67),o=r(9).f,s=r(34).f,a=r(74),c=r(53),l=i.RegExp,u=l,h=l.prototype,f=/a/g,d=/a/g,p=new l(f)!==f;if(r(8)&&(!p||r(2)((function(){return d[r(5)("match")]=!1,l(f)!=f||l(d)==d||"/a/i"!=l(f,"i")})))){l=function(e,t){var r=this instanceof l,i=a(e),o=void 0===t;return!r&&i&&e.constructor===l&&o?e:n(p?new u(i&&!o?e.source:e,t):u((i=e instanceof l)?e.source:e,i&&o?c.call(e):t),r?this:h,l)};for(var _=function(e){e in l||o(l,e,{configurable:!0,get:function(){return u[e]},set:function(t){u[e]=t}})},v=s(u),g=0;v.length>g;)_(v[g++]);h.constructor=l,l.prototype=h,r(11)(i,"RegExp",l)}r(41)("RegExp")},function(e,t,r){"use strict";r(109);var i=r(3),n=r(53),o=r(8),s="toString",a=/./[s],c=function(e){r(11)(RegExp.prototype,s,e,!0)};r(2)((function(){return"/a/b"!=a.call({source:"a",flags:"b"})}))?c((function(){var e=i(this);return"/".concat(e.source,"/","flags"in e?e.flags:!o&&e instanceof RegExp?n.call(e):void 0)})):a.name!=s&&c((function(){return a.call(this)}))},function(e,t,r){"use strict";var i=r(3),n=r(6),o=r(82),s=r(54);r(55)("match",1,(function(e,t,r,a){return[function(r){var i=e(this),n=null==r?void 0:r[t];return void 0===n?new RegExp(r)[t](i+""):n.call(r,i)},function(e){var t=a(r,e,this);if(t.done)return t.value;var c=i(e),l=this+"";if(!c.global)return s(c,l);var u=c.unicode;c.lastIndex=0;for(var h,f=[],d=0;null!==(h=s(c,l));){var p=h[0]+"";f[d]=p,""==p&&(c.lastIndex=o(l,n(c.lastIndex),u)),d++}return 0==d?null:f}]}))},function(e,t,r){"use strict";var i=r(3),n=r(10),o=r(6),s=r(19),a=r(82),c=r(54),l=Math.max,u=Math.min,h=Math.floor,f=/\$([$&`']|\d\d?|<[^>]*>)/g,d=/\$([$&`']|\d\d?)/g,p=function(e){return void 0===e?e:e+""};r(55)("replace",2,(function(e,t,r,_){function v(e,t,i,o,s,a){var c=i+e.length,l=o.length,u=d;return void 0!==s&&(s=n(s),u=f),r.call(a,u,(function(r,n){var a;switch(n.charAt(0)){case"$":return"$";case"&":return e;case"`":return t.slice(0,i);case"'":return t.slice(c);case"<":a=s[n.slice(1,-1)];break;default:var u=+n;if(0==u)return r;if(u>l){var f=h(u/10);return 0===f?r:f<=l?void 0===o[f-1]?n.charAt(1):o[f-1]+n.charAt(1):r}a=o[u-1]}return void 0===a?"":a}))}return[function(i,n){var o=e(this),s=null==i?void 0:i[t];return void 0===s?r.call(o+"",i,n):s.call(i,o,n)},function(e,t){var n=_(r,e,this,t);if(n.done)return n.value;var h=i(e),f=this+"",d="function"==typeof t;d||(t+="");var g=h.global;if(g){var y=h.unicode;h.lastIndex=0}for(var b,S=[];null!==(b=c(h,f))&&(S.push(b),g);){""==b[0]+""&&(h.lastIndex=a(f,o(h.lastIndex),y))}for(var m="",C=0,w=0;w<S.length;w++){for(var E=(b=S[w])[0]+"",x=l(u(s(b.index),f.length),0),L=[],A=1;A<b.length;A++)L.push(p(b[A]));var R=b.groups;if(d){var O=[E].concat(L,x,f);void 0!==R&&O.push(R);var k=t.apply(void 0,O)+""}else k=v(E,f,x,L,R,t);x>=C&&(m+=f.slice(C,x)+k,C=x+E.length)}return m+f.slice(C)}]}))},function(e,t,r){"use strict";var i=r(3),n=r(94),o=r(54);r(55)("search",1,(function(e,t,r,s){return[function(r){var i=e(this),n=null==r?void 0:r[t];return void 0===n?new RegExp(r)[t](i+""):n.call(r,i)},function(e){var t=s(r,e,this);if(t.done)return t.value;var a=i(e),c=this+"",l=a.lastIndex;n(l,0)||(a.lastIndex=0);var u=o(a,c);return n(a.lastIndex,l)||(a.lastIndex=l),null===u?-1:u.index}]}))},function(e,t,r){"use strict";var i=r(74),n=r(3),o=r(47),s=r(82),a=r(6),c=r(54),l=r(81),u=r(2),h=Math.min,f=[].push,d="split",p="length",_="lastIndex",v=4294967295,g=!u((function(){RegExp(v,"y")}));r(55)("split",2,(function(e,t,r,u){var y;return y="c"=="abbc"[d](/(b)*/)[1]||4!="test"[d](/(?:)/,-1)[p]||2!="ab"[d](/(?:ab)*/)[p]||4!="."[d](/(.?)(.?)/)[p]||1<"."[d](/()()/)[p]||""[d](/.?/)[p]?function(e,t){var n=this+"";if(void 0===e&&0===t)return[];if(!i(e))return r.call(n,e,t);for(var o,s,a,c=[],u=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(e.sticky?"y":""),h=0,d=void 0===t?v:t>>>0,g=new RegExp(e.source,u+"g");(o=l.call(g,n))&&!((s=g[_])>h&&(c.push(n.slice(h,o.index)),1<o[p]&&o.index<n[p]&&f.apply(c,o.slice(1)),a=o[0][p],h=s,c[p]>=d));)g[_]===o.index&&g[_]++;return h===n[p]?(a||!g.test(""))&&c.push(""):c.push(n.slice(h)),c[p]>d?c.slice(0,d):c}:"0"[d](void 0,0)[p]?function(e,t){return void 0===e&&0===t?[]:r.call(this,e,t)}:r,[function(r,i){var n=e(this),o=null==r?void 0:r[t];return void 0===o?y.call(n+"",r,i):o.call(r,n,i)},function(e,t){var i=u(y,e,this,t,y!==r);if(i.done)return i.value;var l=n(e),f=this+"",d=o(l,RegExp),p=l.unicode,_=(l.ignoreCase?"i":"")+(l.multiline?"m":"")+(l.unicode?"u":"")+(g?"y":"g"),b=new d(g?l:"^(?:"+l.source+")",_),S=void 0===t?v:t>>>0;if(0==S)return[];if(0===f.length)return null===c(b,f)?[f]:[];for(var m=0,C=0,w=[];C<f.length;){b.lastIndex=g?C:0;var E,x=c(b,g?f:f.slice(C));if(null===x||(E=h(a(b.lastIndex+(g?0:C)),f.length))===m)C=s(f,C,p);else{if(w.push(f.slice(m,C)),w.length===S)return w;for(var L=1;L<=x.length-1;L++)if(w.push(x[L]),w.length===S)return w;C=m=E}}return w.push(f.slice(m)),w}]}))},function(e,t,r){var i=r(1),n=r(83).set,o=i.MutationObserver||i.WebKitMutationObserver,s=i.process,a=i.Promise,c="process"==r(23)(s);e.exports=function(){var e,t,r,l=function(){var i,n;for(c&&(i=s.domain)&&i.exit();e;){n=e.fn,e=e.next;try{n()}catch(n){throw e?r():t=void 0,n}}t=void 0,i&&i.enter()};if(c)r=function(){s.nextTick(l)};else if(!o||i.navigator&&i.navigator.standalone)if(a&&a.resolve){var u=a.resolve(void 0);r=function(){u.then(l)}}else r=function(){n.call(i,l)};else{var h=!0,f=document.createTextNode("");new o(l).observe(f,{characterData:!0}),r=function(){f.data=h=!h}}return function(i){var n={fn:i,next:void 0};t&&(t.next=n),e||(e=n,r()),t=n}}},function(e){e.exports=function(e){try{return{e:!1,v:e()}}catch(e){return{e:!0,v:e}}}},function(e,t,r){"use strict";var i=r(113),n=r(37),o="Map";e.exports=r(58)(o,(function(e){return function(){return e(this,0<arguments.length?arguments[0]:void 0)}}),{get:function(e){var t=i.getEntry(n(this,o),e);return t&&t.v},set:function(e,t){return i.def(n(this,o),0===e?0:e,t)}},i,!0)},function(e,t,r){"use strict";var i=r(113),n=r(37);e.exports=r(58)("Set",(function(e){return function(){return e(this,0<arguments.length?arguments[0]:void 0)}}),{add:function(e){return i.def(n(this,"Set"),e=0===e?0:e,e)}},i)},function(e,t,r){"use strict";var i,n=r(1),o=r(22)(0),s=r(11),a=r(27),c=r(93),l=r(114),u=r(4),h=r(37),f=r(37),d=!n.ActiveXObject&&"ActiveXObject"in n,p="WeakMap",_=a.getWeak,v=Object.isExtensible,g=l.ufstore,y=function(e){return function(){return e(this,0<arguments.length?arguments[0]:void 0)}},b={get:function(e){if(u(e)){var t=_(e);return!0===t?g(h(this,p)).get(e):t?t[this._i]:void 0}},set:function(e,t){return l.def(h(this,p),e,t)}},S=e.exports=r(58)(p,y,b,l,!0,!0);f&&d&&(c((i=l.getConstructor(y,p)).prototype,b),a.NEED=!0,o(["delete","has","get","set"],(function(e){var t=S.prototype,r=t[e];s(t,e,(function(t,n){if(u(t)&&!v(t)){this._f||(this._f=new i);var o=this._f[e](t,n);return"set"==e?this:o}return r.call(this,t,n)}))})))},function(e,t,r){"use strict";var i=r(114),n=r(37),o="WeakSet";r(58)(o,(function(e){return function(){return e(this,0<arguments.length?arguments[0]:void 0)}}),{add:function(e){return i.def(n(this,o),e,!0)}},i,!1,!0)},function(e,t,r){"use strict";var i=r(0),n=r(59),o=r(84),s=r(3),a=r(32),c=r(6),l=r(4),u=r(1).ArrayBuffer,h=r(47),f=o.ArrayBuffer,d=o.DataView,p=n.ABV&&u.isView,_=f.prototype.slice,v=n.VIEW,g="ArrayBuffer";i(i.G+i.W+i.F*(u!==f),{ArrayBuffer:f}),i(i.S+i.F*!n.CONSTR,g,{isView:function(e){return p&&p(e)||l(e)&&v in e}}),i(i.P+i.U+i.F*r(2)((function(){return!new f(2).slice(1,void 0).byteLength})),g,{slice:function(e,t){if(void 0!==_&&void 0===t)return _.call(s(this),e);for(var r=s(this).byteLength,i=a(e,r),n=a(void 0===t?r:t,r),o=new(h(this,f))(c(n-i)),l=new d(this),u=new d(o),p=0;i<n;)u.setUint8(p++,l.getUint8(i++));return o}}),r(41)(g)},function(e,t,r){var i=r(0);i(i.G+i.W+i.F*!r(59).ABV,{DataView:r(84).DataView})},function(e,t,r){r(25)("Int8",1,(function(e){return function(t,r,i){return e(this,t,r,i)}}))},function(e,t,r){r(25)("Uint8",1,(function(e){return function(t,r,i){return e(this,t,r,i)}}))},function(e,t,r){r(25)("Uint8",1,(function(e){return function(t,r,i){return e(this,t,r,i)}}),!0)},function(e,t,r){r(25)("Int16",2,(function(e){return function(t,r,i){return e(this,t,r,i)}}))},function(e,t,r){r(25)("Uint16",2,(function(e){return function(t,r,i){return e(this,t,r,i)}}))},function(e,t,r){r(25)("Int32",4,(function(e){return function(t,r,i){return e(this,t,r,i)}}))},function(e,t,r){r(25)("Uint32",4,(function(e){return function(t,r,i){return e(this,t,r,i)}}))},function(e,t,r){r(25)("Float32",4,(function(e){return function(t,r,i){return e(this,t,r,i)}}))},function(e,t,r){r(25)("Float64",8,(function(e){return function(t,r,i){return e(this,t,r,i)}}))},function(e,t,r){var i=r(0),n=r(18),o=r(3),s=(r(1).Reflect||{}).apply,a=Function.apply;i(i.S+i.F*!r(2)((function(){s((function(){}))})),"Reflect",{apply:function(e,t,r){var i=n(e),c=o(r);return s?s(i,t,c):a.call(i,t,c)}})},function(e,t,r){var i=r(0),n=r(33),o=r(18),s=r(3),a=r(4),c=r(2),l=r(95),u=(r(1).Reflect||{}).construct,h=c((function(){function e(){}return!(u((function(){}),[],e)instanceof e)})),f=!c((function(){u((function(){}))}));i(i.S+i.F*(h||f),"Reflect",{construct:function(e,t){o(e),s(t);var r=3>arguments.length?e:o(arguments[2]);if(f&&!h)return u(e,t,r);if(e==r){switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3])}var i=[null];return i.push.apply(i,t),new(l.apply(e,i))}var c=r.prototype,d=n(a(c)?c:Object.prototype),p=Function.apply.call(e,d,t);return a(p)?p:d}})},function(e,t,r){var i=r(9),n=r(0),o=r(3),s=r(26);n(n.S+n.F*r(2)((function(){Reflect.defineProperty(i.f({},1,{value:1}),1,{value:2})})),"Reflect",{defineProperty:function(e,t,r){o(e),t=s(t,!0),o(r);try{return i.f(e,t,r),!0}catch(t){return!1}}})},function(e,t,r){var i=r(0),n=r(20).f,o=r(3);i(i.S,"Reflect",{deleteProperty:function(e,t){var r=n(o(e),t);return(!r||r.configurable)&&delete e[t]}})},function(e,t,r){"use strict";var i=r(0),n=r(3),o=function(e){this._t=n(e),this._i=0;var t,r=this._k=[];for(t in e)r.push(t)};r(102)(o,"Object",(function(){var e,t=this,r=t._k;do{if(t._i>=r.length)return{value:void 0,done:!0}}while(!((e=r[t._i++])in t._t));return{value:e,done:!1}})),i(i.S,"Reflect",{enumerate:function(e){return new o(e)}})},function(e,t,r){var i=r(20),n=r(35),o=r(13),s=r(0),a=r(4),c=r(3);s(s.S,"Reflect",{get:function e(t,r){var s,l,u=3>arguments.length?t:arguments[2];return c(t)===u?t[r]:(s=i.f(t,r))?o(s,"value")?s.value:void 0===s.get?void 0:s.get.call(u):a(l=n(t))?e(l,r,u):void 0}})},function(e,t,r){var i=r(20),n=r(0),o=r(3);n(n.S,"Reflect",{getOwnPropertyDescriptor:function(e,t){return i.f(o(e),t)}})},function(e,t,r){var i=r(0),n=r(35),o=r(3);i(i.S,"Reflect",{getPrototypeOf:function(e){return n(o(e))}})},function(e,t,r){var i=r(0);i(i.S,"Reflect",{has:function(e,t){return t in e}})},function(e,t,r){var i=r(0),n=r(3),o=Object.isExtensible;i(i.S,"Reflect",{isExtensible:function(e){return n(e),!o||o(e)}})},function(e,t,r){var i=r(0);i(i.S,"Reflect",{ownKeys:r(116)})},function(e,t,r){var i=r(0),n=r(3),o=Object.preventExtensions;i(i.S,"Reflect",{preventExtensions:function(e){n(e);try{return o&&o(e),!0}catch(e){return!1}}})},function(e,t,r){var i=r(9),n=r(20),o=r(35),s=r(13),a=r(0),c=r(28),l=r(3),u=r(4);a(a.S,"Reflect",{set:function e(t,r,a){var h,f,d=4>arguments.length?t:arguments[3],p=n.f(l(t),r);if(!p){if(u(f=o(t)))return e(f,r,a,d);p=c(0)}if(s(p,"value")){if(!1===p.writable||!u(d))return!1;if(h=n.f(d,r)){if(h.get||h.set||!1===h.writable)return!1;h.value=a,i.f(d,r,h)}else i.f(d,r,c(0,a));return!0}return void 0!==p.set&&(p.set.call(d,a),!0)}})},function(e,t,r){var i=r(0),n=r(65);n&&i(i.S,"Reflect",{setPrototypeOf:function(e,t){n.check(e,t);try{return n.set(e,t),!0}catch(t){return!1}}})},function(e,t,r){r(270),e.exports=r(7).Array.includes},function(e,t,r){"use strict";var i=r(0),n=r(49)(!0);i(i.P,"Array",{includes:function(e){return n(this,e,1<arguments.length?arguments[1]:void 0)}}),r(36)("includes")},function(e,t,r){r(272),e.exports=r(7).Array.flatMap},function(e,t,r){"use strict";var i=r(0),n=r(273),o=r(10),s=r(6),a=r(18),c=r(104);i(i.P,"Array",{flatMap:function(e){var t,r,i=o(this);return a(e),t=s(i.length),r=c(i,0),n(r,i,i,t,0,1,e,arguments[1]),r}}),r(36)("flatMap")},function(e,t,r){"use strict";var i=r(51),n=r(4),o=r(6),s=r(17),a=r(5)("isConcatSpreadable");e.exports=function e(t,r,c,l,u,h,f,d){for(var p,_,v=u,g=0,y=!!f&&s(f,d,3);g<l;){if(g in c){if(p=y?y(c[g],g,r):c[g],_=!1,n(p)&&(_=void 0===(_=p[a])?i(p):!!_),_&&0<h)v=e(t,r,p,o(p.length),v,h-1)-1;else{if(9007199254740991<=v)throw TypeError();t[v]=p}v++}g++}return v}},function(e,t,r){r(275),e.exports=r(7).String.padStart},function(e,t,r){"use strict";var i=r(0),n=r(117),o=r(57),s=/Version\/10\.\d+(\.\d+)?( Mobile\/\w+)? Safari\//.test(o);i(i.P+i.F*s,"String",{padStart:function(e){return n(this,e,1<arguments.length?arguments[1]:void 0,!0)}})},function(e,t,r){r(277),e.exports=r(7).String.padEnd},function(e,t,r){"use strict";var i=r(0),n=r(117),o=r(57),s=/Version\/10\.\d+(\.\d+)?( Mobile\/\w+)? Safari\//.test(o);i(i.P+i.F*s,"String",{padEnd:function(e){return n(this,e,1<arguments.length?arguments[1]:void 0,!1)}})},function(e,t,r){r(279),e.exports=r(7).String.trimLeft},function(e,t,r){"use strict";r(39)("trimLeft",(function(e){return function(){return e(this,1)}}),"trimStart")},function(e,t,r){r(281),e.exports=r(7).String.trimRight},function(e,t,r){"use strict";r(39)("trimRight",(function(e){return function(){return e(this,2)}}),"trimEnd")},function(e,t,r){r(283),e.exports=r(61).f("asyncIterator")},function(e,t,r){r(89)("asyncIterator")},function(e,t,r){r(285),e.exports=r(7).Object.getOwnPropertyDescriptors},function(e,t,r){var i=r(0),n=r(116),o=r(15),s=r(20),a=r(77);i(i.S,"Object",{getOwnPropertyDescriptors:function(e){for(var t,r,i=o(e),c=s.f,l=n(i),u={},h=0;l.length>h;)void 0!==(r=c(i,t=l[h++]))&&a(u,t,r);return u}})},function(e,t,r){r(287),e.exports=r(7).Object.values},function(e,t,r){var i=r(0),n=r(118)(!1);i(i.S,"Object",{values:function(e){return n(e)}})},function(e,t,r){r(289),e.exports=r(7).Object.entries},function(e,t,r){var i=r(0),n=r(118)(!0);i(i.S,"Object",{entries:function(e){return n(e)}})},function(e,t,r){"use strict";r(110),r(291),e.exports=r(7).Promise.finally},function(e,t,r){"use strict";var i=r(0),n=r(7),o=r(1),s=r(47),a=r(112);i(i.P+i.R,"Promise",{finally:function(e){var t=s(this,n.Promise||o.Promise),r="function"==typeof e;return this.then(r?function(r){return a(t,e()).then((function(){return r}))}:e,r?function(r){return a(t,e()).then((function(){throw r}))}:e)}})},function(e,t,r){r(293),r(294),r(295),e.exports=r(7)},function(e,t,r){var i=r(1),n=r(0),o=r(57),s=[].slice,a=/MSIE .\./.test(o),c=function(e){return function(t,r){var i=2<arguments.length,n=!!i&&s.call(arguments,2);return e(i?function(){("function"==typeof t?t:Function(t)).apply(this,n)}:t,r)}};n(n.G+n.B+n.F*a,{setTimeout:c(i.setTimeout),setInterval:c(i.setInterval)})},function(e,t,r){var i=r(0),n=r(83);i(i.G+i.B,{setImmediate:n.set,clearImmediate:n.clear})},function(e,t,r){for(var i=r(80),n=r(31),o=r(11),s=r(1),a=r(14),c=r(40),l=r(5),u=l("iterator"),h=l("toStringTag"),f=c.Array,d={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},p=n(d),_=0;_<p.length;_++){var v,g=p[_],y=d[g],b=s[g],S=b&&b.prototype;if(S&&(S[u]||a(S,u,f),S[h]||a(S,h,g),c[g]=f,y))for(v in i)S[v]||o(S,v,i[v],!0)}},function(e){var t=function(e){"use strict";function t(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}function r(e,t,r,i){var o=t&&t.prototype instanceof n?t:n,s=Object.create(o.prototype),a=new d(i||[]);return s._invoke=l(e,r,a),s}function i(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}function n(){}function o(){}function s(){}function a(e){["next","throw","return"].forEach((function(r){t(e,r,(function(e){return this._invoke(r,e)}))}))}function c(e,t){function r(n,o,s,a){var c=i(e[n],e,o);if("throw"!==c.type){var l=c.arg,u=l.value;return u&&"object"==typeof u&&g.call(u,"__await")?t.resolve(u.__await).then((function(e){r("next",e,s,a)}),(function(e){r("throw",e,s,a)})):t.resolve(u).then((function(e){l.value=e,s(l)}),(function(e){return r("throw",e,s,a)}))}a(c.arg)}var n;this._invoke=function(e,i){function o(){return new t((function(t,n){r(e,i,t,n)}))}return n=n?n.then(o,o):o()}}function l(e,t,r){var n=C;return function(o,s){if(n===E)throw new Error("Generator is already running");if(n===x){if("throw"===o)throw s;return{value:void 0,done:!0}}for(r.method=o,r.arg=s;;){var a=r.delegate;if(a){var c=u(a,r);if(c){if(c===L)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(n===C)throw n=x,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n=E;var l=i(e,t,r);if("normal"===l.type){if(n=r.done?x:w,l.arg===L)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(n=x,r.method="throw",r.arg=l.arg)}}}function u(e,t){var r=e.iterator[t.method];if(void 0===r){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,u(e,t),"throw"===t.method))return L;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return L}var n=i(r,e.iterator,t.arg);if("throw"===n.type)return t.method="throw",t.arg=n.arg,t.delegate=null,L;var o=n.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,L):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,L)}function h(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function f(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function d(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(h,this),this.reset(!0)}function p(e){if(e){var t=e[b];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,i=function t(){for(;++r<e.length;)if(g.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return i.next=i}}return{next:_}}function _(){return{value:void 0,done:!0}}var v=Object.prototype,g=v.hasOwnProperty,y="function"==typeof Symbol?Symbol:{},b=y.iterator||"@@iterator",S=y.asyncIterator||"@@asyncIterator",m=y.toStringTag||"@@toStringTag";try{t({},"")}catch(e){t=function(e,t,r){return e[t]=r}}e.wrap=r;var C="suspendedStart",w="suspendedYield",E="executing",x="completed",L={},A={};A[b]=function(){return this};var R=Object.getPrototypeOf,O=R&&R(R(p([])));O&&O!==v&&g.call(O,b)&&(A=O);var k=s.prototype=n.prototype=Object.create(A);return o.prototype=k.constructor=s,s.constructor=o,o.displayName=t(s,m,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===o||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,s):(e.__proto__=s,t(e,m,"GeneratorFunction")),e.prototype=Object.create(k),e},e.awrap=function(e){return{__await:e}},a(c.prototype),c.prototype[S]=function(){return this},e.AsyncIterator=c,e.async=function(t,i,n,o,s){void 0===s&&(s=Promise);var a=new c(r(t,i,n,o),s);return e.isGeneratorFunction(i)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},a(k),t(k,m,"Generator"),k[b]=function(){return this},k.toString=function(){return"[object Generator]"},e.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var i=t.pop();if(i in e)return r.value=i,r.done=!1,r}return r.done=!0,r}},e.values=p,d.prototype={constructor:d,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(f),!e)for(var t in this)"t"===t.charAt(0)&&g.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){function t(t,i){return o.type="throw",o.arg=e,r.next=t,i&&(r.method="next",r.arg=void 0),!!i}if(this.done)throw e;for(var r=this,i=this.tryEntries.length-1;0<=i;--i){var n=this.tryEntries[i],o=n.completion;if("root"===n.tryLoc)return t("end");if(n.tryLoc<=this.prev){var s=g.call(n,"catchLoc"),a=g.call(n,"finallyLoc");if(s&&a){if(this.prev<n.catchLoc)return t(n.catchLoc,!0);if(this.prev<n.finallyLoc)return t(n.finallyLoc)}else if(s){if(this.prev<n.catchLoc)return t(n.catchLoc,!0)}else{if(!a)throw new Error("try statement without catch or finally");if(this.prev<n.finallyLoc)return t(n.finallyLoc)}}}},abrupt:function(e,t){for(var r,i=this.tryEntries.length-1;0<=i;--i)if((r=this.tryEntries[i]).tryLoc<=this.prev&&g.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var n=r;break}n&&("break"===e||"continue"===e)&&n.tryLoc<=t&&t<=n.finallyLoc&&(n=null);var o=n?n.completion:{};return o.type=e,o.arg=t,n?(this.method="next",this.next=n.finallyLoc,L):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),L},finish:function(e){for(var t,r=this.tryEntries.length-1;0<=r;--r)if((t=this.tryEntries[r]).finallyLoc===e)return this.complete(t.completion,t.afterLoc),f(t),L},catch:function(e){for(var t,r=this.tryEntries.length-1;0<=r;--r)if((t=this.tryEntries[r]).tryLoc===e){var i=t.completion;if("throw"===i.type){var n=i.arg;f(t)}return n}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:p(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),L}},e}(e.exports);try{regeneratorRuntime=t}catch(e){Function("r","regeneratorRuntime = r")(t)}},function(e,t,r){r(298),e.exports=r(119).global},function(e,t,r){var i=r(299);i(i.G,{global:r(85)})},function(e,t,r){var i=r(85),n=r(119),o=r(300),s=r(302),a=r(309),c="prototype",l=function(e,t,r){var u,h,f,d=e&l.F,p=e&l.G,_=e&l.S,v=e&l.P,g=e&l.B,y=e&l.W,b=p?n:n[t]||(n[t]={}),S=b[c],m=p?i:_?i[t]:(i[t]||{})[c];for(u in p&&(r=t),r)(h=!d&&m&&void 0!==m[u])&&a(b,u)||(f=h?m[u]:r[u],b[u]=p&&"function"!=typeof m[u]?r[u]:g&&h?o(f,i):y&&m[u]==f?function(e){var t=function(t,r,i){if(this instanceof e){switch(arguments.length){case 0:return new e;case 1:return new e(t);case 2:return new e(t,r)}return new e(t,r,i)}return e.apply(this,arguments)};return t[c]=e[c],t}(f):v&&"function"==typeof f?o(Function.call,f):f,v&&((b.virtual||(b.virtual={}))[u]=f,e&l.R&&S&&!S[u]&&s(S,u,f)))};l.F=1,l.G=2,l.S=4,l.P=8,l.B=16,l.W=32,l.U=64,l.R=128,e.exports=l},function(e,t,r){var i=r(301);e.exports=function(e,t,r){return i(e),void 0===t?e:1===r?function(r){return e.call(t,r)}:2===r?function(r,i){return e.call(t,r,i)}:3===r?function(r,i,n){return e.call(t,r,i,n)}:function(){return e.apply(t,arguments)}}},function(e){e.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},function(e,t,r){var i=r(303),n=r(308);e.exports=r(87)?function(e,t,r){return i.f(e,t,n(1,r))}:function(e,t,r){return e[t]=r,e}},function(e,t,r){var i=r(304),n=r(305),o=r(307),s=Object.defineProperty;t.f=r(87)?Object.defineProperty:function(e,t,r){if(i(e),t=o(t,!0),i(r),n)try{return s(e,t,r)}catch(t){}if("get"in r||"set"in r)throw TypeError("Accessors not supported!");return"value"in r&&(e[t]=r.value),e}},function(e,t,r){var i=r(86);e.exports=function(e){if(!i(e))throw TypeError(e+" is not an object!");return e}},function(e,t,r){e.exports=!r(87)&&!r(120)((function(){return 7!=Object.defineProperty(r(306)("div"),"a",{get:function(){return 7}}).a}))},function(e,t,r){var i=r(86),n=r(85).document,o=i(n)&&i(n.createElement);e.exports=function(e){return o?n.createElement(e):{}}},function(e,t,r){var i=r(86);e.exports=function(e,t){if(!i(e))return e;var r,n;if(t&&"function"==typeof(r=e.toString)&&!i(n=r.call(e)))return n;if("function"==typeof(r=e.valueOf)&&!i(n=r.call(e)))return n;if(!t&&"function"==typeof(r=e.toString)&&!i(n=r.call(e)))return n;throw TypeError("Can't convert object to primitive value")}},function(e){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},function(e){var t={}.hasOwnProperty;e.exports=function(e,r){return t.call(e,r)}}]);